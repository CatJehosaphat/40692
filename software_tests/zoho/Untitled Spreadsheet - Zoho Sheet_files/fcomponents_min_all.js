function Screengrabber(){}var FComponents=function($){var options={csrfParamName:"fccsrf",csrfCookieName:"FC_CSRF_TOKEN",contextPath:"fcomponents/",service:"WR"};return{init:function(data){var csrfInit=!1;(void 0===data.csrfParamName||""===data.csrfParamName)&&(csrfInit=!0,data.csrfParamName=options.csrfParamName,data.csrfCookieName=options.csrfCookieName),options=$.extend({},options,data),csrfInit&&FCUtil.ajaxUtil("html/blank.html","get","","")},option:function(name,value){return value?void(options[name]=value):options[name]}}}(jQuery),FCUtil=function($){function _getCSRFToken(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){var c=ca[i].trim();if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}return{ajaxUtil:function(requestURL,requestType,requestData,callbacks,optionObj){requestData=requestData||{},optionObj=optionObj||{},callbacks=callbacks||{},optionObj.responseType=optionObj.responseType?optionObj.responseType:"application/json","post"===requestType.toLowerCase()&&(requestData[FComponents.option("csrfParamName")]=this.getCSRFToken()),callbacks.errorNotified=!1;var requestObj=$.ajax({type:requestType,url:FComponents.option("contextPath")+requestURL,data:requestData,beforeSend:function(xhrObject){callbacks.progress&&callbacks.progress(xhrObject)},fail:function(serverResponse){callbacks.fail&&!callbacks.errorNotified&&(callbacks.errorNotified=!0,callbacks.fail(serverResponse))},error:function(serverResponse){callbacks.fail&&!callbacks.errorNotified&&(callbacks.errorNotified=!0,callbacks.fail(serverResponse))},success:function(serverResponse){if(callbacks.success){var responseObj=serverResponse;"object"!=typeof responseObj&&"application/json"===optionObj.responseType&&(responseObj=$.parseJSON(serverResponse)),callbacks.success(responseObj)}}});return requestObj},commonKeys:{insert:"Insert",close:"Close",cancel:"Cancel"},getString:function(key,stringArray){return this.getI18NString("fcommon",key,stringArray,this.commonKeys)},getI18NString:function(moduleName,key,stringArray,defaultKeys){var ii8nText=$.i18n(moduleName,key,stringArray);if(ii8nText==="[noi18n] "+key&&defaultKeys&&(ii8nText=defaultKeys[key],stringArray&&defaultKeys))for(var i=0;i<stringArray.length;i++)ii8nText=ii8nText.replace("{"+i+"}",stringArray[i]);return ii8nText},removeProgressDialog:function(){$("#zfc-progress-dialog").remove()},showProgressDialog:function(msg,targetContainer,overlay){if(overlay===!0){var overlay=$("<div>").attr({id:"zfc-progress-dialog-overlay"}).appendTo("body");overlay.css({overflow:"scroll",position:"fixed",width:"100%",height:"100%","z-index":$.ui.dialog.zIndex?$.ui.dialog.zIndex:1e4,top:0,left:0});var loaderDialog=$("<div>").attr({id:"zfc-progress-dialog"}).appendTo(overlay)}else var loaderDialog=$("<div>").attr({id:"zfc-progress-dialog"}).appendTo("body");loaderDialog.css({height:targetContainer.outerHeight(),width:targetContainer.outerWidth(),left:targetContainer.offset().left,top:targetContainer.offset().top});var loaderSpan=$("<span>").attr({id:"zfc-dialog-loader","class":"ui-zfc-loader-circle"}).appendTo(loaderDialog),msgSpan=$("<span>").attr({"class":"zfc-dialog-loader-msg"}).appendTo(loaderDialog);msgSpan.text(msg),loaderDialog.animate({height:110,width:220,marginTop:100,marginLeft:targetContainer.outerWidth()/3},100,function(){var leftpos=(loaderDialog.outerWidth()-(loaderSpan.outerWidth()+msgSpan.width()+4))/2,toppos=(loaderDialog.outerHeight()-loaderSpan.outerHeight()-2)/2;loaderSpan.css({left:leftpos,top:toppos}),msgSpan.css({left:leftpos,top:toppos}),loaderSpan.fadeIn(50),msgSpan.fadeIn(100)})},showError:function(msg,msgContainer,renderTo,errorOptions,insertType){msg=""===msg||void 0===msg?FCUtil.getI18NString("common","unknownerror.label"):msg;var _errorBanner=msgContainer.find("#ui-fc-server-error");_errorBanner.length||(_errorBanner=$('<div id="ui-fc-server-error" class="ui-fc-server-error"><div class="zc-server-error"><span id="zc-server-error-close" title="'+FCUtil.getString("close","fcommon")+'" class="ui-zfc-icon ui-icon-closethick"></span><div class="zc-server-error-msg" id="zfc-server-error"></div> </div> </div>'),_errorBanner[void 0!==insertType?insertType:"insertBefore"](renderTo)),_errorBanner.find("#zfc-server-error").text(msg);var defaultErrorOptions={openDelay:200,closeDelay:200};if(errorOptions=$.extend({},defaultErrorOptions,errorOptions),_errorBanner.slideDown(errorOptions.openDelay,function(){errorOptions.onOpen&&errorOptions.onOpen(_errorBanner)}),errorOptions.autoCloseDelay){msgContainer.data("zfcAutoClose")&&clearTimeout(msgContainer.data("zfcAutoClose"));var zfcAutoClose=setTimeout(function(){_errorBanner.slideUp(errorOptions.closeDelay,function(){errorOptions.onAutoClose&&errorOptions.onAutoClose(_errorBanner)})},errorOptions.autoCloseDelay);msgContainer.data("zfcAutoClose",zfcAutoClose)}_errorBanner.find("#zc-server-error-close").off("click").on("click",function(){errorOptions.beforeClose&&errorOptions.beforeClose(_errorBanner),_errorBanner.slideUp(errorOptions.closeDelay,function(){errorOptions.onClose&&errorOptions.onClose(_errorBanner)})})},getCSRFToken:function(){return _getCSRFToken(FComponents.option("csrfCookieName"))},getCSRFCookie:function(name){return _getCSRFToken(name)}}}(jQuery),FCImport=function($){return _elementId="importUI",_dialogId="importdialog",_dialogIsOpened=!1,{options:{errorMessages:{},maxSize:1e6,fileFormats:".doc,.docx,.odt,.txt",uploadServerStatus:!0,uploadURL:FComponents.option("contextPath")+"import.do",uploadServerURL:window.location.protocol+"//uploadserver.zoho.com/postservlet",fileOpenURL:"ropen.do?rid={0}"},init:function(options){FCImport.options=$.extend({},FCImport.options,options),FCImport.options.uploadURL=FComponents.option("contextPath")+"import.do"},open:function(options){if(!_dialogIsOpened){var importDialog=$("#"+_dialogId);importDialog.length&&importDialog.zdialog("close");var importUI=$("#"+_elementId);FCImport.options=$.extend({},FCImport.options,options),importDialog=$('<div id="'+_dialogId+'"></div>').appendTo($("body")),importUI=$('<div id="'+_elementId+'"></div>').appendTo(importDialog),importDialog.zdialog({modal:!0,minimizable:!0}),importUI.attr("ctype","zimport");var importOptions={errorMessages:FCImport.options.errorMessages,supportedFileFormats:FCImport.options.fileFormats,uploadServerStatus:FCImport.options.uploadServerStatus,uploadServerURL:FCImport.options.uploadServerURL,serviceType:FComponents.option("service"),allowedFileSize:parseInt(FCImport.options.maxSize),passwordprotected:!1,uploadURL:FComponents.option("contextPath")+"import.do",importLocalFileName:"xfile",password:"password",importURLFileName:"importurl"};importUI.zimport(importOptions),importDialog.on("dialogopen",function(){_dialogIsOpened=!0}),importDialog.zdialog("open"),importDialog.on("dialogclose",function(){_dialogIsOpened=!1,importDialog.remove()})}},close:function(){var importDialog=$("#"+_dialogId);importDialog.length&&importDialog.zdialog("close")},updateImportStatus:function(importResponse){FCImport.options.uploadServerStatus&&$("#"+_elementId).zimport("showMessage","status",importResponse)},setErrorMessage:function(errorMessages){$("#"+_elementId).zimport("setErrorMessage",errorMessages)},setImportResourceId:function(importResponse){FCImport.options.uploadServerStatus&&$("#"+_elementId).zimport("setImportResourceId",importResponse)},upload:function(file,fileObj,callbacks){var defaultInfo={file:void 0,newName:""},uploadObj=$.extend({},defaultInfo,{file:file,newName:fileObj.name}),handlecallbacks={progress:function(serverResponse,per){if(callbacks&&callbacks.progress){var responseObj=serverResponse;"object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse)),callbacks.progress(responseObj,per)}},success:function(serverResponse){var responseObj=serverResponse;"object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse)),callbacks&&("success"===responseObj.status&&callbacks.success?callbacks.success(responseObj):callbacks.fail&&callbacks.fail(responseObj))},fail:function(serverResponse){if(callbacks&&callbacks.fail){var responseObj=serverResponse;"object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse)),callbacks.fail(responseObj)}}},data={docname:uploadObj.newName,servicename:FComponents.option("service").toLowerCase()};if(window.FileReader&&"string"!=typeof file){var checkSize=file.get(0).files[0].size>this.options.allowedFileSize?!0:!1;checkSize||(uploadObj.documentType=file.get(0).files[0].type)}data[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken();var importFromLocal=!0;"string"!=typeof file&&file.get(0)&&file.get(0).files[0]?(data.xfile=file,uploadObj.xfile=file,data.filetype="localfile"):(importFromLocal=!1,data.importurl=file,data.filetype="weburl"),""!==fileObj.password&&void 0!==fileObj.password&&(data.password=fileObj.password),uploadObj=$.extend({},uploadObj,this._checkFileExtn(uploadObj.newName,importFromLocal)),FCImport.options.uploadServerStatus&&importFromLocal&&this._checkAjaxUploadAndProgressEvents()?this._udServerUpload(uploadObj,handlecallbacks):$.ajaxUpload(FCImport.options.uploadURL,data,handlecallbacks)},_checkAjaxUploadAndProgressEvents:function(){var xhr=new XMLHttpRequest;return!!(xhr&&"upload"in xhr&&"onprogress"in xhr.upload)},_checkFileExtn:function(fileName,importFromLocal){importFromLocal&&(fileName=fileName.substr(fileName.lastIndexOf("\\")+1));var index=fileName.lastIndexOf("."),index=index>0?index:fileName.length,ext=fileName.substr(index);return{newName:fileName,fileExtn:ext?ext.toLowerCase():void 0}},_udServerUpload:function(filedetails,callbacks){var xhr=new XMLHttpRequest,upload=xhr.upload;upload.fileIndex=0,upload.fileName=encodeURIComponent(filedetails.newName),upload.downloadStartTime=(new Date).getTime(),upload.currentStart=upload.downloadStartTime,upload.currentProgress=0,upload.startData=0,this._uploadId=upload.fileIndex+"_new_"+$.now()+"_",xhr.onreadystatechange=function(){4===xhr.readyState&&200!==xhr.status?callbacks.fail(xhr):1===xhr.readyState&&callbacks.progress(xhr)},xhr.open("POST",FCImport.options.uploadServerURL,!0),xhr.setRequestHeader("Connection","Keep-Alive"),xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.setRequestHeader("x-service","EX"),xhr.setRequestHeader("x-streammode","1"),xhr.setRequestHeader("charset","utf-8"),xhr.setRequestHeader("upload-id",this._uploadId),xhr.setRequestHeader("upload-from",FCImport.options.serviceType),xhr.setRequestHeader("x-filename",encodeURIComponent(filedetails.newName+filedetails.fileExtn)),xhr.setRequestHeader("x-doc_conversion",!0),xhr.setRequestHeader("x-content_type",filedetails.documentType),xhr.setRequestHeader("x-uploadTo","myfolders"),xhr.setRequestHeader("x-folderId","-1"),xhr.withCredentials=!0,xhr.send(filedetails.xfile[0].files[0])}}}(jQuery);!function($){$.ui.zimport.config=$.extend(!0,$.ui.zimport.config,{importData:function(info){var data={filetype:info.importFromLocal?"localfile":"weburl",docname:info.documentName+info.fileExtn,password:info.password?info.password:"",servicename:FComponents.option("service").toLowerCase()};return data[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken(),info.importFromLocal&&info.urlEle?data.xfile=info.urlEle:info.web_url&&(data.importurl=info.web_url),data},callbacks:{success:function(data,ui){var href=FCImport.options.fileOpenURL.replace("{0}",data.resinfo.rid),target="_blank";if($.fcomponents.getCurrentDocStatus){var docstate=$.fcomponents.getCurrentDocStatus();0===docstate&&(target="_self")}var element=ui.fileOpenElement;element.attr({href:href,target:target})},fail:function(){}}}),$.fcomponents={getCurrentDocStatus:function(){return 1}}}(jQuery),function($){var zfilefield={widgetEventPrefix:"filefield",options:{displayLength:450,rename:!0,fileId:"",fileName:"",saveToFolder:!0,allowDuplicateName:!1,canFavourite:!0},_isEnabled:!0,_isFileNameModified:!1,_isFilePathModified:!1,_fileTextBox:"zfiletextbox",_folderTextBox:"zfoldertextbox",_textFieldIsClicked:!1,_textFieldMinWidth:300,_textFieldMaxWidth:300,_folderTreeMinWidth:300,_folderTreeMaxWidth:600,_treeMaxHeight:500,_ellipsPos:0,_favRequest:void 0,_favElement:void 0,_EVENTS:{ONSUCCESS:"success",ONSUBMIT:"submit",ONFOCUS:"focus",ONBLUR:"blur",ONFAILURE:"failure",ONFAVOURITE:"favourite",ONUNFAVOURITE:"unfavourite"},_init:function(){},_create:function(){this._textarea=document.createElement("textarea"),this.options=$.extend({},$.ui.zfilefield.config,this.options),this.options.canCreateFolder=!1,this._isSafari=/^((?!chrome).)*safari/i.test(navigator.userAgent),this._textFieldMaxWidth=this.options.displayLength,this._isRawFileName="boolean"==typeof this.options.isEncoded?!this.options.isEncoded:!1,this._baseElement=$(this.element),this._defaultLoadCheck=!1,this._createRenameContainer(),this.options.saveToFolder=this.options.saveToFolder&&this.options.rename?!0:!1,(this.options.rename||this.options.canFavourite)&&this._getReosurceAndTreeDetails(),this._baseElement.on("click",function(event){event.stopPropagation()}),this._windowHeight=$(window).height(),this._windowWidth=$(window).width();var baseObj=this;$(window).on("resize."+this.widgetName,$.debounce(500,function(){baseObj._windowWidth=$(window).width(),baseObj._windowHeight=$(window).height()})),this._validationIsInProgress=!1,this.options.rename||this._baseElement.prop("title",this._fileEncodeName)},_bindFavouriteEvents:function(){var baseObj=this;baseObj._favElement.off("click").on("click",function(orgEvent){baseObj._favRequest&&baseObj._favRequest.abort(),baseObj._updateFavouriteStatus(baseObj._favElement.find("span").hasClass("ui-zfc-icon-favourite"),orgEvent)})},_updateFavouriteStatus:function(favourite,orgEvent){var currentAction=favourite?"unfavourite":"favourite",reqData={action:currentAction,rid:this.options.fileId},baseObj=this,callbacks={progress:function(){baseObj._changeFavouriteStatus("inprogress",currentAction,orgEvent)},success:function(responseObj){var curStatus=responseObj.message?responseObj.message:responseObj.request;baseObj._favRequest=void 0,baseObj._isFavorite=responseObj.isFavorite?!1:!0,currentAction=responseObj.isFavorite?"favourite":"unfavourite",baseObj._changeFavouriteStatus(curStatus,currentAction,orgEvent)},fail:function(){baseObj._favRequest=void 0,baseObj._changeFavouriteStatus("error",currentAction,orgEvent)}};this._favRequest=FCUtil.ajaxUtil("documentupdate.do","POST",reqData,callbacks)},_getReosurceAndTreeDetails:function(){var baseObj=this,callbacks={success:function(responseObj){if("success"===responseObj.request){if(baseObj._isFavorite=responseObj.isFavorite,baseObj._isShared=responseObj.isShared,responseObj.renameAllowed?baseObj._initMouseEvents():baseObj.options.rename=!1,baseObj.options.saveToFolder=baseObj.options.saveToFolder?responseObj.saveToFolder:!1,baseObj.options.saveToFolder?($("<div/>").attr({id:"ui-zfilefield-folder-button",title:baseObj._getString("choosefolder.label")}).html($("<span/>").attr({"class":"ui-zfc-icon-folder ui-zfc-icon"})).appendTo(baseObj._baseElement),baseObj._createFolderIconAndInitEvents()):baseObj._baseElement.addClass("ui-zfilefield-rename-only"),baseObj.options.canFavourite&&baseObj._isShared){var iconTitle=baseObj._isFavorite?"removefavorite.label":"markasfavorite.label";baseObj._favElement=$('<div class="ui-zfilefield-fav" id="ui-zfilefield-fav" title="'+baseObj._getString(iconTitle)+'">').html('<span class="ui-zfc-icon ui-zfc-icon-'+(baseObj._isFavorite?"favourite":"unfavourite")+'"></span>').appendTo(baseObj._baseElement),baseObj._bindFavouriteEvents()}}else baseObj.options.saveToFolder=!1}};this._getFoldersList(void 0,callbacks)},_getFoldersList:function(folderId,callbacks){var reqData={rid:this.options.fileId,folderId:folderId};FCUtil.ajaxUtil("getfoldertree.do","GET",reqData,callbacks)},_createRenameContainer:function(){this._renameElement||(this.options.fileName=this.options.fileName.length>0?this.options.fileName.trim():this._baseElement.text().trim(),this._baseElement.html(""),this._renameWrapper=$("<div>").attr({id:"ui-zft-wrapper","class":"ui-zft-wrapper"}).appendTo(this._baseElement),this._renameElement=$("<div>").attr({id:"ui-zft-name","class":"ui-zft-name"}).appendTo(this._renameWrapper),this._extensionElement=$("<div>").attr({id:"ui-zft-extension"}).appendTo(this._renameWrapper),void 0!==this.options.fileExtension&&"zwriter"!==this.options.fileExtension&&"zsheet"!==this.options.fileExtension&&"zslide"!==this.options.fileExtension&&(this._extensionElement.attr({"class":"ui-zft-extension"}),this._extensionElement.text("."+this.options.fileExtension))),this.options.fileName=this.options.fileName.length>0?this.options.fileName.trim():this._baseElement.text().trim(),this._setEllipzsis(),this._setTextFieldWidth(this._renameWrapper,"divElement",0),this._baseElement.addClass("ui-zfilefield "+(this._isSafari?"ui-zff-transition-safari":" ui-zff-transition-base")),this._defaultLoadCheck||this._baseElementTooltipReset(!0),this._defaultLoadCheck=!0,this._renameWrapper.off("mouseenter.zstf mouseleave.zstf"),this._initBodyEvents(!1),this.options.rename&&(this._initMouseEvents(),this._newFolderErrStatus=!1,this._isCursorMoved=!1)},_initMouseEvents:function(){var baseObj=this;this._textFieldMouseEnter=void 0,baseObj._renameWrapper.on("mouseenter.zstf",function(){if(baseObj._baseElement.addClass("ui-zfilefield-active"),baseObj._renameWrapper.addClass("ui-zft-is-active"),$("#"+baseObj._fileTextBox).length<1){var filetextboxObj=$("<input/>").attr({type:"text",maxlength:255,id:baseObj._fileTextBox,value:baseObj._fileEncodeName});baseObj._renameElement.html(filetextboxObj),baseObj._initTextboxEvents(),baseObj._setTextFieldWidth($("#"+baseObj._fileTextBox),"inputElement",0),baseObj._setTextFieldWidth(baseObj._renameWrapper,"divHover",0),baseObj._textFieldMouseEnter=setTimeout(function(){baseObj._renameWrapper.css("width","auto")},100)}}),baseObj._renameWrapper.on("mouseleave.zstf",function(){baseObj._textFieldIsClicked?(baseObj._renameWrapper.addClass("ui-zft-is-active"),baseObj._baseElement.addClass("ui-zfilefield-active")):(baseObj._textFieldMouseEnter&&clearTimeout(baseObj._textFieldMouseEnter),baseObj._setEllipzsis(),baseObj._baseElement.removeClass("ui-zfilefield-active"),baseObj._renameWrapper.removeClass("ui-zft-is-active"),baseObj._setTextFieldWidth(baseObj._renameWrapper,"divElement",0),baseObj._baseElementTooltipReset(!0))}),this._extensionElement.off("mouseup.zstf").on("mouseup.zstf",function(){$("#"+baseObj._fileTextBox).focus().select()})},_initBodyEvents:function(initEvent){var baseObj=this;initEvent?baseObj._initBodyEvent||(baseObj._initBodyEvent=!0,$(window).on("keydown.zstf",function(orgEvent){27===orgEvent.keyCode&&(baseObj._initBodyEvents(!1),baseObj._isFileNameModified=!1,baseObj._isFilePathModified=!1,baseObj._renameWrapper.removeClass("ui-zft-is-active"),baseObj._baseElement.removeClass("ui-zfilefield-active"),baseObj._onSubmit(orgEvent,"escapeKey"))}),$("body").on("click.zstf",function(orgEvent){baseObj._textFieldIsClicked=!0,baseObj._validationIsInProgress||orgEvent.target.id===baseObj._fileTextBox||baseObj._onSubmit(orgEvent,"clickevent")})):(this._initBodyEvent=!1,$(window).off("keydown.zstf"),$("body").off("click.zstf"))},_initTextboxEvents:function(){var baseObj=this,filetextboxObj=$("#"+baseObj._fileTextBox);filetextboxObj.on("focus",function(orgEvent){filetextboxObj.select(),baseObj._triggerEvent(baseObj._EVENTS.ONFOCUS,orgEvent)}),filetextboxObj.on("click",function(orgEvent){return baseObj._textKeypressed=!1,baseObj._initBodyEvents(!0),baseObj._textFieldIsClicked=!0,baseObj._baseElement.addClass("ui-zfilefield-active"),baseObj._renameWrapper.addClass("ui-zft-is-active"),baseObj._setTextFieldWidth(filetextboxObj,"inputElement",0),orgEvent.stopPropagation(),baseObj._baseElementTooltipReset(!1),!1}),filetextboxObj.on("keydown",function(orgEvent){baseObj._textKeypressed=!0,16!==orgEvent.keyCode&&188!==orgEvent.keyCode&&(baseObj._setTextFieldWidth(filetextboxObj,"inputElement",0),orgEvent.keyCode===$.ui.keyCode.ESCAPE?(baseObj._isFileNameModified=!1,baseObj._onSubmit(orgEvent,"escapeKey")):(baseObj._isFileNameModified=filetextboxObj.val()!==baseObj.options.fileName?!0:!1,(orgEvent.keyCode===$.ui.keyCode.ENTER||orgEvent.keyCode===$.ui.keyCode.TAB)&&(baseObj._baseElement.addClass("ui-zfilefield-active"),baseObj._renameWrapper.addClass("ui-zft-is-active"),baseObj._onSubmit(orgEvent,"textFieldFousOut")))),orgEvent.stopPropagation()}),filetextboxObj.on("keyup",function(orgEvent){return 16!==orgEvent.keyCode&&188!==orgEvent.keyCode&&baseObj._setTextFieldWidth(filetextboxObj,"inputElement",0),baseObj._isFileNameModified=filetextboxObj.val()!==baseObj.options.fileName?!0:!1,orgEvent.stopPropagation(),!1})},_baseElementTooltipReset:function(set){set?this._isEllipsisActive()&&this._baseElement.prop("title",this._fileEncodeName):this._resetTooltip(this._baseElement)},_resetTooltip:function(currentEle){$("body > .ui-ztooltip").remove(),currentEle.removeAttr("title")},_setEllipzsis:function(){this._fileEncodeName=this.options.fileName;var dummyObj=$("#ui-zfilefield-renamefield");dummyObj.length<1&&(dummyObj=$('<div id="ui-zfilefield-renamefield">').attr("class","ui-zfilefield-renamefield").appendTo("body")),dummyObj[this._isRawFileName?"text":"html"](this.options.fileName),this._fileEncodeName=dummyObj.text(),this._renameElement.text(this._fileEncodeName),dummyObj.remove()},_isEllipsisActive:function(){return this._baseElement[0].offsetWidth<this._baseElement[0].scrollWidth},_setTextFieldWidth:function(inputObj,inputType,textFieldBufferWidth){var dummyObj=$("#ui-zfilefield-dummy");dummyObj.length<1&&(dummyObj=$('<div id="ui-zfilefield-dummy">').attr("class","ui-zfilefield-renamefield").appendTo("body"));var width=void 0;if(dummyObj.show(),"divElement"===inputType?(dummyObj.html(inputObj.text().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/ /g,"&nbsp;")),width=dummyObj.width()+textFieldBufferWidth):"divHover"===inputType?width=$("#"+this._fileTextBox).width()+this._extensionElement.outerWidth(!0):(dummyObj.html(inputObj.val().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/ /g,"&nbsp;")),width=dummyObj.outerWidth()+textFieldBufferWidth),dummyObj.hide(),"inputElement"===inputType){var bufferWidth=50,newWidth=this._textFieldMaxWidth;width<=this._textFieldMaxWidth-bufferWidth&&(newWidth=width+bufferWidth),inputObj.css("width",newWidth),newWidth>=this._textFieldMaxWidth&&this._baseElementTooltipReset(!0)}else inputObj.css("width",(width<=this._textFieldMaxWidth?width+1:this._textFieldMaxWidth)+"px")},_triggerEvent:function(eventType,orgEvent,_ui){var ui={target:$(this.element)};return _ui&&(ui=$.extend(ui,_ui)),this._trigger(eventType,orgEvent,ui)},_onSubmit:function(orgEvent,actionEventtype){if("escapeKey"===actionEventtype)this._refresh(orgEvent);else{var filetextboxObj=$("#"+this._fileTextBox);if(this._isFileNameModified){var newDocName="";if(this._isFileNameModified){var fileName=filetextboxObj.val();""===fileName.trim()?(newDocName=this._fileEncodeName,filetextboxObj.val(this._fileEncodeName),this._setTextFieldWidth(filetextboxObj,"inputElement")):fileName!==this.options.fileName&&(newDocName=fileName),this._isFileNameModified=!1}var prevDocName=this.options.fileName,docname=""===newDocName?this._fileEncodeName:newDocName,reqData={action:"rename",rid:this.options.fileId,docname:docname},baseObj=this,callbacks={progress:function(){baseObj._requestStatus=!0,baseObj._showLoader(!0,"progress",actionEventtype),baseObj._triggerEvent(baseObj._EVENTS.ONSUBMIT,orgEvent,{fileHTMLName:docname})},success:function(responseObj){"success"===responseObj.request?(baseObj._isRawFileName=!1,baseObj.options.fileName=responseObj.DOC_ENCODE_NAME,baseObj._showLoader(!1,"success",actionEventtype),baseObj._refresh(orgEvent),baseObj._triggerEvent(baseObj._EVENTS.ONSUCCESS,orgEvent,{fileName:responseObj.DOC_ENCODE_NAME,fileHTMLName:responseObj.DOC_NAME})):"File_Name_Already_Exist"===responseObj.message?(baseObj._showLoader(!1,"fail",actionEventtype),baseObj._validationIsInProgress=!0,ZComponents.showMessageDialog({type:"alert",secondary:baseObj._getString("renamealert.label"),icon:"ui-zalert-error",onClose:function(args){args.isCancel||setTimeout(function(){$("#"+baseObj._fileTextBox).focus().select().removeAttr("readonly"),baseObj._validationIsInProgress=!1},200)}})):baseObj._renameFail(orgEvent,baseObj.options.folderId,prevDocName,actionEventtype),baseObj._requestStatus=!1},fail:function(){baseObj._renameFail(orgEvent,baseObj.options.folderId,prevDocName,actionEventtype)}};FCUtil.ajaxUtil("documentupdate.do","POST",reqData,callbacks)}else this._refresh(orgEvent)}},_renameFail:function(orgEvent,prevFolderId,prevDocName,actionEventtype){this._requestStatus=!1,this._showLoader(!1,"fail",actionEventtype),this.options.fileName=prevDocName,this._isRawFileName=!1,this._refresh(orgEvent),this._triggerEvent(this._EVENTS.ONFAILURE,orgEvent,{folderId:prevFolderId,fileName:prevDocName})},rename:function(fileName,isEncoded){this._isRawFileName="boolean"==typeof isEncoded?!isEncoded:!1,this.options.fileName="undefined"==typeof fileName?"":fileName,this._refresh()},_refresh:function(orgEvent){this._textFieldIsClicked=!1,$(document).trigger("mousedown.ztooltip"),this._createRenameContainer(),this._baseElementTooltipReset(!1),this._baseElementTooltipReset(!0);var baseObj=this;setTimeout(function(){baseObj._renameWrapper.removeClass("ui-zft-is-active"),baseObj._baseElement.removeClass("ui-zfilefield-active")},50),orgEvent&&this._triggerEvent(this._EVENTS.ONBLUR,orgEvent)},_createFolderIconAndInitEvents:function(){var baseObj=this,chooseFolderBtn=$("#ui-zfilefield-folder-button");chooseFolderBtn.off("click").on("click",function(){ZMoveTo.open({allowDuplicateName:baseObj.options.allowDuplicateName,extension:baseObj.options.fileExtension,fileExtension:baseObj.options.fileExtension,fileName:baseObj.options.fileName,fileId:baseObj.options.fileId,dialogTitle:baseObj.options.movetoDialogTitle})})},changeFolderName:function(folderId,folderName){$("#ui-zfolfer-"+folderId+"-li","#ui-zfilefield-folder-tree").find("a").text(folderName)},changeStatus:function(action,status){"Favourite"===action&&this._changeFavouriteStatus("success",status)},_escapeHTML:function(htmlContent){return this._textarea.textContent=htmlContent,this._textarea.innerHTML},_showLoader:function(show){$("#"+this._fileTextBox).attr("readonly",show),$("#ui-zfilefield-loader").length||this._renameWrapper.append($("<div>").attr({id:"ui-zfilefield-loader","class":"ui-zff-loader"}).html('<span class="ui-zfc-loader-circle"><span>')),$("#ui-zfilefield-loader")[show?"show":"hide"]()},_changeFavouriteStatus:function(statusMsg,status,orgEvent){"success"===statusMsg||"inprogress"===statusMsg?("favourite"===status?(this._isFavorite=!0,$("#ui-zfilefield-fav span").attr("class","ui-zfc-icon ui-zfc-icon-favourite")):(this._isFavorite=!1,$("#ui-zfilefield-fav span").attr("class","ui-zfc-icon ui-zfc-icon-unfavourite")),this._triggerEvent("favourite"===status?this._EVENTS.ONUNFAVOURITE:this._EVENTS.ONFAVOURITE,orgEvent)):"FileAlreadyFavorite"===statusMsg?(this._isFavorite=!0,$("#ui-zfilefield-fav span").attr("class","ui-zfc-icon ui-zfc-icon-favourite")):"FileAlreadyUnFavorite"===statusMsg&&(this._isFavorite=!1,$("#ui-zfilefield-fav span").attr("class","ui-zfc-icon ui-zfc-icon-unfavourite"));var iconTitle=this._isFavorite?"removefavorite.label":"markasfavorite.label";this._resetTooltip(this._favElement),this._favElement.data("title",this._getString(iconTitle)).prop("title",this._getString(iconTitle))},_getString:function(key,stringArray,module){return FCUtil.getI18NString(module?module:"zfilefield",key,stringArray?stringArray:void 0,this.options.keys)},disable:function(){this._isEnabled=!1,$("#ui-zfilefield-folder-button").hide(),this._renameWrapper.off("mouseenter.zstf mouseleave.zstf"),this._initBodyEvents(!1)},enable:function(){this._isEnabled=!0,this.options.rename&&(this._initMouseEvents(!0),this.options.saveToFolder&&$("#ui-zfilefield-folder-button").show()),this._refresh()},destroy:function(){this.element.empty(),this.element.off("."+this.widgetName),$.Widget.prototype.destroy.apply(this,arguments)}};$.widget("ui.zfilefield",zfilefield),$.ui.zfilefield.config={keys:{"markasfavorite.label":"Set as Favorite","removefavorite.label":"Remove Favorite","choosefolder.label":"Choose Folder","renamealert.label":"A file with this name already exists. Please choose a different name."}}}(jQuery);var NotifyCollaborator=function($){var znotifycollaborator={widgetEventPrefix:"notifycollaborator",_EVENTS:{ONOPEN:"open",ONSEND:"send",ONCLOSE:"close"},options:{fileId:void 0,isOwner:!1},_sharedTypes:{all:"allcollaborators.label",selected:"selectedrecipients.label",ownerandcoowner:"ownerandcoowner.label",owneronly:"owneronly.label"},_userDetails:[],_create:function(options){if("string"==typeof options){var givenFileId=options;options={},options.fileId=givenFileId}this.options=$.extend({},this.options,options),this._defaultCheck=!1;var checkInput=$("<input>").hide().appendTo($("body"));this._isPlaceholder=void 0===checkInput[0].placeholder||null===checkInput[0].placeholder,checkInput.remove(),this._createMainContainer(),this._defaultCheck||this._getSharedUserList(this.options.fileId)},_getSharedUserList:function(){var reqData={rid:this.options.fileId},baseObj=this,callbacks={progress:function(){},success:function(responseObj){"object"==typeof responseObj?(baseObj.options.isOwner=responseObj.isOwner,baseObj._userDetails=responseObj.users,baseObj._contactsServerURL=responseObj.contactsServerURL,baseObj._defaultCheck=!0,baseObj._initTokens()):(baseObj._gradientLoader.hide(),baseObj._showError(void 0,!0))},fail:function(){baseObj._gradientLoader.hide(),baseObj._showError(void 0,!0)}};FCUtil.ajaxUtil("getsharedusers.do","GET",reqData,callbacks)},_createMainContainer:function(){var base=this;this.znotifyCollaborator=$("<div>").attr("id","znotifyCollaborator"),this.znotifyCollaborator.appendTo($("body")),this.znotifyCollaborator.zdialog({modal:"true",minimizable:!0,hideOnClose:!1}),this.znotifyCollaborator.dialog("option",{dialogClass:"ui-znotify-collaborator",position:"center",width:600,minWidth:600,height:450,minHeight:400,modal:!0,buttons:[{text:base._getString("send.label"),click:function(){base._submit()},keyup:function(ev){13===ev.which&&base._submit()},disabled:"disabled","class":"ui-zbutton-primary",id:"ui-znc-send"},{text:FCUtil.getString("cancel"),click:function(){base.close()},id:"ui-znc-close"}],title:base._getString("title.label"),resizeStart:function(){base.znotifyCollaborator.height()},resize:function(){var newDiff=base.znotifyCollaborator.parent().height()-base.znotifyCollaborator.height();base._dialogHeightDiff===newDiff?(base.znotifyCollaborator.height(),base._resizeTextArea(),base._setMorePosition(),base._expandCollapse(),dialogHeight=base.znotifyCollaborator.height()):(dialogHeight=base.znotifyCollaborator.parent().height()-base._dialogHeightDiff,base.znotifyCollaborator.height(dialogHeight))},beforeClose:function(ev){var closeEle=$(ev.target).closest(".ui-dialog-titlebar-close");return!closeEle.hasClass("ui-state-disabled")},close:function(){base._close()}});var dialogTitle=this.znotifyCollaborator.parent().find(".ui-dialog-titlebar .ui-dialog-title"),dialogButnPane=this.znotifyCollaborator.parent().find(".ui-dialog-buttonpane"),dialogResizableHandle=this.znotifyCollaborator.parent().find(".ui-resizable-handle"),ccToMe='<span id="znc-sendmeacopy"><input type="checkbox" id="ui-znc-sendmeacopy"/><label for="ui-znc-sendmeacopy">'+this._getString("sendmeacopy.label")+"</label></span>";dialogButnPane.find(".ui-dialog-buttonset").append(ccToMe),this.znotifyCollaborator.on("zdialogminimize",function(){NotifyCollaborator.isMinimized=!0,dialogTitle.attr("title",dialogTitle.text()).addClass("ui-znc-minimize-width"),base.znotifyCollaborator.hide(),dialogButnPane.hide(),dialogResizableHandle.hide()}).on("zdialogmaximize",function(){NotifyCollaborator.isMinimized=!1,base.znotifyCollaborator.show(),dialogButnPane.show(),dialogTitle.removeAttr("title").removeClass("ui-znc-minimize-width"),dialogResizableHandle.show()});var recipientsLabel='<span class="ui-znc-recipients-label">'+this._getString("recipients.label")+":</span>";this.zecContainer=$("<div>").attr({id:"ui-znc-container"}).append(recipientsLabel).appendTo(this.znotifyCollaborator);var zecRecipientsCombo=$("<div>").attr({id:"ui-znc-recipients-combo"}),optionList={};for(options in this._sharedTypes)optionList[options]=this._sharedTypes[options];optionList.hasOwnProperty("ownerandcoowner")&&optionList.ownerandcoowner&&delete optionList.ownerandcoowner,this.options.isOwner&&optionList.hasOwnProperty("owneronly")&&optionList.owneronly&&delete optionList.owneronly,this.selectOption=$("<select>").attr({id:"ui-znc-combo"});for(options in optionList){var option=$("<option>").attr({value:options,id:"ui-znc-options"+options}).text(this._getString(optionList[options]));this.selectOption.append(option)}this._more=$("<div>").text("...").attr("id","ui-znc-recipients-list-more").addClass("ui-ztokens-token").appendTo(this.zecContainer).on("click",function(){$(this).hide(),base._expandCollapseEnable=!1,base._expandCollapse(!0)}),this._expandCollapseEnable=!0,this.zecRecipientsList=$("<div>").attr({id:"ui-znc-recipients-list","class":"ui-znc-collapse"}).appendTo(this.zecContainer).ztokens({remove:function(event,ui){if(base._expandCollapseEnable&&base._more.trigger("click"),ui.data){var tokenIndex=base._selectedUserList.indexOf(ui.data);base._selectedUserList.splice(tokenIndex,1)}base.tokenInput.trigger("focus"),base.selectOption.zcombo("setValue","selected"),base.tokenInput[0].disabled=!1,base._expandCollapse(!0),base.isTokensEmpty(),base.tokenInput.autocomplete("close")}}).on("click",function(e){base._expandCollapseEnable&&base._more.is(":visible")||e.target!==this||base.tokenInput.trigger("focus")}),this._gradientLoader=$("<div>").attr({id:"zec-gradient-loader","class":"zfc-gradient-loader"}).appendTo(this.zecRecipientsList),this.zecRecipientsList.prepend(this.selectOption),this.selectOption.zcombo({type:"text_only",retainFocus:!1,change:function(event,ui){return base._defaultCheck&&(base._selectNotifyOption(ui.value),base._expandCollapse(),base.tokenInput.val(""),base.isTokensEmpty(),"selected"===ui.value?base._setMorePosition("hide"):base._setMorePosition()),!1},hide:function(event,ui){"selected"===ui.value&&base.tokenInput.trigger("focus")}}),this._comboWidget=this.selectOption.zcombo("widget"),this.selectOption.trigger("change"),this.visibleSpan=$("<div>").attr("class","visibleSpan").appendTo(zecRecipientsCombo),this.subject=$("<div>").attr({id:"ui-znc-subject"});var mailSubject=$("<input>").attr({id:"ui-znc-mail-subject",autofocus:!0,type:"text",placeholder:this._getString("subject.label"),data:'{"validateOptions":{"type":"nonEmpty","required":true}}'}).appendTo(this.subject);this.zecContainer.append(this.subject),this.message=$("<div>").attr({id:"ui-znc-message"});var mailMsg=$("<textarea>").attr({id:"ui-znc-mail-message",placeholder:this._getString("message.label"),data:'{"validateOptions":{"type":"nonEmpty","required":true}}'}).appendTo(this.message);if(this.zecContainer.append(this.message),this._isPlaceholder){var subText=$("<div>").addClass("ui-znc-placeholder").text(this._getString("subject.label")).appendTo(this.subject);this._placeHolder(mailSubject,subText);var msgText=$("<div>").addClass("ui-znc-placeholder").text(this._getString("message.label")).appendTo(this.message);this._placeHolder(mailMsg,msgText)}this.tokenInput=this.zecRecipientsList.ztokens("getInputElement"),this.tokenInput.attr("readonly",!0),this.znotifyCollaborator.zdialog("open"),this._dialogHeightDiff=this.znotifyCollaborator.parent().height()-this.znotifyCollaborator.height(),this._refresh(!0)},_initTokens:function(){function replaceAll(find,replace,str){return str&&str.replace(new RegExp(find,"g"),replace)}this._selectedUserList=[],this._gradientLoader.remove();var base=this;this.splitName=function(value){return value.split(",")[0]},this.addToken=function(value,data,isError,fromKeyBoard){if(fromKeyBoard&&base.tokenInput.val("").trigger("focus"),void 0!==value&&value.trim().length){if(!isError){if(-1!==base._selectedUserList.indexOf(data))return!1;base._selectedUserList.push(data)}base.zecRecipientsList.ztokens("addToken",this.splitName(value.trim()),data,isError)}base.isTokensEmpty()},this.isTokensEmpty=function(){return 0===base.zecRecipientsList.ztokens("getValue").length?($("#ui-znc-send").button("disable"),!1):($("#ui-znc-send").button("enable"),!0)},this.tokenInput.autocomplete({autoFocus:!0,minLength:0,source:function(request,response){var _usersInAsc=base._userDetails;_usersInAsc.sort(function(a,b){return a.name.toLowerCase()>b.name.toLowerCase()?1:a.name.toLowerCase()<b.name.toLowerCase()?-1:0});var newNonDuplicatetag=$.grep(base._userDetails,function(el){return-1===$.inArray(el.id,base.zecRecipientsList.ztokens("getData"))}),term=$.ui.autocomplete.escapeRegex(request.term.trim()),startsWithMatcher=new RegExp("^"+term,"i"),startsWith=$.grep(newNonDuplicatetag,function(value){return startsWithMatcher.test(value.label||value.value||value)}),containsMatcher=new RegExp(term,"i"),contains=$.grep(newNonDuplicatetag,function(value){return $.inArray(value,startsWith)<0&&containsMatcher.test(value.label||value.value||value)}),result=startsWith.concat(contains);response(result)},focus:function(){return!1},select:function(event,ui){return ui.item&&ui.item.name&&base.addToken(ui.item.name,ui.item.id,!1,!0),base.selectOption.zcombo("setValue","selected"),base._expandCollapse(),base._setMorePosition(),base._expandCollapseEnable&&base._more.trigger("click"),!1}}).data("autocomplete")._renderItem=function(ul,item){if(ul.addClass("ui-znc-autocomplete-notify"),item.email){var findValue=$(this.element).val(),userId=replaceAll(findValue,"<b>"+findValue+"</b>",item.email),name=item.encodeName;item.encodeName===item.name&&(name=replaceAll(findValue,"<b>"+findValue+"</b>",item.encodeName));var groupClass=item.type&&"group"===item.type.toLowerCase()?"ui-group-name":"";return $("<li>").data("item.autocomplete",item).append("<a><img src='"+base._getImage(item.id,item.type)+"' /><span class="+groupClass+">"+name+"<br><span>"+userId+"</span></span></a>").appendTo(ul)}return $("<li>").addClass("ui-menu-item").data("item.autocomplete",item).append("<div id='ui-znc-noresult'>"+item.label+"</div>").appendTo(ul)};var coownerCheck=!1;this._userDetails.length?this.tokenInput.removeAttr("readonly"):$("#ui-znc-send").button("disable"),$(this._userDetails).each(function(i){"COOWNER"===base._userDetails[i].permission&&(coownerCheck=!0)});var selectedOption=this.selectOption.zcombo("getValue"),optionList={};for(options in this._sharedTypes)optionList[options]=this._sharedTypes[options];coownerCheck||delete optionList.ownerandcoowner,this.options.isOwner&&(delete optionList.ownerandcoowner,delete optionList.owneronly),this.selectOption.zcombo("removeAllOptions");for(options in optionList){var option={value:options,id:"ui-znc-options"+options,label:this._getString(optionList[options])};this.selectOption.zcombo("addOption",option)}this.selectOption.zcombo("setValue",selectedOption),this._selectNotifyOption(selectedOption),"selected"===selectedOption&&this.tokenInput.trigger("focus"),this._setMorePosition();var fromPasteEvent=!1;this.tokenInput.on("keyup.znotify",function(){base._expandCollapse(),fromPasteEvent&&(base._resizeTextArea(),base.tokenInput.autocomplete("close"),fromPasteEvent=!1)}).on("blur.znotify",function(){base._handleTokenInput(base.tokenInput.val())}).on("keydown.znotify",function(e){base.tokenInput.autocomplete("enable"),base.tokenInput.val()||$(".ui-autocomplete.ui-widget:visible").length||37!==e.which&&39!==e.which&&40!==e.which&&46!==e.which&&8!==e.which||(40===e.which?base.tokenInput.autocomplete("search",""):(base.tokenInput.autocomplete("close"),base.tokenInput.autocomplete("disable"))),13===e.which&&base.tokenInput.val()&&base._handleTokenInput(base.tokenInput.val())}).on("paste.znotify",function(e){var emailList=e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData("text");base._handleTokenInput(emailList),setTimeout(function(){base.tokenInput.val("").trigger("focus").width(15),base._expandCollapse(!0)},10),fromPasteEvent=!0})},_handleTokenInput:function(emailList){if("string"==typeof emailList&&emailList.trim().length){var baseObj=this;emailList=emailList.split(","),$(baseObj._userDetails).each(function(i){var mailIndex=emailList.indexOf(baseObj._userDetails[i].email);-1!==mailIndex&&(emailList.splice(mailIndex,1),baseObj.addToken(baseObj._userDetails[i].name,baseObj._userDetails[i].id))}),$(emailList).each(function(i){baseObj.addToken(emailList[i],void 0,!0)}),this.tokenInput.val("").trigger("focus")}},_submit:function(){var ref=!0,base=this,mailSubject=$("#ui-znc-mail-subject").val(),mailContent=$("#ui-znc-mail-message").val();if(mailSubject.trim().length<1&&mailContent.trim().length<1&&(ref=confirm(this._getString("emptydatawarning.label"))),ref){var recipients=this.zecRecipientsList.ztokens("getData").join(","),reqData={rid:this.options.fileId,notifyto:this.selectOption.zcombo("getValue"),recipients:recipients,subject:mailSubject,message:mailContent,sendmeacopy:$("#ui-znc-sendmeacopy").is(":checked")},callbacks={progress:function(){$("#ui-znc-send").button("option",{disabled:!0,label:base._getString("sending.label")})},success:function(responseObj){"success"===responseObj.request?($(document).znotifier({autohide:!0,timeout:1e3,content:base._getString("sendmailsuccessfully.label"),iconclass:"ui-components-icon ui-state-status-icon",type:"status",position:"north",closebutton:!0}),base.refresh(),base._triggerEvent(base._EVENTS.ONSEND,base),base.close()):base._handleMailFail(serverResponse)},fail:function(serverResponse){base._handleMailFail(serverResponse)}};FCUtil.ajaxUtil("sendnotifymails.do","POST",reqData,callbacks)}},_handleMailFail:function(){$("#ui-znc-send").button("option",{disabled:!1,label:this._getString("send.label")}),this._showError(this._getString("mail_fail_error.label"))},refresh:function(){this._refresh()},_refresh:function(fromInit){this._expandCollapseEnable=!0,this._expandCollapse(!1),this.subject.children("input").val(""),this.message.children("textarea").val(""),this.selectOption.zcombo("setValue","all"),fromInit||this._selectNotifyOption(this.selectOption.zcombo("getValue")),this._resizeTextArea(),fromInit||this._setMorePosition(),this.tokenInput.val(""),$("#ui-znc-send").button("option",{enable:!0,label:this._getString("send.label")})},_getImage:function(id,type){type=type&&type.toLowerCase()||"","email"===type&&(id="abcd",type="");var imageSource=this._contactsServerURL+"/file?fs=thumb&ID="+id+"&t="+type;return imageSource},_selectNotifyOption:function(value){var base=this;return this.zecRecipientsList.ztokens("removeAllTokens"),this.tokenInput[0].disabled=!1,this._selectedUserList=[],"all"===value?($(base._userDetails).each(function(i){base.addToken(base._userDetails[i].name,base._userDetails[i].id)}),this.tokenInput[0].disabled=!0):"ownerandcoowner"===value?$(base._userDetails).each(function(i){("COOWNER"===base._userDetails[i].permission||"OWNER"===base._userDetails[i].permission)&&base.addToken(base._userDetails[i].name,base._userDetails[i].id)}):"owneronly"===value&&$(base._userDetails).each(function(i){"OWNER"===base._userDetails[i].permission&&base.addToken(base._userDetails[i].name,base._userDetails[i].id)}),this._resizeTextArea(),!1},_setMorePosition:function(action){if(this.zecRecipientsList.hasClass("ui-znc-collapse")){if("hide"===action)return void this._more.hide();var tokens=this.zecRecipientsList.children(".ui-ztokens-token"),tokensLen=tokens.length;if(tokensLen){var lastToken=tokens.last();if($(lastToken).offset().top>$(this._comboWidget).offset().top){for(var left=0,leftEle=0,i=0;tokensLen>i&&left<$(tokens[i]).offset().left;i++)left=$(tokens[i]).offset().left,leftEle=$(tokens[i]);this._more.show().css("left",left+$(leftEle).outerWidth(!0)-this.zecContainer.offset().left)}else $(lastToken).offset().top<=$(tokens[0]).offset().top&&this._more.hide()}else this._more.hide()}},_resizeTextArea:function(){this.message.height(this.zecContainer.innerHeight()-(this.subject.innerHeight()+4+this.zecRecipientsList.innerHeight()))},_expandCollapse:function(manul){void 0!==manul&&(manul?this.zecRecipientsList.removeClass("ui-znc-collapse"):this.zecRecipientsList.addClass("ui-znc-collapse")),parseInt(this.zecRecipientsList.css("min-height"))<this.zecRecipientsList.innerHeight()-20?(this._expandCollapseEnable&&this.zecRecipientsList.removeClass("ui-znc-collapse"),this.selectOption.removeClass("ui-znc-collapse"),this.zecRecipientsList.addClass("ui-znc-collapse-combo")):(this._expandCollapseEnable&&this.zecRecipientsList.addClass("ui-znc-collapse"),this.zecRecipientsList.removeClass("ui-znc-collapse-combo")),this._resizeTextArea()},open:function(){this._getSharedUserList(),this.znotifyCollaborator.zdialog("open"),this.refresh(),this._triggerEvent(this._EVENTS.ONOPEN,this)},_close:function(){NotifyCollaborator.isMinimized=!1,this.znotifyCollaborator.dialog("destroy").remove(),this._triggerEvent(this._EVENTS.ONCLOSE)},close:function(){this.znotifyCollaborator.dialog("close")},_placeHolder:function(input,text){$(input).on("focus.placeholder",function(){$(text).hide()}).on("focusout.placeholder",function(){0!==$(this).val().length?$(text).hide():$(text).show()})},_showError:function(msg){msg=""===msg||void 0===msg?this._getString("unknownerror.label"):msg;var baseObj=this,errorOptions={onOpen:function(){baseObj.zecContainer.height(""),baseObj.zecContainer.height(baseObj.zecContainer.innerHeight()-$("#ui-fc-server-error").outerHeight(!0)),baseObj._resizeTextArea()},beforeClose:function(){baseObj.close()}};FCUtil.showError(msg,this.znotifyCollaborator,"#ui-znc-container",errorOptions)},maximize:function(){this.znotifyCollaborator.zdialog("maximize")},_getString:function(key,module,stringArray){return FCUtil.getI18NString(module?module:"znotifycollaborator",key,stringArray,this.keys)},_triggerEvent:function(event,_ui){return $("body").trigger(event,_ui)},keys:{"sendmeacopy.label":"Send me a copy","send.label":"Send","sending.label":"Sending...","title.label":"Notify Collaborator","message.label":"Message","subject.label":"Subject","recipients.label":"To","allcollaborators.label":"All","owneronly.label":"Owner Only","ownerandcoowner.label":"Owner & Co-Owners","selectedrecipients.label":"Specific People...","sendmailwithoutsubject.label":"Send mail without a subject?","emptydatawarning.label":"Are you sure you want to notify without a subject or text in the body?","unknownerror.label":"Sorry! We are unable to get the collaborators of this document due to an unknown error. Please try to notify them after some time.","mail_fail_error.label":"Sorry! We are unable to send the notification due to an unknown error. Please try again or later.","sendmailsuccessfully.label":"Notify mail has been send successfully"}};return{open:function(fileObj){NotifyCollaborator.isMinimized?(NotifyCollaborator.isMinimized=!1,znotifycollaborator.maximize()):znotifycollaborator._create(fileObj)},close:function(){znotifycollaborator.close()}}}(window.jQuery),ZFontsUtil=function($){var fontPath=location.protocol+"//webfonts.zohostatic.com/",fontUtil={_createFontFace:function(fontFamily,fontWeight,fontStyle,fontPath){return"@font-face{font-family:'"+fontFamily+"';font-weight:"+fontWeight+";font-style:"+fontStyle+"; src: url('"+fontPath+"/font.eot');src: local('"+fontFamily+"'), url('"+fontPath+"/font.eot?#iefix') format('eot'), url('"+fontPath+"/font.woff2') format('woff2'), url('"+fontPath+"/font.woff') format('woff');}"},_getFontDetailsWithDefaultVariants:function(fontArray){for(var fontFamily,currIndex,currVariant,currWeight,defaultVariants=["400","400i","700","700i"],returnArray=[],fontObj={},fontsString="",i=0;i<fontArray.length;i++)for(var count=0;count<FCWebFonts.length;count++)if(FCWebFonts[count].family.toLowerCase()===fontArray[i].toLowerCase()){fontFamily=FCWebFonts[count].family,fontObj={fontName:fontFamily,fontCategory:FCWebFonts[count].type,languages:FCWebFonts[count].languages?FCWebFonts[count].languages:"English"};for(var x=0;x<FCWebFonts[count].variants.length;x++)if(currIndex=FCWebFonts[count].variants[x],currWeight=currIndex.weight,currVariant=currIndex.variant,defaultVariants.indexOf(currWeight)>-1){var fontStyle="normal";currWeight.indexOf("i")>-1&&(fontStyle="italic");var fontWeight=parseInt(currWeight);fontsString+=this._createFontFace(fontFamily,fontWeight,fontStyle,fontPath+currVariant)}fontObj.fontFace=fontsString,returnArray.push(fontObj)}return returnArray},_getString:function(key,module){return $.i18n(module?module:"zfontlibrary",key)}};return{getFontInfo:function(enteredFont){for(var count=0;count<FCWebFonts.length;count++)if(FCWebFonts[count].family.toLowerCase()===enteredFont.toLowerCase())return FCWebFonts[count]},getFontURL:function(fontName,woffType){for(var count=0;count<FCWebFonts.length;count++)if(FCWebFonts[count].family.toLowerCase()===fontName.toLowerCase())return fontPath+FCWebFonts[count].variants[0].variant+"/font."+woffType},getFontDetailsWithDefaultVariants:function(fontArray){return fontUtil._getFontDetailsWithDefaultVariants(fontArray)},fontVariants:function(){return{100:fontUtil._getString("thin.label"),"100i":fontUtil._getString("thinitalic.label"),200:fontUtil._getString("ultralight.label"),"200i":fontUtil._getString("ultralightitalic.label"),300:fontUtil._getString("light.label"),"300i":fontUtil._getString("lightitalic.label"),400:fontUtil._getString("normal.label"),"400i":fontUtil._getString("italic.label"),500:fontUtil._getString("medium.label"),"500i":fontUtil._getString("mediumitalic.label"),600:fontUtil._getString("semibold.label"),"600i":fontUtil._getString("semibolditalic.label"),700:fontUtil._getString("bold.label"),"700i":fontUtil._getString("bolditalic.label"),800:fontUtil._getString("extrabold.label"),"800i":fontUtil._getString("extrabolditalic.label"),900:fontUtil._getString("black.label"),"900i":fontUtil._getString("blackitalic.label")}}}}(window.jQuery),FCWebFonts=[{family:"ABeeZee",variants:[{variant:"abeezeeregular",weight:"400"},{variant:"abeezeeitalic",weight:"400i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Abel",variants:[{variant:"abelregular",weight:"400"}],type:"sansserif",languages:""},{family:"Abril Fatface",variants:[{variant:"abrilfatfaceregular",weight:"400"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Aclonica",variants:[{variant:"aclonicaregular",weight:"400"}],type:"sansserif",languages:""},{family:"Adamina",variants:[{variant:"adaminaregular",weight:"400"}],type:"serif",languages:""},{family:"Aguafina Script",variants:[{variant:"aguafinascriptregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Alegreya",previewLabel:"Alegreya",variants:[{variant:"alegreyaregular",weight:"400"},{variant:"alegreyabold",weight:"700"},{variant:"alegreyablack",weight:"900"},{variant:"alegreyaitalic",weight:"400i"},{variant:"alegreyabolditalic",weight:"700i"},{variant:"alegreyablackitalic",weight:"900i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Aleo",previewLabel:"Aleo",variants:[{variant:"aleolight",weight:"300"},{variant:"aleobold",weight:"700"},{variant:"aleoregular",weight:"400"},{variant:"aleobolditalic",weight:"700i"},{variant:"aleoitalic",weight:"400i"},{variant:"aleolightitalic",weight:"300i"}],type:"serif",languages:""},{family:"Alice",variants:[{variant:"aliceregular",weight:"400"}],type:"serif",languages:""},{family:"Alike Angular",variants:[{variant:"alikeangularregular",weight:"400"}],type:"serif",languages:""},{family:"Allan",variants:[{variant:"allanregular",weight:"400"},{variant:"allanbold",weight:"700"}],type:"decorative",languages:""},{family:"Allerta",variants:[{variant:"allertaregular",weight:"400"}],type:"sansserif",languages:""},{family:"Allerta Stencil",variants:[{variant:"allertastencilregular",weight:"400"}],type:"sansserif",languages:""},{family:"Allura",variants:[{variant:"alluraregular",weight:"400"}],type:"calligraphy",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Amaranth",variants:[{variant:"amaranth",weight:"400"},{variant:"amaranthbold",weight:"700"},{variant:"amaranthitalic",weight:"400i"},{variant:"amaranthbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Anonymous Pro",variants:[{variant:"anonymouspro",weight:"400"},{variant:"anonymousprobold",weight:"700"},{variant:"anonymousprobolditalic",weight:"700i"},{variant:"anonymousproitalic",weight:"400i"}],type:"fixedwidth",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Antic",variants:[{variant:"anticregular",weight:"400"}],type:"sansserif",languages:""},{family:"Antic Didone",variants:[{variant:"anticdidoneregular",weight:"400"}],type:"serif",languages:""},{family:"Antic Slab",variants:[{variant:"anticslabregular",weight:"400"}],type:"serif",languages:""},{family:"Anton",variants:[{variant:"anton",weight:"400"}],type:"sansserif",languages:""},{family:"Arapey",variants:[{variant:"arapeyregular",weight:"400"},{variant:"arapeyitalic",weight:"400i"}],type:"serif",languages:""},{family:"Arbutus Slab",variants:[{variant:"arbutusslabregular",weight:"400"}],type:"serif",languages:""},{family:"Architects Daughter",variants:[{variant:"architectsdaughter",weight:"400"}],type:"handwritten",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Breton, Catalan, Chamorro, Chichewa_nyanja, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Archivo Black",variants:[{variant:"archivoblackregular",weight:"400"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Archivo Narrow",variants:[{variant:"archivonarrowregular",weight:"400"},{variant:"archivonarrowbold",weight:"700"},{variant:"archivonarrowbolditalic",weight:"700i"},{variant:"archivonarrowitalic",weight:"400i"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Arimo",variants:[{variant:"arimo",weight:"400"},{variant:"arimobold",weight:"700"},{variant:"arimoitalic",weight:"400i"},{variant:"arimobolditalic",weight:"700i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Artifika",variants:[{variant:"artifikamedium",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Arvo",variants:[{variant:"arvo",weight:"400"},{variant:"arvobold",weight:"700"},{variant:"arvoitalic",weight:"400i"},{variant:"arvobolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Astloch",variants:[{variant:"astloch",weight:"400"},{variant:"astlochbold",weight:"700"}],type:"decorative",languages:""},{family:"Asul",variants:[{variant:"asulregular",weight:"400"},{variant:"asulbold",weight:"700"}],type:"sansserif",languages:""},{family:"Averia Sans Libre",variants:[{variant:"averiasanslibrelight",weight:"300"},{variant:"averiasanslibreregular",weight:"400"},{variant:"averiasanslibrebold",weight:"700"},{variant:"averiasanslibrelightitalic",weight:"300i"},{variant:"averiasanslibreitalic",weight:"400i"},{variant:"averiasanslibrebolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Averia Serif Libre",variants:[{variant:"averiaseriflibrelight",weight:"300"},{variant:"averiaseriflibreregular",weight:"400"},{variant:"averiaseriflibrebold",weight:"700"},{variant:"averiaseriflibrelightitalic",weight:"300i"},{variant:"averiaseriflibreitalic",weight:"400i"},{variant:"averiaseriflibrebolditalic",weight:"700i"}],type:"serif",languages:""},{family:"Bad Script",variants:[{variant:"badscriptregular",weight:"400"}],type:"decorative",languages:""},{family:"Bangers",variants:[{variant:"bangersregular",weight:"400"}],type:"decorative",languages:""},{family:"Basic",variants:[{variant:"basic",weight:"400"}],type:"sansserif",languages:""},{family:"Bebas",variants:[{variant:"bebas",weight:"400"}],type:"display",languages:"English"},{family:"Belleza",variants:[{variant:"bellezaregular",weight:"400"}],type:"sansserif",languages:""},{family:"Bentham",variants:[{variant:"benthamregular",weight:"400"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Dutch, English, Esperanto, Estonian, Finnish, French, Frisian, Galician, Hungarian, Italian, Latvian, Lithuanian, Malagasy, Maltese, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Bilbo",variants:[{variant:"bilboregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Bilbo Swash Caps",variants:[{variant:"bilboswashcapsregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Boogaloo",variants:[{variant:"boogalooregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Slovenian, Spanish, Swedish, Turkish"},{family:"Bree Serif",variants:[{variant:"breeserifregular",weight:"400"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Bubbler One",variants:[{variant:"bubblerone",weight:"400"}],type:"sansserif",languages:""},{family:"Buda",previewLabel:"Buda",variants:[{variant:"buda",weight:"300"}],type:"display",languages:""},{family:"Buenard",variants:[{variant:"buenardregular",weight:"400"},{variant:"buenardbold",weight:"700"}],type:"serif",languages:""},{family:"Butterfly Kids",variants:[{variant:"butterflykids",weight:"400"}],type:"decorative",languages:""},{family:"Cabin",variants:[{variant:"cabinregular",weight:"400"},{variant:"cabinmedium",weight:"500"},{variant:"cabinsemibold",weight:"600"},{variant:"cabinbold",weight:"700"},{variant:"cabinitalic",weight:"400i"},{variant:"cabinmediumitalic",weight:"500i"},{variant:"cabinsemibolditalic",weight:"600i"},{variant:"cabinbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Cabin Condensed",variants:[{variant:"cabincondensed",weight:"400"},{variant:"cabincondensedmedium",weight:"500"},{variant:"cabincondensedsemibold",weight:"600"},{variant:"cabincondensedbold",weight:"700"}],type:"sansserif",languages:""},{family:"Cabin Sketch",variants:[{variant:"cabinsketchregular",weight:"400"},{variant:"cabinsketchbold",weight:"700"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Calligraffitti",variants:[{variant:"calligraffittiregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Cantarell",variants:[{variant:"cantarellregular",weight:"400"},{variant:"cantarellbold",weight:"700"},{variant:"cantarelloblique",weight:"400i"},{variant:"cantarellboldoblique",weight:"700i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Cantata One",variants:[{variant:"cantataoneregular",weight:"400"}],type:"serif",languages:""},{family:"Cardo",variants:[{variant:"cardoregular",weight:"400"},{variant:"cardobold",weight:"700"},{variant:"cardoitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Breton, Catalan, Chamorro, Chichewa_nyanja, Czech, Danish, Dutch, English, Esperanto, Estonian, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Carrois Gothic SC",variants:[{variant:"carroisgothicscregular",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Caudex",variants:[{variant:"caudex",weight:"400"},{variant:"caudexbold",weight:"700"},{variant:"caudexitalic",weight:"400i"},{variant:"caudexbolditalic",weight:"700i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Chelsea Market",variants:[{variant:"chelseamarketregular",weight:"400"}],type:"decorative",languages:""},{family:"Chivo",variants:[{variant:"chivoregular",weight:"400"},{variant:"chivoblack",weight:"900"},{variant:"chivoitalic",weight:"400i"},{variant:"chivoblackitalic",weight:"900i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"ChunkFive",variants:[{variant:"chunkfive",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, English, Frisian, Galician, Italian, Malagasy"},{family:"Codystar",variants:[{variant:"codystarlight",weight:"300"},{variant:"codystar",weight:"400"}],type:"decorative",languages:""},{family:"Colaborate",variants:[{variant:"colaboratethin",weight:"100"},{variant:"colaboratelight",weight:"300"},{variant:"colaborateregular",weight:"400"},{variant:"colaboratemedium",weight:"500"},{variant:"colaboratebold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Comfortaa",variants:[{variant:"comfortaalight",weight:"300"},{variant:"comfortaaregular",weight:"400"},{variant:"comfortaabold",weight:"700"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Coming Soon",variants:[{variant:"comingsoon",weight:"400"}],type:"handwritten",languages:""},{family:"Convergence",variants:[{variant:"convergenceregular",weight:"400"}],type:"sansserif",languages:""},{family:"Cookie",variants:[{variant:"cookieregular",weight:"400"}],type:"decorative",languages:""},{family:"Corben",variants:[{variant:"corbenregular",weight:"400"},{variant:"corben",weight:"700"}],type:"decorative",languages:""},{family:"Courgette",variants:[{variant:"courgetteregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Cousine",variants:[{variant:"cousine",weight:"400"},{variant:"cousinebold",weight:"700"},{variant:"cousineitalic",weight:"400i"},{variant:"cousinebolditalic",weight:"700i"}],type:"fixedwidth",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Coustard",variants:[{variant:"coustard",weight:"400"},{variant:"coustardblack",weight:"900"}],type:"serif",languages:""},{family:"Crafty Girls",variants:[{variant:"craftygirls",weight:"400"}],type:"calligraphy",languages:""},{family:"Crete Round",variants:[{variant:"creteroundregular",weight:"400"},{variant:"creterounditalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Crimson Text",variants:[{variant:"crimsontextroman",weight:"400"},{variant:"crimsontextsemibold",weight:"600"},{variant:"crimsontextbold",weight:"700"},{variant:"crimsontextsemibolditalic",weight:"600i"},{variant:"crimsontextbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Cutive",variants:[{variant:"cutiveregular",weight:"400"}],type:"serif",languages:"",preview:!1},{family:"Dancing Script",variants:[{variant:"dancingscript",weight:"400"},{variant:"dancingscriptbold",weight:"700"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Days One",variants:[{variant:"daysoneregular",weight:"400"}],type:"display",languages:"Cyrillic, English"},{family:"Delius",variants:[{variant:"deliusregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Della Respira",variants:[{variant:"dellarespiraregular",weight:"400"}],type:"serif",languages:""},{family:"Didact Gothic",variants:[{variant:"didactgothic",weight:"400"}],type:"sansserif",languages:"Baltic, Basic Cyrillic, Basic Greek, Basic Latin, Catalan, Central European, Euro, Igbo Onwu, Polytonic Greek, Romanian, Turkish, Western European,"},{family:"Diplomata",variants:[{variant:"diplomataregular",weight:"400"}],type:"decorative",languages:""},{family:"Diplomata SC",variants:[{variant:"diplomatascregular",weight:"400"}],type:"decorative",languages:""},{family:"Doppio One",variants:[{variant:"doppiooneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Dosis",variants:[{variant:"dosisextralight",weight:"200"},{variant:"dosislight",weight:"300"},{variant:"dosisregular",weight:"400"},{variant:"dosismedium",weight:"500"},{variant:"dosissemibold",weight:"600"},{variant:"dosisbold",weight:"700"},{variant:"dosisextrabold",weight:"800"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Droid Sans",variants:[{variant:"droidsans",weight:"400"},{variant:"droidsansbold",weight:"700"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Droid Serif",variants:[{variant:"droidserif",weight:"400"},{variant:"droidserifbold",weight:"700"},{variant:"droidserifitalic",weight:"400i"},{variant:"droidserifbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"EB Garamond",variants:[{variant:"ebgaramond",weight:"400"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Eagle Lake",variants:[{variant:"eaglelakeregular",weight:"400"}],type:"decorative",languages:""},{family:"Economica",variants:[{variant:"economicaregular",weight:"400"},{variant:"economicabold",weight:"700"},{variant:"economicaitalic",weight:"400i"},{variant:"economicabolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Emblema One",variants:[{variant:"emblemaoneregular",weight:"400"}],type:"decorative",languages:""},{family:"Engagement",variants:[{variant:"engagementregular",weight:"400"}],type:"decorative",languages:""},{family:"Enriqueta",variants:[{variant:"enriquetaregular",weight:"400"},{variant:"enriquetabold",weight:"700"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Esteban",variants:[{variant:"esteban",weight:"400"}],type:"serif",languages:""},{family:"Euphoria Script",variants:[{variant:"euphoriascriptregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Ewert",variants:[{variant:"ewertregular",weight:"400"}],type:"decorative",languages:""},{family:"Expletus Sans",variants:[{variant:"expletussans",weight:"400"},{variant:"expletussansmedium",weight:"500"},{variant:"expletussanssemibold",weight:"600"},{variant:"expletussansbold",weight:"700"},{variant:"expletussansitalic",weight:"400i"},{variant:"expletussansmediumitalic",weight:"500i"},{variant:"expletussanssemibolditalic",weight:"600i"},{variant:"expletussansbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Fanwood Text",variants:[{variant:"fanwoodtextregular",weight:"400"},{variant:"fanwoodtextitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Fascinate Inline",variants:[{variant:"fascinateinlineregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Federo",variants:[{variant:"federoregular",weight:"400"}],type:"sansserif",languages:""},{family:"Felipa",variants:[{variant:"feliparegular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Fenix",variants:[{variant:"fenix",weight:"400"}],type:"serif",languages:""},{family:"Finger Paint",variants:[{variant:"fingerpaintregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Fira Mono",previewLabel:"Fira Mono",variants:[{variant:"firamono",weight:"400"},{variant:"firamonobold",weight:"700"}],type:"fixedwidth",languages:""},{family:"Fira Sans",previewLabel:"Fira Sans",variants:[{variant:"firasanslight",weight:"300"},{variant:"firasans",weight:"400"},{variant:"firasansmedium",weight:"500"},{variant:"firasansbold",weight:"700"},{variant:"firasanslightitalic",weight:"300i"},{variant:"firasansitalic",weight:"400i"},{variant:"firasansmediumitalic",weight:"500i"},{variant:"firasansbolditalic",weight:"700i"}],type:"fixedwidth",languages:""},{family:"Fjord One",variants:[{variant:"fjordone",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Spanish, Swedish"},{family:"Flamenco",variants:[{variant:"flamencolight",weight:"300"},{variant:"flamencoregular",weight:"400"}],type:"decorative",languages:""},{family:"Fontdiner Swanky",variants:[{variant:"fontdinerswanky",weight:"400"}],type:"comic",languages:""},{family:"Forum",variants:[{variant:"forum",weight:"400"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Francois One",previewLabel:"Francois One",variants:[{variant:"francoisoneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Fredericka the Great",variants:[{variant:"frederickathegreatregular",weight:"400"}],type:"decorative",languages:""},{family:"Fugaz One",variants:[{variant:"fugazoneregular",weight:"400"}],type:"decorative",languages:""},{family:"Gabriela",previewLabel:"Gabriela",variants:[{variant:"gabrielaregular",weight:"400"}],type:"serif",languages:""},{family:"Gentium Basic",variants:[{variant:"gentiumbasic",weight:"400"},{variant:"gentiumbasicbold",weight:"700"},{variant:"gentiumbasicitalic",weight:"400i"},{variant:"gentiumbasicbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Serbian, Slovenian, Spanish, Swedish, Welsh"},{family:"Gentium Book Basic",variants:[{variant:"gentiumbookbasic",weight:"400"},{variant:"gentiumbookbasicbold",weight:"700"},{variant:"gentiumbookbasicitalic",weight:"400i"},{variant:"gentiumbookbasicbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Serbian, Slovenian, Spanish, Swedish, Welsh"},{family:"Glass Antiqua",variants:[{variant:"glassantiquaregular",weight:"400"}],type:"decorative",languages:""},{family:"Glegoo",variants:[{variant:"glegooregular",weight:"400"}],type:"serif",languages:""},{family:"Gloria Hallelujah",variants:[{variant:"gloriahallelujah",weight:"400"}],type:"calligraphy",languages:""},{family:"Gorditas",variants:[{variant:"gorditasregular",weight:"400"},{variant:"gorditasbold",weight:"700"}],type:"decorative",languages:""},{family:"Goudy Bookletter 1911",variants:[{variant:"goudybookletter1911",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Chichewa_nyanja, Czech, Danish, Dutch, English, Esperanto, Estonian, Finnish, French, Frisian, Galician, German, Italian, Malagasy, Norwegian, Portuguese, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Great Vibes",variants:[{variant:"greatvibesregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Griffy",variants:[{variant:"griffyregular",weight:"400"}],type:"decorative",languages:""},{family:"Gruppo",variants:[{variant:"gruppo",weight:"400"}],type:"decorative",languages:""},{family:"Habibi",variants:[{variant:"habibiregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Hammersmith One",variants:[{variant:"hammersmithoneregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Handlee",variants:[{variant:"handleeregular",weight:"400"}],type:"decorative",languages:""},{family:"Headland One",variants:[{variant:"headlandoneregular",weight:"400"}],type:"serif",languages:""},{family:"Henny Penny",variants:[{variant:"hennypennyregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Holtwood One SC",variants:[{variant:"holtwoodonesc",weight:"400"}],type:"serif",languages:""},{family:"Homemade Apple",variants:[{variant:"homemadeapple",weight:"400"}],type:"calligraphy",languages:""},{family:"IM FELL English",variants:[{variant:"imfellenglishroman",weight:"400"},{variant:"imfellenglishitalic",weight:"400i"}],type:"display",languages:"Albanian, Basque, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"IM FELL English SC",variants:[{variant:"imfellenglishsc",weight:"400"}],type:"serif",languages:""},{family:"IM FELL French Canon",variants:[{variant:"imfellfrenchcanonroman",weight:"400"},{variant:"imfellfrenchcanonitalic",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Iceberg",variants:[{variant:"icebergregular",weight:"400"}],type:"decorative",languages:""},{family:"Iceland",variants:[{variant:"icelandregular",weight:"400"}],type:"decorative",languages:""},{family:"Imprima",variants:[{variant:"imprimaregular",weight:"400"}],type:"sansserif",languages:""},{family:"Inconsolata",variants:[{variant:"inconsolataregular",weight:"400"},{variant:"inconsolatabold",weight:"700"}],type:"fixedwidth",languages:"Albanian, Basque, Bosnian, Breton, Chamorro, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Inder",variants:[{variant:"inderregular",weight:"400"}],type:"sansserif",languages:""},{family:"Inika",variants:[{variant:"inika",weight:"400"},{variant:"inikabold",weight:"700"}],type:"serif",languages:""},{family:"Istok Web",variants:[{variant:"istokwebregular",weight:"400"},{variant:"istokwebbold",weight:"700"},{variant:"istokwebitalic",weight:"400i"},{variant:"istokwebbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Italiana",variants:[{variant:"italianaregular",weight:"400"}],type:"serif",languages:""},{family:"Italianno",variants:[{variant:"italiannoregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Jacques Francois",variants:[{variant:"jacquesfrancoisregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Jacques Francois Shadow",variants:[{variant:"jacquesfrancoisshadowregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Jockey One",variants:[{variant:"jockeyoneregular",weight:"400"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Jolly Lodger",variants:[{variant:"jollylodger",weight:"400"}],type:"decorative",languages:""},{family:"Josefin Sans",variants:[{variant:"josefinsansthin",weight:"100"},{variant:"josefinsanslight",weight:"300"},{variant:"josefinsans",weight:"400"},{variant:"josefinsanssemibold",weight:"600"},{variant:"josefinsansbold",weight:"700"},{variant:"josefinsansthinitalic",weight:"100i"},{variant:"josefinsanslightitalic",weight:"300i"},{variant:"josefinsansitalic",weight:"400i"},{variant:"josefinsanssemibolditalic",weight:"600i"},{variant:"josefinsansbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Josefin Slab",variants:[{variant:"josefinslabthin",weight:"100"},{variant:"josefinslablight",weight:"300"},{variant:"josefinslab",weight:"400"},{variant:"josefinslabsemibold",weight:"600"},{variant:"josefinslabbold",weight:"700"},{variant:"josefinslabthinitalic",weight:"100i"},{variant:"josefinslablightitalic",weight:"300i"},{variant:"josefinslabitalic",weight:"400i"},{variant:"josefinslabbolditalic",weight:"700i"},{variant:"josefinslabsemibolditalic",weight:"600i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Judson",variants:[{variant:"judsonregular",weight:"400"},{variant:"judsonbold",weight:"700"},{variant:"judsonitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Junge",variants:[{variant:"jungeregular",weight:"400"}],type:"serif",languages:""},{family:"Jura",variants:[{variant:"juralight",weight:"300"},{variant:"juraregular",weight:"400"},{variant:"juramedium",weight:"500"},{variant:"jurademibold",weight:"600"}],type:"sansserif",languages:""},{family:"Just Another Hand",variants:[{variant:"justanotherhandregular",weight:"400"}],type:"handwritten",languages:""},{family:"Kameron",variants:[{variant:"kameron",weight:"400"},{variant:"kameronbold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Karla",variants:[{variant:"karlaregular",weight:"400"},{variant:"karlabold",weight:"700"},{variant:"karlaitalic",weight:"400i"},{variant:"karlabolditalic",weight:"700i"}],type:"sansserif",languages:"Breton, Chamorro, English, Frisian, Galician, Italian, Malagasy"},{family:"Kaushan Script",variants:[{variant:"kaushanscriptregular",weight:"400"}],type:"calligraphy",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Kelly Slab",variants:[{variant:"kellyslabregular",weight:"400"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Knewave",variants:[{variant:"knewaveregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Kreon",variants:[{variant:"kreonlight",weight:"300"},{variant:"kreonregular",weight:"400"},{variant:"kreonbold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Krona One",variants:[{variant:"kronaoneregular",weight:"400"}],type:"sansserif",languages:""},{family:"La Belle Aurore",variants:[{variant:"labelleaurore",weight:"400"}],type:"calligraphy",languages:""},{family:"Lancelot",variants:[{variant:"lancelot",weight:"400"}],type:"decorative",languages:""},{family:"Latin Modern Roman",variants:[{variant:"lmroman10regular",weight:"400"},{variant:"lmromandemi10regular",weight:"600"},{variant:"lmroman10bold",weight:"700"},{variant:"lmroman10italic",weight:"400i"},{variant:"lmromandemi10oblique",weight:"600i"},{variant:"lmroman10bolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Latin Modern Roman Caps",variants:[{variant:"lmromancaps10regular",weight:"400"},{variant:"lmromancaps10oblique",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Latin Modern Roman Dunhill",variants:[{variant:"lmromandunh10regular",weight:"400"},{variant:"lmromandunh10oblique",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Latin Modern Roman Slanted",variants:[{variant:"lmromanslant10regular",weight:"400"},{variant:"lmromanslant10bold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Lato",variants:[{variant:"latohairline",weight:"100"},{variant:"latolight",weight:"300"},{variant:"latoregular",weight:"400"},{variant:"latobold",weight:"700"},{variant:"latoblack",weight:"900"},{variant:"latohairlineitalic",weight:"100i"},{variant:"latolightitalic",weight:"300i"},{variant:"latoitalic",weight:"400i"},{variant:"latobolditalic",weight:"700i"},{variant:"latoblackitalic",weight:"900i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Spanish, Swedish"},{family:"League Gothic",variants:[{variant:"leaguegothic",weight:"400"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"League Script",variants:[{variant:"leaguescript",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Finnish, French, Frisian, Galician, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Leckerli One",variants:[{variant:"leckerlioneregular",weight:"400"}],type:"handwritten",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Ledger",variants:[{variant:"ledgerregular",weight:"400"}],type:"serif",languages:""},{family:"Lekton",variants:[{variant:"lektonregular",weight:"400"},{variant:"lektonbold",weight:"700"},{variant:"lektonitalic",weight:"400i"}],type:"fixedwidth",languages:"Albanian, Basque, Breton, Chamorro, English, Finnish, French, Frisian, Galician, Italian, Malagasy, Portuguese, Spanish, Swedish"},{family:"Lemon",variants:[{variant:"lemonregular",weight:"400"}],type:"decorative",languages:""},{family:"Linden Hill",variants:[{variant:"lindenhillregular",weight:"400"},{variant:"lindenhillitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Lobster",variants:[{variant:"lobster",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Lobster Two",variants:[{variant:"lobstertwo",weight:"400"},{variant:"lobstertwobold",weight:"700"},{variant:"lobstertwoitalic",weight:"400i"},{variant:"lobstertwobolditalic",weight:"700i"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Slovenian, Spanish, Swedish"},{family:"Lohit Assamese",previewLabel:" ",variants:[{variant:"lohitassamese",weight:"400"}],type:"others",languages:""},{family:"Lohit Bengali",previewLabel:" ",variants:[{variant:"lohitbengali",weight:"400"}],type:"others",languages:""},{family:"Lohit Devanagari",previewLabel:" ",variants:[{variant:"lohitdevanagari",weight:"400"}],type:"others",languages:"",preview:!1},{family:"Lohit Gujarati",previewLabel:" ",variants:[{variant:"lohitgujarati",weight:"400"}],type:"others",languages:""},{family:"Lohit Kannada",previewLabel:" ",variants:[{variant:"lohitkannada",weight:"400"}],type:"others",languages:"",preview:!1},{family:"Lohit Malayalam",previewLabel:" ",variants:[{variant:"lohitmalayalam",weight:"400"}],type:"others",languages:""},{family:"Lohit Marathi",previewLabel:" ",variants:[{variant:"lohitmarathi",weight:"400"}],type:"others",languages:""},{family:"Lohit Nepali",previewLabel:" ",variants:[{variant:"lohitnepali",weight:"400"}],type:"others",languages:""},{family:"Lohit Odia",previewLabel:" ",variants:[{variant:"lohitodia",weight:"400"}],type:"others",languages:""},{family:"Lohit Punjabi",previewLabel:" ",variants:[{variant:"lohitpunjabi",weight:"400"}],type:"others",languages:""},{family:"Lohit Tamil",previewLabel:" ",variants:[{variant:"lohittamil",weight:"400"}],type:"others",languages:""},{family:"Lohit Tamil Classical",previewLabel:"  ()",variants:[{variant:"lohittamilclassical",weight:"400"}],type:"others",languages:""},{family:"Lohit Telugu",previewLabel:" ",variants:[{variant:"lohittelugu",weight:"400"}],type:"others",languages:"",preview:!1},{family:"Londrina Shadow",variants:[{variant:"londrinashadowregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Lora",variants:[{variant:"lora",weight:"400"},{variant:"lorabold",weight:"700"},{variant:"loraitalic",weight:"400i"},{variant:"lorabolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Love Ya Like A Sister",variants:[{variant:"loveyalikeasisterregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Loved by the King",variants:[{variant:"lovedbytheking",weight:"400"}],type:"decorative",languages:""},{family:"Luckiest Guy",variants:[{variant:"luckiestguyregular",weight:"400"}],type:"comic",languages:""},{family:"Lusitana",variants:[{variant:"lusitana",weight:"400"},{variant:"lusitanabold",weight:"700"}],type:"serif",languages:""},{family:"Lustria",variants:[{variant:"lustriaregular",weight:"400"}],type:"serif",languages:""},{family:"Macondo",variants:[{variant:"macondoregular",weight:"400"}],type:"decorative",languages:""},{family:"Macondo Swash Caps",variants:[{variant:"macondoswashcapsregular",weight:"400"}],type:"decorative",languages:""},{family:"Magra",variants:[{variant:"magra",weight:"400"},{variant:"magrabold",weight:"700"}],type:"sansserif",languages:""},{family:"Marcellus",variants:[{variant:"marcellusregular",weight:"400"}],type:"serif",languages:""},{family:"Marcellus SC",variants:[{variant:"marcellusscregular",weight:"400"}],type:"serif",languages:""},{family:"Marck Script",variants:[{variant:"marckscriptregular",weight:"400"}],type:"decorative",languages:""},{family:"Marvel",variants:[{variant:"marvelregular",weight:"400"},{variant:"marvelbold",weight:"700"},{variant:"marvelitalic",weight:"400i"},{variant:"marvelbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Dutch, English, Estonian, French, Frisian, Galician, German, Italian, Malagasy, Portuguese, Spanish"},{family:"Mate",variants:[{variant:"materegular",weight:"400"},{variant:"mateitalic",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Mate SC",variants:[{variant:"matescregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Meddon",variants:[{variant:"meddon",weight:"400"}],type:"decorative",languages:""},{family:"MedievalSharp",variants:[{variant:"medievalsharp",weight:"400"}],type:"sansserif",languages:"Afrikaans, Baltic, Basic Latin, Catalan, Central European, Dutch, Euro, Romanian, Turkish, Western European"},{family:"Medula One",variants:[{variant:"medulaoneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Merienda One",variants:[{variant:"meriendaoneregular",weight:"400"}],type:"decorative",languages:""},{family:"Merriweather",variants:[{variant:"merriweatherlight",weight:"300"},{variant:"merriweather",weight:"400"},{variant:"merriweatherbold",weight:"700"},{variant:"merriweatherheavy",weight:"900"}],type:"serif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Metamorphous",variants:[{variant:"metamorphous",weight:"400"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Metrophobic",variants:[{variant:"metrophobic",weight:"400"}],type:"sansserif",languages:""},{family:"Michroma",variants:[{variant:"michroma",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Chichewa_nyanja, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Lithuanian, Malagasy, Norwegian, Portuguese, Slovenian, Spanish, Swedish, Turkish"},{family:"Miltonian",variants:[{variant:"miltonianregular",weight:"400"}],type:"decorative",languages:""},{family:"Modern Antiqua",variants:[{variant:"modernantiquaregular",weight:"400"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Molengo",variants:[{variant:"molengoregular",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Chichewa_nyanja, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish",preview:!1},{family:"Molle",variants:[{variant:"molleregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Monoton",variants:[{variant:"monotonregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovenian, Spanish, Swedish, Turkish"},{family:"Monsieur La Doulaise",variants:[{variant:"monsieurladoulaiseregular",weight:"400"}],type:"decorative",languages:""},{family:"Montaga",variants:[{variant:"montagaregular",weight:"400"}],type:"serif",languages:""},{family:"Montez",variants:[{variant:"montezregular",weight:"400"}],type:"handwritten",languages:""},{family:"Montserrat Alternates",variants:[{variant:"montserratalternatesregular",weight:"400"},{variant:"montserratalternatesbold",weight:"700"}],type:"sansserif",languages:""},{family:"Montserrat Subrayada",variants:[{variant:"montserratsubrayadaregular",weight:"400"},{variant:"montserratsubrayadabold",weight:"700"}],type:"sansserif",languages:""},{family:"Mountains of Christmas",variants:[{variant:"mountainsofchristmasregular",weight:"400"},{variant:"mountainsofchristmasbold",weight:"700"}],type:"handwritten",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Mr De Haviland",variants:[{variant:"mrdehavilandregular",weight:"400"}],type:"decorative",languages:""},{family:"Muli",variants:[{variant:"mulilight",weight:"300"},{variant:"muli",weight:"400"},{variant:"mulilightitalic",weight:"300i"},{variant:"muliitalic",weight:"400i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Mystery Quest",variants:[{variant:"mysteryquest",weight:"400"}],type:"decorative",languages:""},{family:"News Cycle",previewLabel:"News Cycle",variants:[{variant:"newscycle",weight:"700"}],type:"sansserif",languages:""},{family:"Niconne",variants:[{variant:"niconneregular",weight:"400"}],type:"decorative",languages:""},{family:"Nixie One",variants:[{variant:"nixieoneregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Nobile",variants:[{variant:"nobileregular",weight:"400"},{variant:"nobilemedium",weight:"500"},{variant:"nobilebold",weight:"700"},{variant:"nobileitalic",weight:"400i"},{variant:"nobilemediumitalic",weight:"500i"},{variant:"nobilebolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Cyrillic, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Norican",variants:[{variant:"noricanregular",weight:"400"}],type:"decorative",languages:""},{family:"Nosifer",variants:[{variant:"nosiferregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Belarusian_lacinka, Breton, Catalan, Chamorro, Chichewa_nyanja, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Noticia Text",variants:[{variant:"noticiatextregular",weight:"400"},{variant:"noticiatextbold",weight:"700"},{variant:"noticiatextitalic",weight:"400i"},{variant:"noticiatextbolditalic",weight:"700i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Noto Sans",previewLabel:"Noto Sans",variants:[{variant:"notosans",weight:"400"},{variant:"notosansbold",weight:"700"},{variant:"notosansitalic",weight:"400i"},{variant:"notosansbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Noto Serif",previewLabel:"Noto Serif",variants:[{variant:"notoserif",weight:"400"},{variant:"notoserifbold",weight:"700"},{variant:"notoserifitalic",weight:"400i"},{variant:"notoserifbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Nova Cut",variants:[{variant:"novacut",weight:"400"}],type:"display",languages:"Afrikaans, Baltic, Basic Latin, Catalan, Central European, Dutch, Euro, Romanian, Turkish, Western European,"},{family:"Nova Mono",variants:[{variant:"novamono",weight:"400"}],type:"fixedwidth",languages:""},{family:"Nova Slim",variants:[{variant:"novaslim",weight:"400"}],type:"retro",languages:""},{family:"Numans",variants:[{variant:"numansregular",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Nunito",variants:[{variant:"nunitolight",weight:"300"},{variant:"nunitoregular",weight:"400"},{variant:"nunitobold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"OSP DIN",variants:[{variant:"ospdin",weight:"400"}],type:"display",languages:"English, Italian, Malagasy"},{family:"Old Standard TT",variants:[{variant:"oldstandardttregular",weight:"400"},{variant:"oldstandardttbold",weight:"700"},{variant:"oldstandardttitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Finnish, French, Frisian, Galician, German, Hungarian, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Oleo Script",variants:[{variant:"oleoscriptregular",weight:"400"},{variant:"oleoscriptbold",weight:"700"}],type:"decorative",languages:""},{family:"Open Sans",variants:[{variant:"opensanslight",weight:"300"},{variant:"opensans",weight:"400"},{variant:"opensanssemibold",weight:"600"},{variant:"opensansbold",weight:"700"},{variant:"opensansextrabold",weight:"800"},{variant:"opensanslightitalic",weight:"300i"},{variant:"opensansitalic",weight:"400i"},{variant:"opensanssemibolditalic",weight:"600i"},{variant:"opensansbolditalic",weight:"700i"},{variant:"opensansextrabolditalic",weight:"800i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Open Sans Condensed",previewLabel:"Open Sans Condensed",variants:[{variant:"opensanscondensedlight",weight:"300"},{variant:"opensanscondensedbold",weight:"700"},{variant:"opensanscondensedlightitalic",weight:"300i"}],type:"sansserif",languages:""},{family:"Oranienbaum",variants:[{variant:"oranienbaumregular",weight:"400"}],type:"serif",languages:""},{family:"Oregano",variants:[{variant:"oreganoregular",weight:"400"},{variant:"oreganoitalic",weight:"400i"}],type:"decorative",languages:""},{family:"Oswald",variants:[{variant:"oswaldlight",weight:"300"},{variant:"oswaldregular",weight:"400"},{variant:"oswaldbold",weight:"700"}],type:"display",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Estonian, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Otama ep",variants:[{variant:"otamaep",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Over the Rainbow",variants:[{variant:"overtherainbow",weight:"400"}],type:"handwritten",languages:""},{family:"Overlock",variants:[{variant:"overlockregular",weight:"400"},{variant:"overlockbold",weight:"700"},{variant:"overlockblack",weight:"900"},{variant:"overlockitalic",weight:"400i"},{variant:"overlockbolditalic",weight:"700i"},{variant:"overlockblackitalic",weight:"900i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Overlock SC",variants:[{variant:"overlockscregular",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Ovo",variants:[{variant:"ovo",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Oxygen",variants:[{variant:"oxygenlight",weight:"300"},{variant:"oxygen",weight:"400"},{variant:"oxygenbold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Breton, Catalan, Chamorro, Chichewa_nyanja, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Slovak, Slovenian, Spanish, Swedish, Turkish",preview:!1},{family:"Oxygen Mono",variants:[{variant:"oxygenmonoregular",weight:"400"}],type:"fixedwidth",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Romanian, Slovenian, Spanish, Swedish"},{family:"PT Mono",variants:[{variant:"ptmonoregular",weight:"400"}],type:"fixedwidth",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"PT Sans",variants:[{variant:"ptsansregular",weight:"400"},{variant:"ptsansbold",weight:"700"},{variant:"ptsansitalic",weight:"400i"},{variant:"ptsansbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"PT Sans Caption",variants:[{variant:"ptsanscaption",weight:"400"},{variant:"ptsanscaptionbold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"PT Sans Narrow",variants:[{variant:"ptsansnarrow",weight:"400"},{variant:"ptsansnarrowbold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"PT Serif",variants:[{variant:"ptserifregular",weight:"400"},{variant:"ptserifbold",weight:"700"},{variant:"ptserifitalic",weight:"400i"},{variant:"ptserifbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"PT Serif Caption",variants:[{variant:"ptserifcaption",weight:"400"},{variant:"ptserifcaptionitalic",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Pacifico",variants:[{variant:"pacificoregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Parisienne",variants:[{variant:"parisienneregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Patrick Hand",variants:[{variant:"patrickhandregular",weight:"400"}],type:"decorative",languages:""},{family:"Patua One",variants:[{variant:"patuaoneregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Permanent Marker",variants:[{variant:"permanentmarker",weight:"400"}],type:"handwritten",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Petit Formal Script",variants:[{variant:"petitformalscriptregular",weight:"400"}],type:"decorative",languages:""},{family:"Petrona",variants:[{variant:"petronaregular",weight:"400"}],type:"serif",languages:""},{family:"Philosopher",variants:[{variant:"philosopher",weight:"400"},{variant:"philosopherbold",weight:"700"},{variant:"philosopheritalic",weight:"400i"},{variant:"philosopherbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Pinyon Script",variants:[{variant:"pinyonscript",weight:"400"}],type:"decorative",languages:"Pinyon Script"},{family:"Play",variants:[{variant:"play",weight:"400"},{variant:"playbold",weight:"700"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Playball",variants:[{variant:"playballregular",weight:"400"}],type:"decorative",languages:""},{family:"Playfair Display",variants:[{variant:"playfairdisplayregular",weight:"400"},{variant:"playfairdisplaybold",weight:"700"},{variant:"playfairdisplayblack",weight:"900"},{variant:"playfairdisplayitalic",weight:"400i"},{variant:"playfairdisplaybolditalic",weight:"700i"},{variant:"playfairdisplayblackitalic",weight:"900i"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Podkova",variants:[{variant:"podkovaregular",weight:"400"},{variant:"podkovabold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Poiret One",variants:[{variant:"poiretoneregular",weight:"400"}],type:"decorative",languages:""},{family:"Poller One",variants:[{variant:"polleroneregular",weight:"400"}],type:"decorative",languages:""},{family:"Poly",variants:[{variant:"polyregular",weight:"400"},{variant:"polyitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish"},{family:"Pompiere",variants:[{variant:"pompiereregular",weight:"400"}],type:"handwritten",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Pontano Sans",variants:[{variant:"pontanosansregular",weight:"400"}],type:"sansserif",languages:"",preview:!1},{family:"Port Lligat Slab",variants:[{variant:"portlligatslabregular",weight:"400"}],type:"serif",languages:""},{family:"Prata",variants:[{variant:"prataregular",weight:"400"}],type:"serif",languages:""},{family:"Prociono",variants:[{variant:"procionoregular",weight:"400"}],type:"serif",languages:"lbanian, Basque, Breton, Chamorro, Chichewa_nyanja, Czech, Danish, Dutch, English, Esperanto, Estonian, Finnish, French, Frisian, Galician, German, Hungarian, Italian, Malagasy, Norwegian, Portuguese, Slovak, Slovenian, Spanish, Swedish"},{family:"Prosto One",variants:[{variant:"prostooneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Puritan",variants:[{variant:"puritanregular",weight:"400"},{variant:"puritanbold",weight:"700"},{variant:"puritanitalic",weight:"400i"},{variant:"puritanbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Quando",variants:[{variant:"quandoregular",weight:"400"}],type:"serif",languages:""},{family:"Quattrocento",variants:[{variant:"quattrocento",weight:"400"},{variant:"quattrocentobold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Quattrocento Sans",variants:[{variant:"quattrocentosans",weight:"400"},{variant:"quattrocentosansbold",weight:"700"},{variant:"quattrocentosansitalic",weight:"400i"},{variant:"quattrocentosansbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Questrial",variants:[{variant:"questrialregular",weight:"400"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Quicksand",variants:[{variant:"quicksandlight",weight:"300"},{variant:"quicksandregular",weight:"400"},{variant:"quicksandbold",weight:"700"},{variant:"quicksandlightitalic",weight:"300i"},{variant:"quicksanditalic",weight:"400i"},{variant:"quicksandbolditalic",weight:"700i"}],type:"sansserif",languages:"English"},{family:"Qwigley",variants:[{variant:"qwigleyregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Racing Sans One",variants:[{variant:"racingsansoneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Raleway",variants:[{variant:"ralewaythin",weight:"100"},{variant:"ralewayextralight",weight:"200"},{variant:"ralewaylight",weight:"300"},{variant:"raleway",weight:"400"},{variant:"ralewaysemibold",weight:"600"},{variant:"ralewaymedium",weight:"500"},{variant:"ralewaybold",weight:"700"},{variant:"ralewayextrabold",weight:"800"},{variant:"ralewayheavy",weight:"900"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Raleway Dots",variants:[{variant:"ralewaydotsregular",weight:"400"}],type:"display",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Rammetto One",variants:[{variant:"rammettooneregular",weight:"400"}],type:"decorative",languages:""},{family:"Rancho",variants:[{variant:"rancho",weight:"400"}],type:"calligraphy",languages:""},{family:"Redressed",variants:[{variant:"redressed",weight:"400"}],type:"handwritten",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Reenie Beanie",variants:[{variant:"reeniebeanie",weight:"400"}],type:"handwritten",languages:""},{family:"Revalia",variants:[{variant:"revaliaregular",weight:"400"}],type:"decorative",languages:""},{family:"Righteous",variants:[{variant:"righteousregular",weight:"400"}],type:"decorative",languages:""},{family:"Roboto",variants:[{variant:"robotothin",weight:"100"},{variant:"robotolight",weight:"300"},{variant:"robotoregular",weight:"400"},{variant:"robotomedium",weight:"500"},{variant:"robotobold",weight:"700"},{variant:"robotoblack",weight:"900"},{variant:"robotothinitalic",weight:"100i"},{variant:"robotolightitalic",weight:"300i"},{variant:"robotoitalic",weight:"400i"},{variant:"robotomediumitalic",weight:"500i"},{variant:"robotobolditalic",weight:"700i"},{variant:"robotoblackitalic",weight:"900i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Roboto Condensed",previewLabel:"Roboto Condensed",variants:[{variant:"robotocondensedlight",weight:"300"},{variant:"robotocondensedregular",weight:"400"},{variant:"robotocondensedbold",weight:"700"},{variant:"robotocondensedlightitalic",weight:"300i"},{variant:"robotocondenseditalic",weight:"400i"},{variant:"robotocondensedbolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Rochester",variants:[{variant:"rochesterregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Rock Salt",variants:[{variant:"rocksalt",weight:"400"}],type:"handwritten",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Rokkitt",variants:[{variant:"rokkittlight",weight:"300"},{variant:"rokkitt",weight:"400"},{variant:"rokkittbold",weight:"700"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Romanesco",variants:[{variant:"romanescoregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Ropa Sans",variants:[{variant:"ropasansregular",weight:"400"},{variant:"ropasansitalic",weight:"400i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Rosario",variants:[{variant:"rosarioregular",weight:"400"},{variant:"rosariobold",weight:"700"},{variant:"rosariobolditalic",weight:"700i"},{variant:"rosarioitalic",weight:"400i"}],type:"sansserif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Rosarivo",variants:[{variant:"rosarivoregular",weight:"400"},{variant:"rosarivoitalic",weight:"400i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Rouge Script",variants:[{variant:"rougescriptregular",weight:"400"}],type:"decorative",languages:""},{family:"Ruda",variants:[{variant:"ruda",weight:"400"},{variant:"rudabold",weight:"700"},{variant:"rudablack",weight:"900"}],type:"sansserif",languages:""},{family:"Ruge Boogie",variants:[{variant:"rugeboogieregular",weight:"400"}],type:"decorative",languages:""},{family:"Ruluko",variants:[{variant:"ruluko",weight:"400"}],type:"sansserif",languages:""},{family:"Russo One",variants:[{variant:"russooneregular",weight:"400"}],type:"sansserif",languages:""},{family:"Rye",variants:[{variant:"ryeregular",weight:"400"}],type:"decorative",languages:""},{family:"Sail",variants:[{variant:"sailregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Salsa",variants:[{variant:"salsaregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Sansation",variants:[{variant:"sansationlight",weight:"300"},{variant:"sansationregular",weight:"400"},{variant:"sansationbold",weight:"700"},{variant:"sansationlightitalic",weight:"300i"},{variant:"sansationitalic",weight:"400i"},{variant:"sansationbolditalic",weight:"700i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Sansita One",variants:[{variant:"sansitaone",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Slovenian, Spanish, Swedish"},{family:"Sarina",variants:[{variant:"sarinaregular",weight:"400"}],type:"decorative",languages:""},{family:"Satisfy",variants:[{variant:"satisfy",weight:"400"}],type:"decorative",languages:""},{family:"Scada",variants:[{variant:"scadaregular",weight:"400"},{variant:"scadaitalic",weight:"400i"},{variant:"scadabold",weight:"700"},{variant:"scadabolditalic",weight:"700i"}],type:"sansserif",languages:""},{family:"Schoolbell",variants:[{variant:"schoolbell",weight:"400"}],type:"calligraphy",languages:""},{family:"Sevillana",variants:[{variant:"sevillanaregular",weight:"400"}],type:"calligraphy",languages:""},{family:"Shadows Into Light Two",variants:[{variant:"shadowsintolighttworegular",weight:"400"}],type:"decorative",languages:""},{family:"Short Stack",variants:[{variant:"shortstack",weight:"400"}],type:"handwritten",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Signika",variants:[{variant:"signikalight",weight:"300"},{variant:"signikaregular",weight:"400"},{variant:"signikasemibold",weight:"600"},{variant:"signikabold",weight:"700"}],type:"sansserif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Polish, Portuguese, Slovenian, Spanish, Swedish"},{family:"Signika Negative",variants:[{variant:"signikanegativelight",weight:"300"},{variant:"signikanegativeregular",weight:"400"},{variant:"signikanegativesemibold",weight:"600"},{variant:"signikanegativebold",weight:"700"}],type:"sansserif",languages:""},{family:"Simonetta",variants:[{variant:"simonettaregular",weight:"400"},{variant:"simonettablack",weight:"900"},{variant:"simonettaitalic",weight:"400i"},{variant:"simonettablackitalic",weight:"900i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Snippet",variants:[{variant:"snippet",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Sofadi One",variants:[{variant:"sofadioneregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Sofia",variants:[{variant:"sofiaregular",weight:"400"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Sonsie One",variants:[{variant:"sonsieoneregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Sorts Mill Goudy",variants:[{variant:"sortsmillgoudyregular",weight:"400"},{variant:"sortsmillgoudyitalic",weight:"400i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Source Code Pro",variants:[{variant:"sourcecodeproextralight",weight:"200"},{variant:"sourcecodeprolight",weight:"300"},{variant:"sourcecodeproregular",weight:"400"},{variant:"sourcecodeprosemibold",weight:"600"},{variant:"sourcecodeprobold",weight:"700"},{variant:"sourcecodeproblack",weight:"900"}],type:"fixedwidth",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Source Sans Pro",variants:[{variant:"sourcesansproextralight",weight:"200"},{variant:"sourcesansprolight",weight:"300"},{variant:"sourcesansproregular",weight:"400"},{variant:"sourcesansprosemibold",weight:"600"},{variant:"sourcesansprobold",weight:"700"},{variant:"sourcesansproblack",weight:"900"},{variant:"sourcesansproextralightit",weight:"200i"},{variant:"sourcesansprolightit",weight:"300i"},{variant:"sourcesansproit",weight:"400i"},{variant:"sourcesansprosemiboldit",weight:"600i"},{variant:"sourcesansproboldit",weight:"700i"},{variant:"sourcesansproblackit",weight:"900i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Special Elite",variants:[{variant:"specialeliteregular",weight:"400"}],type:"typewriter",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Spinnaker",variants:[{variant:"spinnakerregular",weight:"400"}],type:"sansserif",languages:""},{family:"Spirax",variants:[{variant:"spiraxregular",weight:"400"}],type:"decorative",languages:""},{family:"Stoke",variants:[{variant:"stokelight",weight:"300"},{variant:"stokeregular",weight:"400"}],type:"serif",languages:""},{family:"Swanky and Moo Moo",variants:[{variant:"swankyandmoomoo",weight:"400"}],type:"handwritten",languages:""},{family:"Syncopate",variants:[{variant:"syncopateregular",weight:"400"},{variant:"syncopatebold",weight:"700"}],type:"sansserif",languages:""},{family:"Tangerine",variants:[{variant:"tangerine",weight:"400"},{variant:"tangerinebold",weight:"700"}],type:"calligraphy",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"TeX Gyre Heros",variants:[{variant:"texgyreherosregular",weight:"400"},{variant:"texgyreherosbold",weight:"700"},{variant:"texgyreherositalic",weight:"400i"},{variant:"texgyreherosbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"TeX Gyre Heros Condensed",variants:[{variant:"texgyreheroscondensedregular",weight:"400"},{variant:"texgyreheroscondensedbold",weight:"700"},{variant:"texgyreheroscondenseditalic",weight:"400i"},{variant:"texgyreheroscondensedbolditalic",weight:"700i"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Tenor Sans",previewLabel:"Tenor Sans",variants:[{variant:"tenorsans",weight:"400"}],type:"sansserif",languages:""},{family:"Tienne",variants:[{variant:"tienneregular",weight:"400"},{variant:"tiennebold",weight:"700"},{variant:"tienneheavy",weight:"900"}],type:"serif",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Tinos",variants:[{variant:"tinos",weight:"400"},{variant:"tinosbold",weight:"700"},{variant:"tinositalic",weight:"400i"},{variant:"tinosbolditalic",weight:"700i"}],type:"serif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Titillium Web",variants:[{variant:"titilliumwebthin",weight:"100"},{variant:"titilliumwebthin",weight:"200"},{variant:"titilliumweblight",weight:"300"},{variant:"titilliumwebregular",weight:"400"},{variant:"titilliumwebsemibold",weight:"600"},{variant:"titilliumwebbold",weight:"700"},{variant:"titilliumwebthinitalic",weight:"100i"},{variant:"titilliumwebthinitalic",weight:"200i"},{variant:"titilliumweblightitalic",weight:"300i"},{variant:"titilliumwebitalic",weight:"400i"},{variant:"titilliumwebsemibolditalic",weight:"600i"},{variant:"titilliumwebbolditalic",weight:"700i"},{variant:"titilliumwebblack",weight:"900"}],type:"sansserif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Trade Winds",variants:[{variant:"tradewinds",weight:"400"}],type:"display",languages:""},{family:"Trykker",variants:[{variant:"trykkerregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Tulpen One",variants:[{variant:"tulpenoneregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Slovenian, Spanish, Swedish"},{family:"Ubuntu",variants:[{variant:"ubuntulight",weight:"300"},{variant:"ubuntu",weight:"400"},{variant:"ubuntumedium",weight:"500"},{variant:"ubuntubold",weight:"700"},{variant:"ubuntulightitalic",weight:"300i"},{variant:"ubuntuitalic",weight:"400i"},{variant:"ubuntumediumitalic",weight:"500i"},{variant:"ubuntubolditalic",weight:"700i"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Greek, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Underdog",variants:[{variant:"underdogregular",weight:"400"}],type:"decorative",languages:""},{family:"UnifrakturCook",previewLabel:"UnifrakturCook",variants:[{variant:"unifrakturcookbold",weight:"700"}],type:"display",languages:""},{family:"UnifrakturMaguntia",variants:[{variant:"unifrakturmaguntia",weight:"400"}],type:"gothic",languages:""},{family:"Unkempt",variants:[{variant:"unkempt",weight:"400"},{variant:"unkemptbold",weight:"700"}],type:"cartoon",languages:""},{family:"Unna",variants:[{variant:"unnaregular",weight:"400"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Varela",variants:[{variant:"varela",weight:"400"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Belarusian_lacinka, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Czech, Danish, Dutch, English, Esperanto, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Maltese, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish"},{family:"Vast Shadow",variants:[{variant:"vastshadowregular",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Vollkorn",variants:[{variant:"vollkornregular",weight:"400"},{variant:"vollkornbold",weight:"700"},{variant:"vollkornitalic",weight:"400i"},{variant:"vollkornbolditalic",weight:"700i"}],type:"serif",languages:"Albanian, Basque, Breton, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Voltaire",variants:[{variant:"voltaire",weight:"400"}],type:"display",languages:"Albanian, Basque, Breton, Catalan, Chamorro, Danish, English, Faroese, Finnish, Frisian, Galician, German, Icelandic, Italian, Malagasy, Norwegian, Portuguese, Spanish, Swedish"},{family:"Waiting for the Sunrise",variants:[{variant:"waitingforthesunrise",weight:"400"}],type:"handwritten",languages:""},{family:"Wallpoet",variants:[{variant:"wallpoet",weight:"400"}],type:"decorative",languages:""},{family:"Walter Turncoat",variants:[{variant:"walterturncoat",weight:"400"}],type:"handwritten",languages:""},{family:"Yanone Kaffeesatz",variants:[{variant:"yanonekaffeesatzextralight",weight:"200"},{variant:"yanonekaffeesatzlight",weight:"300"},{variant:"yanonekaffeesatzregular",weight:"400"},{variant:"yanonekaffeesatzbold",weight:"700"}],type:"sansserif",languages:"Afrikaans, Albanian, Basque, Bosnian, Breton, Catalan, Chamorro, Chichewa_nyanja, Croatian, Cyrillic, Czech, Danish, Dutch, English, Estonian, Faroese, Finnish, French, Frisian, Galician, German, Hungarian, Icelandic, Italian, Latvian, Lithuanian, Malagasy, Norwegian, Polish, Portuguese, Romanian, Serbian, Slovak, Slovenian, Spanish, Swedish, Turkish, Welsh"},{family:"Yesteryear",variants:[{variant:"yesteryearregular",weight:"400"}],type:"decorative",languages:""}],ZFontLibrary=function($){var zfontlibraryConfig={previewText:void 0,updateTo:void 0},dialogOpen=!1,fontLibrary={_EVENTS:{ONOPEN:"open",ONCLOSE:"close",ONMAXIMISE:"maximize",ONMINIMIZE:"minimize",ONUPDATE:"update"},_lazyLoadCount:15,_fontPath:location.protocol+"//webfonts.zohostatic.com/",_close:function(){dialogOpen=!1,this._triggerEvent(this._EVENTS.ONCLOSE),this._baseContainer.remove();for(var i in FCWebFonts)FCWebFonts[i].Import=!1,FCWebFonts[i].selected=!1,FCWebFonts[i].fWeightImport=!1;$(document).off("mouseenter.zfl"),$(document).off("mouseleave.zfl"),$(document).off("click.zfl"),$(document).off("keydown.zfl"),this._textArea.off("keyup.zfl, keydown.zfl"),this._searchBox.off("keyup.zfl")},_create:function(options){options=options||{},this._baseArray=[],this._tempArray=[],this._reqArray=[],this._displayCount=this._lazyLoadCount,this._pushCount=0,this._toRefresh=!0,this._currTextVal="",this._isCheckboxhidden=void 0,this._myFontsCount=0,this._addToOptGroup=!1,""!==options.updateTo&&void 0!==options.updateTo&&(this._fontCombo=$("#"+options.updateTo.split(",")[0]),this._fontOptGroup=this._fontCombo,void 0!==options.updateTo.split(",")[1]&&(this._fontOptGroup=$("#"+options.updateTo.split(",")[1]),this._addToOptGroup=!0)),this.fontWeights=ZFontsUtil.fontVariants(),this._onlyWeights=["100","200","300","400","500","600","700","800","900"],this._italicWeights=["100i","200i","300i","400i","500i","600i","700i","800i","900i"];var supportsWoff2=function(win){if(!("FontFace"in win))return!1;var f=new win.FontFace("t",'url( "data:application/font-woff2," ) format( "woff2" )',{});return f.load().catch(function(){}),"loading"==f.status}(window);this._suppWoffType=supportsWoff2?"woff2":"woff",-1!==navigator.appVersion.indexOf("MSIE 9.")&&(this._isIE9=!0),this.options=$.extend({},zfontlibraryConfig,options);var baseObj=this;this._myFontLoadedStatus=!1;var callbacks={progress:function(){},success:function(serverResponse){if(baseObj._myFontLoadedStatus=!0,void 0!==serverResponse.myFonts){var myFonts=serverResponse.myFonts,myFontsArray=myFonts.split(",");for(var i in FCWebFonts)myFontsArray&&myFontsArray.indexOf(FCWebFonts[i].family)>-1&&(FCWebFonts[i].selected=!0,baseObj._myFontsCount++),FCWebFonts[i].type||(FCWebFonts[i].type="others");baseObj._preloader.hide(),baseObj._createFontListContainer(),baseObj._createFontPreviewContainer()}},fail:function(){dialogOpen=!1,baseObj._preloader.hide(),baseObj._createFontListContainer(),baseObj._createFontPreviewContainer(),baseObj._showError(void 0,!0)}};this._createDialog(),this._getUserFonts(callbacks)},_getUserFonts:function(callbacks){FCUtil.ajaxUtil("getfontlist.do","GET",null,callbacks)},_createDialog:function(){dialogOpen=!0;var base=this;this._baseContainer=$("<div>").attr("id","ui-zfl-container").appendTo("body"),this._baseContainer.zdialog({modal:!0,autoOpen:!0,minimizable:!0}),this._dialogBase=this._baseContainer.parent();var dialogLeft=(window.innerWidth-765)/2,dialogTop=(window.innerHeight-460)/3;this._baseContainer.dialog("option",{position:[dialogLeft,dialogTop],width:785,resizable:!1,dialogClass:"ui-zfontlibrary",title:this._getString("fontlibrary.label"),beforeClose:function(){base._close()}});var documentObj=$(document);this._baseContainer.on("zdialogminimize",function(){base._fontNameSpan&&base._fontNameSpan.hide(),base._triggerEvent(base._EVENTS.ONMINIMIZE),documentObj.off("keydown.zfl")}).on("zdialogmaximize",function(){base._fontNameSpan&&base._fontNameSpan.show(),base._triggerEvent(base._EVENTS.ONMAXIMISE),documentObj.on("keydown.zfl",function(e){base._keyEvents(e)})}),this._mainDiv=$("<div>").attr({id:"ui-zfl-main","class":"ui-zfl-main"}).appendTo(this._baseContainer),this._createFontTypeContainer(),this._triggerEvent(this._EVENTS.ONOPEN)},_createFontTypeContainer:function(){this._fontPreviewDiv=$("<div>").attr("class","ui-zfl-font-lazyload").text("ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789").appendTo("body"),this._searchClose="ui-fcomponents-icon ui-zfc-icon-close";{var fontType=$("<div>").addClass("ui-zfl-fonttype-content"),fontSearchBox=$("<div>").addClass("ui-zfl-searchbox").appendTo(fontType);$("<input>").attr({type:"submit",value:"","class":"ui-fcomponents-icon ui-icon-search-gray"}).appendTo(fontSearchBox)}this._searchBox=$("<input>").attr({type:"text"}).appendTo(fontSearchBox),this._searchtoggleIcon=$("<span>").addClass("ui-zfl-display-none").appendTo(fontSearchBox),this._myFonts=$('<div zfont-type="myfonts">').addClass("ui-zfl-myfonts").appendTo(fontType);$("<a>").text(this._getString("myFonts.label")).appendTo(this._myFonts);this._myFontsCountContainer=$("<div>").addClass("ui-zfl-myfontsContainer").appendTo(this._myFonts),$("<div>").addClass("ui-zfl-myfonts-divider").appendTo(fontType);var fontTypesGroup=$("<div>").addClass("ui-zfl-fonttype").appendTo(fontType),fontTypesList=$("<ul>").attr({id:"ui-zfl-category"}).appendTo(fontTypesGroup);this._isIE9&&this._searchBox.width(116),this._fontTypeArray={allfonts:{label:this._getString("allFonts.label"),importCount:0},serif:{label:this._getString("fontType1.label"),importCount:0},sansserif:{label:this._getString("fontType2.label"),importCount:0},fixedwidth:{label:this._getString("fontType3.label"),importCount:0},display:{label:this._getString("fontType4.label"),importCount:0},decorative:{label:this._getString("fontType5.label"),importCount:0},handwritten:{label:this._getString("fontType6.label"),importCount:0},calligraphy:{label:this._getString("fontType7.label"),importCount:0},others:{label:this._getString("fontType8.label"),importCount:0}},this._otherCategoryTypes={cartoon:{label:this._getString("cartoon.label")},gothic:{label:this._getString("gothic.label")},typewriter:{label:this._getString("typewriter.label")},comic:{label:this._getString("comic.label")},retro:{label:this._getString("retro.label")}};for(type in this._fontTypeArray)fontTypesList.append("<li zfont-type="+type+"><a>"+this._fontTypeArray[type].label+"</a></li>");var baseObj=this;fontTypesList.children("li").add(this._myFonts).on("click.zfl",function(){baseObj._currFontType=$(this),baseObj._currFontType.addClass("ui-zfl-category-selected")}),this._styleElt=$("<style>"),$("head").prepend(this._styleElt),fontType.appendTo(this._mainDiv),this._preloader=$("<div>").attr("class","ui-zfl-preloader").appendTo(this._mainDiv),$("<div>").attr("class","ui-zfc-loader-circle").appendTo(this._preloader)},_initCategoryClickEvents:function(){var fontTypesList=$("#ui-zfl-category"),base=this;fontTypesList.children("li").add(this._myFonts).off("click.zfl").on("click.zfl",function(){base._searchtoggleIcon.attr("class","ui-zfl-display-none");var currentLI=$(this);if(base._resetTextarea(),$(base._currFontType)[0]!==currentLI[0]||""!==base._searchBox.val()||base._doRefresh){base._currFont.removeClass("ui-zfl-category-selected"),base._resetDivs(),base._toRefresh=!0;var title=currentLI.attr("zfont-type");""!==base._searchBox.val()?base._searchBox.val(""):base._currFontType.removeClass("ui-zfl-category-selected"),currentLI.addClass("ui-zfl-category-selected"),base._pushCount=0,base._addElt="allfonts"===title||"myfonts"===title?title:"type",setTimeout(function(){base._addElements(base._addElt,base._pushCount,"type"!==base._addElt?"":title)},50),base._currFontType=currentLI}base._fontFamily=base._currFont.data("fontfamily"),base._doRefresh=!1})},_createFontListContainer:function(){this._fontList=$("<div>").addClass("ui-zfl-fontlist").appendTo(this._mainDiv),this._fontListGroup=$("<ul>").attr({id:"ui-zfl-fontlist-ul"}).appendTo(this._fontList),this._previewText=[this._getString("randomSentence1.label"),this._getString("randomSentence2.label"),this._getString("randomSentence3.label"),this._getString("randomSentence4.label"),this._getString("randomSentence5.label"),this._getString("randomSentence6.label"),this._getString("randomSentence7.label")],this._fontList.zscroll();var thread=null,base=this;this._initCategoryClickEvents(),this._searchBox.on("keyup.zfl",function(){var searchVal=$(this).val();base._currTextVal!==searchVal&&(clearTimeout(thread),base._searchtoggleIcon.attr("class","ui-zfl-loadericon"),base._noFontsShown||base._fontList.add($(base._previewContainer)).css("opacity",.4),base._currFont.add($(base._currFontType)).removeClass("ui-zfl-category-selected"),base._resetDivs(!0),""!==searchVal?(base._beforeSearchFontType=base._currFontType,base._toRefresh=!0,base._addElt="search",base._pushCount=0,thread=setTimeout(function(){base._addElements(base._addElt,base._pushCount)},600)):thread=setTimeout(function(){base._clearTextBox()},200),base._currTextVal=searchVal)}),this._searchtoggleIcon.click(function(){$(this).hasClass("ui-zfc-icon-close")&&setTimeout(function(){base._clearTextBox()},200)})},_noFonts:function(){if(!this._noFontsShown){this._fontList.addClass("ui-zfl-border-r-transparent").children().hide(),this._fontPreviewer.add($(this._fontInfo)).hide(),this._noFontsMsgDiv.show(),this._noFontsShown=!0;var fontsList=$("#ui-zfl-fontlist-ul li");fontsList.remove(),fontsList.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox"),$("<span>").text(this._getString("noFonts.label")).attr({id:"ui-zfl-no-fonts"}).appendTo(this._noFontsMsgDiv)}},_resetNoFonts:function(){this._noFontsMsgDiv.hide(),this._fontPreviewer.show(),$("#ui-zfl-no-fonts").remove(),this._fontList.removeClass("ui-zfl-border-r-transparent").children().show(),this._noFontsShown=!1},_createFontPreviewContainer:function(){var base=this;this._previewContainer=$("<div>").addClass("ui-zfl-previewer").appendTo(this._mainDiv),this._fontPreviewer=$("<div>").addClass("ui-zfl-previewarea ui-zfl-transition-opacity").appendTo(this._previewContainer);var fontAdder=$("<div>").addClass("ui-zfl-fontAdder").appendTo(this._fontPreviewer),fontWeightSelector=$("<select>").attr({id:"ui-zfl-variant-combo"}).appendTo(fontAdder);fontWeightSelector.on("combochange",function(e,ui){var fontStyle="normal";ui.value.indexOf("i")>-1&&(fontStyle="italic");var fontFamilyText=base._currFont.data("fontfamily").toLowerCase();base._textArea.add(base._backgroundSubjDiv).add(base._varFontSize.find("span")).css({"font-family":fontFamilyText,"font-weight":parseInt(ui.value),"font-style":fontStyle})});var fontSize=$("<div>").addClass("ui-zfl-fontsize").appendTo(this._fontPreviewer);this._fontSizeButton=$("<div>").attr({title:this._getString("fontSize.label")}).addClass("ui-zfl-fontsizeButton").text(this._getString("alphabets.label")).appendTo(fontSize);var fontPreview=$("<div>").addClass("ui-zfl-fontpreview").appendTo(this._fontPreviewer);this._textArea=$("<textarea>").attr({id:"ui-textArea-id",spellcheck:!1}).appendTo(fontPreview),this._backgroundSubjDiv=$("<textarea>").css("position","absolute").hide(),this._textArea.before(this._backgroundSubjDiv),this._setPreviewText(),this._fontInfo=$("<div>").attr("title",this._getString("fontInfo.label")).addClass("ui-zfl-fontinfo ui-fcomponents-icon ui-icon-font-info").appendTo(this._previewContainer).hide();var hiddenDiv=($("<div>").addClass("ui-zfl-border").appendTo(this._baseContainer),$("<div>").attr("id","ui-hiddenDiv-id").addClass("ui-zfl-fontDetailsContainer ui-zfl-transition-opacity").appendTo(this._previewContainer));this._fontPreviewer.after(hiddenDiv),this._noFontsMsgDiv=$("<div>").css("cursor","ui-zfl-display-none").appendTo(this._previewContainer).hide(),this._fontPreviewer.after(this._noFontsMsgDiv),this._fontSizeDiv=$("<div>").addClass("ui-zfl-fontSizeContainer").appendTo(fontPreview).hide(),this._varFontSize=$("<div>").addClass("ui-zfl-fontsizepreview").appendTo(this._fontSizeDiv),this._varFontSize.zscroll();for(var setTimeoutDiv="",k=0;7>=k;k++)this._varFontSize.children(".ui-zscroll-child").length||$("<div>").addClass("ui-zscroll-child").appendTo(this._varFontSize),this._varFontSize.children(".ui-zscroll-child").append("<span></span>");this._textArea.mouseenter(function(){base._fontInfo.fadeIn(300)});var fontTypesList=$("#ui-zfl-category");this._currFontType||(this._currFontType=fontTypesList.children(":first").addClass("ui-zfl-category-selected"));var title=this._currFontType.attr("zfont-type");this._addElt="allfonts"===title||"myfonts"===title?title:"type";for(var initialImportCount=0,i=0;i<FCWebFonts.length;i++)initialImportCount<=this._lazyLoadCount&&("allfonts"===this._addElt||title===FCWebFonts[i].type)&&(FCWebFonts[i].Import=!0,initialImportCount++);this._addElements(this._addElt,0,"type"!==this._addElt?"":title),this._currFont&&!this._currFont.find("span").hasClass("ui-zfc-icon-tick")&&this._currFont.find("span").addClass("ui-fcomponents-icon ui-icon-checkbox"),fontWeightSelector.zcombo({applyOptionStylesOnCombo:!0,type:"text_only"});var hiddenSpanCount=$("<div>").text(""+this._myFontsCount).after("<br/>").addClass("ui-zfl-myfonts-count").appendTo(this._myFontsCountContainer),hiddenSpanCount1=$("<div>").addClass("ui-zfl-myfonts-count").appendTo(this._myFontsCountContainer);base._myFontsCount>=10&&base._myFontsCountContainer.width(30);var updatedFont,animTime=500;$(document).on("click.zfl","#ui-zfl-fontlist-ul li",function(e,enterPressed){base._css="";var thisObj=$(this);if($(base._currFont)[0]!==$(this)[0]&&(base._resetTextarea(),thisObj.find("span").hasClass("ui-zfc-icon-close")&&"span"===e.target.tagName.toLowerCase()||(base._currFont.removeClass("ui-zfl-category-selected"),base._currFont.children().hasClass("ui-icon-checkbox")&&!base._isCheckboxhidden?base._currFont.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox"):base._isCheckboxhidden=!1,base._currFont.find("span").hasClass("ui-fcomponents-icon ui-zfc-icon-close")&&base._currFont.find("span").removeClass("ui-fcomponents-icon ui-zfc-icon-close"),base._fontFamily=thisObj.data("fontfamily"),thisObj.addClass("ui-zfl-category-selected"),base._currFont=thisObj)),base._resetDivs(),("span"===e.target.tagName.toLowerCase()||enterPressed)&&base._myFontLoadedStatus&&(base._countAnimation=!0,updatedFont=thisObj,thisObj.find("span").hasClass("ui-icon-checkbox-tick")?(thisObj.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox-tick").addClass("ui-fcomponents-icon ui-icon-checkbox"),base._myFontsCount=base._myFontsCount-1,base._increaseVal=!1):thisObj.children().hasClass("ui-icon-checkbox")?(thisObj.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox").addClass("ui-fcomponents-icon ui-icon-checkbox-tick"),base._myFontsCount=base._myFontsCount+1,base._increaseVal=!0):(thisObj.find("span").removeClass("ui-fcomponents-icon ui-zfc-icon-close"),base._currFont.find("span").removeClass("ui-fcomponents-icon ui-zfc-icon-close "),base._currFont.removeClass("ui-zfl-category-selected"),$("#ui-zfl-fontlist-ul li:visible").length>1&&(base._currFont=thisObj.nextAll(":visible:first"),thisObj[0]===$("#ui-zfl-fontlist-ul li:visible").last()[0]&&(base._currFont=thisObj.prevAll(":visible:first")),base._currFont.find("span").addClass("ui-fcomponents-icon ui-zfc-icon-close")),thisObj.remove(),base._myFontsCount=base._myFontsCount-1,base._increaseVal=!1),base._updateFontList(updatedFont)),base._countAnimation&&base._myFontLoadedStatus){base._myFontsCountContainer.show(),setTimeoutDiv&&clearTimeout(setTimeoutDiv),setTimeout(function(){base._myFontsCount<10?base._myFontsCountContainer.width(20):base._myFontsCount>=10&&base._myFontsCountContainer.width(30),base._increaseVal?(hiddenSpanCount1.text(base._myFontsCount).attr("class","ui-zfl-myfonts-count ui-zfl-myfonts-count-increase").css("top",0).clearQueue().animate({top:-22},animTime),hiddenSpanCount.text(base._myFontsCount-1).attr("class","ui-zfl-myfonts-count ui-zfl-myfonts-count-increase").css("top",0).clearQueue().animate({top:-22},animTime)):(hiddenSpanCount.text(base._myFontsCount).attr("class","ui-zfl-myfonts-count ui-zfl-myfonts-count-decrease").css("top",-22).clearQueue().animate({top:0},animTime),hiddenSpanCount1.text(base._myFontsCount+1).attr("class","ui-zfl-myfonts-count ui-zfl-myfonts-count-decrease").css("top",-22).clearQueue().animate({top:0},animTime))},100),setTimeoutDiv=setTimeout(function(){$(hiddenSpanCount).add($(hiddenSpanCount1)).attr("class","ui-zfl-myfonts-count")},1500)}0===$("#ui-zfl-fontlist-ul").children().length&&base._noFonts(),base._fontList.zscroll("refresh"),base._refreshComponents(updatedFont),updatedFont=""}).on("mouseenter.zfl","#ui-zfl-fontlist-ul li",function(){var liEle=$(this),anchorEle=$(this).find("a")[0];setTimeout(function(){$(base._currFontType)[0]===$(base._myFonts)[0]&&""===base._searchBox.val()?liEle.find("span").addClass("ui-fcomponents-icon ui-zfc-icon-close").attr("title",base._getString("removeFromLibrary.label")):liEle.find("span").hasClass("ui-zfc-icon-tick")?liEle.find("span").removeClass("ui-fcomponents-icon ui-zfc-icon-tick").addClass("ui-fcomponents-icon ui-icon-checkbox-tick").attr("title",base._getString("removeFromLibrary.label")):liEle.find("span").hasClass("ui-icon-checkbox-tick")||liEle.find("span").addClass("ui-fcomponents-icon ui-icon-checkbox").attr("title",base._getString("addToLibrary.label")),anchorEle.offsetWidth<anchorEle.scrollWidth&&!liEle.find("a").attr("title")&&liEle.find("a").attr("title",$(this).find("a").text())},100)}).on("mouseleave.zfl","#ui-zfl-fontlist-ul li",function(){var liEle=$(this);setTimeout(function(){liEle.find("span").hasClass("ui-fcomponents-icon ui-icon-checkbox")&&liEle[0]!==$(base._currFont)[0]?liEle.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox"):liEle.find("span").hasClass("ui-fcomponents-icon ui-icon-checkbox-tick")&&liEle.find("span").removeClass("ui-fcomponents-icon ui-icon-checkbox-tick").addClass("ui-fcomponents-icon ui-zfc-icon-tick"),$(base._currFontType)[0]===$(base._myFonts)[0]&&liEle[0]!==$(base._currFont)[0]&&liEle.find("span").removeClass("ui-fcomponents-icon ui-zfc-icon-close")},100)});for(var type1,containerDiv="",hiddenGroup=$('<ul class = "ui-zfl-fontBackground">').appendTo($("body")),i=0;i<FCWebFonts.length;i++){var fWeight="400";for(var j in FCWebFonts[i].variants)FCWebFonts[i].variants[j].weight===fWeight&&(type1=FCWebFonts[i].variants[j].variant);var fontWeight=400,splitString=FCWebFonts[i].type;if(this._fontTypeArray[splitString]||(splitString="others"),this._fontTypeArray[splitString].importCount++,this._fontTypeArray[splitString].importCount<=this._lazyLoadCount){containerDiv+='<span style="font-family: '+FCWebFonts[i].family+';">ABCDEFGHIJKLMNOPQRSTUVXYZ</span>';var fontPath=this._fontPath+type1,firstFontLoaded=1===this._fontTypeArray[splitString].importCount?!1:!0;this._createFontFaceCSS(FCWebFonts[i].family,fontPath,fontWeight,"normal",firstFontLoaded&&0!=FCWebFonts[i].preview?firstFontLoaded:!1),FCWebFonts[i].Import=!0}}base._styleElt.append(base._css),hiddenGroup.append(containerDiv),$(document).on("keydown.zfl",function(e){base._keyEvents(e)});var fontInfoDiv=$("<div>").addClass("ui-zfl-fontDetails").appendTo(hiddenDiv);this._returnBackIcon=$("<div>").addClass("ui-zfl-fontinfo ui-fcomponents-icon ui-zfc-icon-back").appendTo(this._previewContainer).hide();var timeout2,titleDiv=$("<li>").appendTo(fontInfoDiv),title=($("<span>").text(this._getString("fontfamily.label")).appendTo(titleDiv),$("<b>").text(base._currFont.data("fontfamily")).appendTo(titleDiv)),typeDiv=$("<li>").appendTo(fontInfoDiv),type=($("<span>").text(this._getString("fontcategory.label")).appendTo(typeDiv),$("<b>").appendTo(typeDiv)),varianceDiv=$("<li>").appendTo(fontInfoDiv),variantArr=($("<span>").css({"word-wrap":"break-word"}).text(this._getString("fontvariants.label")).appendTo(varianceDiv),[]),variant=$("<b>").appendTo(varianceDiv),langDiv=$("<li>").appendTo(fontInfoDiv),lang=($("<span>").text(this._getString("language.label")).appendTo(langDiv),$("<b>").appendTo(langDiv));this._fontInfo.on("click",function(){base._fontPreviewer.css({overflow:"hidden"});var fontfamilyName=base._currFont.data("fontfamily");title.text(fontfamilyName).appendTo(titleDiv),variantArr=[];for(var index=0;index<FCWebFonts.length;index++)if(FCWebFonts[index].family===fontfamilyName){for(var j=0;j<FCWebFonts[index].variants.length;j++)variantArr.push(base.fontWeights[FCWebFonts[index].variants[j].weight]);-1===variantArr.indexOf(base.fontWeights[700])&&variantArr.push(base.fontWeights[700]),-1===variantArr.indexOf(base.fontWeights["400i"])&&variantArr.push(base.fontWeights["400i"]),-1===variantArr.indexOf(base.fontWeights["700i"])&&variantArr.push(base.fontWeights["700i"]);var fontType=FCWebFonts[index].type,fontTypetext=base._fontTypeArray[fontType]?base._fontTypeArray[fontType].label:base._otherCategoryTypes[fontType].label;type.text(fontTypetext),lang.text(FCWebFonts[index].languages?FCWebFonts[index].languages:"English"),FCWebFonts[index].languages&&lang.append(".")}if(variantArr=variantArr.toString().replace(/\,/g,", "),variant.text(variantArr).append(".").appendTo(varianceDiv),timeout1&&clearTimeout(timeout1),base._isIE9)base._fontPreviewer.clearQueue().animate({opacity:.1,left:"-340px"},animTime),hiddenDiv.clearQueue().show().animate({opacity:1,left:"30px"},animTime);else{base._fontPreviewer.addClass("ui-zfl-previewarea-animate"),hiddenDiv.show();var timeout1=setTimeout(function(){hiddenDiv.addClass("ui-zfl-fontDetailsContainer-animate")},50)}setTimeout(function(){base._fontInfo.hide(),base._returnBackIcon.show(),base._fontInfoShown=!0},400)}),hiddenDiv.on("scroll.zfl",function(e){$(e.target).scrollTop()&&hiddenDiv.outerHeight()+hiddenDiv.scrollTop()<hiddenDiv[0].scrollHeight?hiddenDiv.addClass("ui-zfl-fontdetails-shadow"):hiddenDiv.removeClass("ui-zfl-fontdetails-shadow")}),this._returnBackIcon.on("click",function(){timeout2&&clearTimeout(timeout2),base._isIE9?(hiddenDiv.clearQueue().animate({opacity:0,left:"330px"},animTime,function(){$(this).hide()}),base._fontPreviewer.clearQueue().animate({opacity:1,left:"0px"},animTime)):(base._fontPreviewer.removeClass("ui-zfl-previewarea-animate"),hiddenDiv.removeClass("ui-zfl-fontDetailsContainer-animate"),timeout2=setTimeout(function(){hiddenDiv.hide()},animTime)),setTimeout(function(){base._fontInfo.show(),base._returnBackIcon.hide(),base._fontInfoShown=!1},400)}),this._fontPreviewer.click(function(e){e.target!==base._textArea&&""===base._textArea.val()&&(base._textArea.val(base._default_value),base._backgroundSubjDiv.hide())}),this._textArea.on("focus.zfl",function(){base._textArea.select(),base._textArea.mouseup(function(){return base._textArea.off("mouseup"),!1}),base._textAreaVal=base._textArea.val()}).on("keydown.zfl",function(e){27===e.keyCode&&(e.preventDefault(),e.stopPropagation(),base._textArea.val(base._textAreaVal)),base._hideTextarea()}).on("keyup.zfl",function(){base._hideTextarea()}),this._returnBackDiv=$("<div>").addClass("ui-zfl-curve").appendTo(this._baseContainer).hide(),returnArrow=$("<span>").addClass("ui-zfl-arrow").appendTo(this._returnBackDiv),this._fontSizeButton.on("click",function(){base._fontSizeButton.hasClass("ui-zfl-btn-disable")||setTimeout(function(){base._showPreview(),base._lesserText||base._fontSizeButton.addClass("ui-zfl-btn-disable")},10)}),this._returnBackDiv.on("click",function(){base._restorePreview()})},_hideTextarea:function(){""===this._textArea.val()?this._backgroundSubjDiv.css({opacity:.15,"font-family":this._fontFamily}).show():(this._backgroundSubjDiv.hide(),this._textArea.show())},_upDownKeyScroll:function(downArrow){var mouseenteredElt=$("#ui-zfl-fontlist-ul li span.ui-fcomponents-icon").parent().not(this._currFont[0]);this._currFont.trigger("mouseleave.zfl");var indexPush=0;downArrow?this._currFont.next().trigger("click"):(indexPush=7,this._currFont.prev().trigger("click")),mouseenteredElt[0]==this._currFont[0]&&(this._isCheckboxhidden=!0),this._currFont.trigger("mouseenter.zfl");var zscrollEle=this._fontList.children(".ui-zscroll-child");this._currFont.offset().top<zscrollEle.offset().top?zscrollEle.scrollTop((this._currFont.index()-indexPush)*this._currFont.outerHeight()):this._currFont.offset().top-zscrollEle.offset().top+10>zscrollEle.outerHeight()&&zscrollEle.scrollTop((this._currFont.index()-indexPush)*this._currFont.outerHeight())},_keyEvents:function(e){this._baseContainer.find("input,textarea").is(":focus")||this._fontPreviewShown||this._noFontsShown||this._fontInfoShown||(40==e.keyCode?(e.preventDefault(),this._upDownKeyScroll(!0)):38==e.keyCode&&(e.preventDefault(),this._upDownKeyScroll()))},_clearTextBox:function(){this._searchtoggleIcon.attr("class","ui-zfl-display-none"),this._searchBox.val(""),this._currTextVal="",this._resetDivs(),this._currFontType=this._beforeSearchFontType,this._searchBox.focus(),this._currFontType.add(this._currFont).addClass("ui-zfl-category-selected"),this._toRefresh=!0,this._pushCount=0;var title=this._currFontType.attr("zfont-type");this._addElt="allfonts"===title|"myfonts"===title?title:"type",this._addElements(this._addElt,this._pushCount,"type"!==this._addElt?"":title)},_resetDivs:function(search){this._fontInfo.hide(),search||this._noFontsShown&&this._resetNoFonts(),this._fontPreviewShown?this._restorePreview():this._fontInfoShown&&this._returnbackPreview()},_loadFontFace:function(ele,fontObj){this._css="",fontObj.fWeightImport=!0;for(var fontVariant=fontObj.variants,fWeight=0;fWeight<fontVariant.length;fWeight++){var fontURL=this._fontPath+fontVariant[fWeight].variant,currfWeight=fontVariant[fWeight].weight,fontStyle="normal";currfWeight.indexOf("i")>-1&&(fontStyle="italic"),currfWeight=parseInt(currfWeight);var fontPath=fontURL;this._createFontFaceCSS(fontObj.family,fontPath,currfWeight,fontStyle)}this._styleElt.append(this._css)},_showPreview:function(){var base=this,time=300;if(this._fontSizeButton.addClass("fontSizeSelected"),this._fontInfo.hide(),this._resetTextarea(),base._fontPreviewShown)base._restorePreview();else{this._fontSizeDiv.css({"padding-left":"20px"}).show(),this._textArea.hide(),this._fontSizeDiv.children().find("span").html("<a></a>"+this._textArea.val()).removeClass("ui-zfl-preview-shadow").css({"font-family":base._fontFamily}).show(),20<this._textArea.val().length?(this._lesserText=!1,this._fontNameSpan=$("<span>").text(base._fontFamily).addClass("ui-dialog-title ui-zfl-fontTitle").appendTo(this._dialogBase.find(".ui-dialog-titlebar")).fadeIn(400),this._textArea.hide(),this._fontList.addClass("ui-zfl-border-rl-white"),this._isIE9?(this._myFonts.parent().clearQueue().animate({width:0,paddingRight:0},time),this._fontList.clearQueue().animate({width:0},time),this._previewContainer.clearQueue().animate({width:742,marginLeft:"-20",right:0},time)):(this._myFonts.parent().addClass("ui-zfl-fonttype-animate"),this._fontList.addClass("ui-zfl-fontlist-animate"),this._previewContainer.addClass("ui-zfl-previewer-animate")),setTimeout(function(){base._myFonts.parent().children().hide(),base._fontList.children().fadeOut(100),base._fontSizeDiv.css({"padding-left":"30px"}),setTimeout(function(){base._isIE9?base._returnBackDiv.clearQueue().animate({left:"-30px"},80,"easeOutQuart").show():base._returnBackDiv.addClass("ui-zfl-curve-animate").show(),$(base._fontSizeButton).addClass("ui-fcomponents-icon ui-zfc-icon-blur"),base._fontPreviewShown=!0,base._fontSizeButton.removeClass("ui-zfl-btn-disable")},150)},200)):(base._fontSizeButton.addClass("ui-fcomponents-icon ui-zfc-icon-blur"),base._fontPreviewShown=!0,base._lesserText=!0,base._fontSizeButton.removeClass("ui-zfl-btn-disable"));var prevSpan=this._varFontSize.find("span"),prevAnchor=this._varFontSize.find("a");if(80>this._textArea.val().length){var fontSize1=48;for(i=0;3>i;i++)$(prevSpan[i]).css({"font-size":fontSize1}).attr("class","ui-zfl-preview-less ui-zfl-preview-shadow"),$(prevAnchor[i]).text(fontSize1),fontSize1-=2*(6-i);var fontSize=20;for($(prevSpan[i]).css({"font-size":fontSize}).attr("class","ui-zfl-preview-less ui-zfl-preview-shadow"),$(prevAnchor[i]).text(fontSize),fontSize1=16,i=4;8>i;i++)$(prevSpan[i]).css({"font-size":fontSize1}).attr("class","ui-zfl-preview-min ui-zfl-preview-shadow"),$(prevAnchor[i]).text(fontSize1),fontSize1-=2}else for(prevSpan.slice(0,3).hide(),prevAnchor.slice(0,3).hide(),i=3;7>=i;i++)fontSize=25-2*i,$(prevSpan[i]).css({"font-size":fontSize}).attr("class","ui-zfl-preview-more"),$(prevAnchor[i]).text(fontSize);this._varFontSize[0].children[0].scrollTop=0,this._varFontSize.zscroll("refresh")}},_restorePreview:function(){var time=300;this._lesserText||this._fontNameSpan.remove(),this._isIE9?(this._previewContainer.clearQueue().animate({width:338,marginLeft:0},time),this._returnBackDiv.clearQueue().animate({left:"-61px"},100,"easeOutQuart").show(),this._fontList.clearQueue().animate({width:220},time),this._myFonts.parent().clearQueue().animate({width:140,paddingRight:20},time)):(this._previewContainer.removeClass("ui-zfl-previewer-animate"),this._returnBackDiv.hide().removeClass("ui-zfl-curve-animate"),this._fontList.removeClass("ui-zfl-fontlist-animate"),this._myFonts.parent().removeClass("ui-zfl-fonttype-animate")),this._fontSizeDiv.hide(),this._textArea.show(),this._myFonts.parent().children().show(),this._fontList.removeClass("ui-zfl-border-rl-white").children().show();var base=this;setTimeout(function(){base._fontSizeButton.removeClass("ui-fcomponents-icon ui-zfc-icon-blur"),base._fontPreviewShown=!1,base._fontSizeButton.removeClass("ui-zfl-btn-disable")})},_resetTextarea:function(){""===this._textArea.val()&&(this._textArea.val(this._default_value),this._backgroundSubjDiv.hide())},_getFontDetails:function(fontName){for(var fontFamily,currIndex,currVariant,currWeight,fontObj={},fontsString="",fontStyle="normal",count=0;count<FCWebFonts.length;count++)if(FCWebFonts[count].family.toLowerCase()===fontName.toLowerCase()){fontFamily=FCWebFonts[count].family,fontObj={fontName:fontFamily,fontCategory:FCWebFonts[count].type,languages:FCWebFonts[count].languages?FCWebFonts[count].languages:"English"},currVariant=FCWebFonts[count].variants[0].variant,fontObj.fontFace=this._createFontFace(fontFamily,"400","normal",this._fontPath+currVariant);for(var i=0;i<FCWebFonts[count].variants.length;i++){currIndex=FCWebFonts[count].variants[i],currWeight=currIndex.weight,currVariant=currIndex.variant,currWeight.indexOf("i")>-1&&(fontStyle="italic");var fontWeight=parseInt(currWeight);fontsString+=this._createFontFace(fontFamily,fontWeight,fontStyle,this._fontPath+currVariant)}fontObj.allFontFace=fontsString}return fontObj},_createFontFace:function(fontFamily,fontWeight,fontStyle,fontPath){return"@font-face{font-family:'"+fontFamily+"';font-weight:"+fontWeight+";font-style:"+fontStyle+"; src: url('"+fontPath+"/font.eot');src: local('"+fontFamily+"'), url('"+fontPath+"/font.eot?#iefix') format('eot'), url('"+fontPath+"/font.woff2') format('woff2'), url('"+fontPath+"/font.woff') format('woff');}"},_returnbackPreview:function(){this._isIE9?(this._fontPreviewer.css({opacity:1,left:"0px"}),$("#ui-hiddenDiv-id").css({left:"330px",opacity:.1}).hide()):($("#ui-hiddenDiv-id").add(this._fontPreviewer).removeClass("ui-zfl-transition-opacity"),this._fontPreviewer.removeClass("ui-zfl-previewarea-animate").show(),$("#ui-hiddenDiv-id").removeClass("ui-zfl-fontDetailsContainer-animate").hide(),$("#ui-hiddenDiv-id").add(this._fontPreviewer).addClass("ui-zfl-transition-opacity")),this._returnBackIcon.hide(),this._fontList.removeClass("ui-zfl-border-rl-white"),this._fontInfoShown=!1},_refreshComponents:function(updatedfont){var fontCombo=$("#ui-zfl-variant-combo");fontCombo.find("option").remove();for(var fontArray=[],fontObj=void 0,selFontIndex=null,updatedFontName=updatedfont?updatedfont.data("fontfamily"):$(updatedfont).text(),currFont=this._currFont.data("fontfamily"),count=0;count<FCWebFonts.length;count++){if(FCWebFonts[count].family===currFont){FCWebFonts[count].fWeightImport||(fontObj=FCWebFonts[count],selFontIndex=count);for(var i in FCWebFonts[count].variants){var fontName=this.fontWeights[FCWebFonts[count].variants[i].weight];fontArray.push(fontName)}}FCWebFonts[count].family===updatedFontName&&this._countAnimation&&(FCWebFonts[count].selected=this._increaseVal?!0:!1)}-1===fontArray.indexOf(this.fontWeights[700])&&fontArray.push(this.fontWeights[700]);for(var table={},i=0;i<fontArray.length;i++)table[fontArray[i]]=fontArray[i];fontArray=[];for(var j=0;j<this._onlyWeights.length;j++){var key=this.fontWeights[this._onlyWeights[j]];key in table&&(fontArray.push(this._onlyWeights[j]),fontArray.push(this._italicWeights[j]),delete table[key])}for(var keyNew=0;keyNew<table.length;keyNew++)fontArray.push(table[keyNew]);for(var k=0;k<fontArray.length;k++)fontCombo.append("<option value ="+fontArray[k]+">"+this.fontWeights[fontArray[k]]+"</option>");this._fontFamily=this._currFont.data("fontfamily");var defVariant="Normal";if(fontCombo.data("zcombo")||fontCombo.zcombo({applyOptionStylesOnCombo:!0,type:"text_only"}),fontCombo.zcombo("refresh"),fontCombo.zcombo("setValue","400"),this._currFont.addClass("ui-zfl-category-selected"),this._countAnimation=!1,void 0!==fontObj){var type1;for(var j in fontObj.variants)"400"===fontObj.variants[j].weight&&(type1=fontObj.variants[j].variant);var fontPath=this._fontPath+type1,baseObj=this;this._createFontFaceCSS(fontObj.family,fontPath,"400","normal"),this._fontPreviewDiv[0].style.setProperty("font-family",fontObj.family,"important"),this._loadFonts(fontPath+"/font."+this._suppWoffType,{},function(){var fontFamilyWithDefaut=baseObj._fontFamily+",arial,sans-serif";baseObj._varFontSize.find("span").css({"font-family":fontFamilyWithDefaut,"font-style":defVariant,"font-weight":400}),baseObj._textArea[0].style.setProperty("font-family",fontFamilyWithDefaut,"important"),baseObj._backgroundSubjDiv[0].style.setProperty("font-family",fontFamilyWithDefaut,"important"),baseObj._loadFontFace(updatedfont?updatedfont:baseObj._currFont,fontObj,selFontIndex)})}},_loaderIcon:function(){var bottomDiv=$("<div>").attr({id:"ui-zfl-loader"}),loaderDiv=$("<div>").attr({id:"ui-loaderDiv-id"}).appendTo(bottomDiv);this._isIE9?loaderDiv.addClass("ui-zfl-loader-ie9 ui-icon-loader-small"):(loaderDiv.addClass("ui-zfl-loader"),$("<div>").addClass("ui-zfl-css-loader1").appendTo(loaderDiv),$("<div>").addClass("ui-zfl-css-loader2").appendTo(loaderDiv),$("<div>").addClass("ui-zfl-css-loader3").appendTo(loaderDiv)),bottomDiv.appendTo($("#ui-zfl-fontlist-ul"))},_getFurtherFonts:function(){this._fontList.off("scroll.zfontlibrary"),this._toRefresh=!1,this._loaderIcon(),this._addElements(this._addElt,++this._pushCount,this._currFontType.attr("zfont-type"),!0)},_updateFontList:function(item){var fName=item.data("fontfamily"),lowerCasedName=fName.toLowerCase(),action=this._increaseVal?"add":"remove",reqData={fontName:fName,fontAction:action},baseObj=this,callbacks={progress:function(){},success:function(){var updateTo=baseObj._fontCombo;if(updateTo){for(var DOMitems=baseObj._fontOptGroup.find("option"),items=[],i=0;i<DOMitems.length;i++)items.push($(DOMitems[i]).val().toLowerCase());if("add"===action&&-1===items.indexOf(lowerCasedName)){items.push(lowerCasedName),items.sort(),elePos=items.indexOf(lowerCasedName);var val={label:fName,value:lowerCasedName,position:elePos,style:"font-family:"+fName+";"};baseObj._addToOptGroup&&(val.optionGroup=baseObj._fontOptGroup),updateTo.zcombo("addOption",val)}else"remove"===action&&-1!==items.indexOf(lowerCasedName)&&updateTo.zcombo("removeOption",lowerCasedName)}var ui=baseObj._getFontDetails(fName);ui.fontAction=action,baseObj._triggerEvent(baseObj._EVENTS.ONUPDATE,ui)},fail:function(){baseObj._showError(baseObj._getString("updateerror.label"),!0)}};FCUtil.ajaxUtil("updatefontlist.do","POST",reqData,callbacks)},_addElements:function(action,count,data,loadPreviewOnly){this._css="",this._displayCount=this._lazyLoadCount;var initialCount=count*this._displayCount,tcount=0;if(this._loadedCount=0,this._appendList="",this._isFinished=!1,"allfonts"===action)for(var z=0;z<FCWebFonts.length&&(tcount++,this._displayElements(action,z,initialCount,tcount,loadPreviewOnly),!(tcount>=initialCount+this._displayCount));z++);else if("type"===action)for(var y=0;y<FCWebFonts.length;y++){var fType=FCWebFonts[y].type;if(this._fontTypeArray[fType]||(fType="others"),fType===data&&(tcount++,this._displayElements(action,y,initialCount,tcount,loadPreviewOnly),tcount>=initialCount+this._displayCount))break}else if("search"===action)for(var valThis=this._searchBox.val().toLowerCase(),x=0;x<FCWebFonts.length;x++)0===FCWebFonts[x].family.toLowerCase().indexOf(valThis)&&(tcount++,this._displayElements(action,x,initialCount,tcount,loadPreviewOnly));else{this._displayCount=this._myFontsCount+1;for(var selecFont=0;selecFont<FCWebFonts.length&&!(FCWebFonts[selecFont].selected&&(tcount++,this._displayElements(action,selecFont,initialCount,tcount,loadPreviewOnly),tcount>=initialCount+this._displayCount));selecFont++);}this._showElements(action),this._postAddition(tcount,initialCount),this._fontList.zscroll("refresh"),this._styleElt.append(this._css)},_displayElements:function(action,i,initialCount,tcount,loadPreviewOnly){if(tcount>initialCount&&tcount<initialCount+this._displayCount){var spanClass="myfonts"!==action&&FCWebFonts[i].selected?"ui-fcomponents-icon ui-zfc-icon-tick":"",previewLabel=void 0!=FCWebFonts[i].previewLabel?FCWebFonts[i].previewLabel:FCWebFonts[i].family;if(this._appendList+='<li data-fontfamily="'+FCWebFonts[i].family+'"><a data-fontfamily="'+FCWebFonts[i].family+'" style="font-family: '+FCWebFonts[i].family+'preview;font-size:17px;">'+previewLabel+'</a><span class="'+spanClass+'""></span></li>',this._flag){this._flag=!1;for(y in this._reqArray)this._reqArray[y].abort();this._reqArray=[],this._tempArray=[]}if(this._fontsShown=!1,!FCWebFonts[i].Import){var base=this,fontPath=this._fontPath+FCWebFonts[i].variants[0].variant;if(FCWebFonts[i].variants.length>1)for(var k in FCWebFonts[i].variants)"400"===FCWebFonts[i].variants[k].weight&&(fontPath=this._fontPath+FCWebFonts[i].variants[k].variant);loadPreviewOnly=0!=FCWebFonts[i].preview?loadPreviewOnly:!1,this._createFontFaceCSS(FCWebFonts[i].family,fontPath,400,"normal",loadPreviewOnly),this._tempArray.push(FCWebFonts[i].family);var CustomData={fontObjIndex:i,fontName:FCWebFonts[i].family},fontPath=fontPath+"/"+(loadPreviewOnly?"font_preview.":"font.")+this._suppWoffType;this._loadFonts(fontPath,CustomData,function(CustomData){base._tempArray.pop(),FCWebFonts[CustomData.fontObjIndex].Import=!0,base._flag=!0,base._tempArray.length||setTimeout(function(){base._showElements(action,!0)},100)})}}},_showElements:function(action,scrollPushEnabled){if(!this._tempArray.length&&(this._resetLoader(),this._toRefresh&&($("#ui-zfl-fontlist-ul").html(""),this._noFontsShown&&this._resetNoFonts()),this._fontList.add(this._previewContainer).css("opacity",1),$("#ui-zfl-fontlist-ul").append(this._appendList),this._toRefresh&&(this._currFont=$("#ui-zfl-fontlist-ul li").first(),this._refreshComponents(),$(this._fontList)[0].children[0].scrollTop=0,"myfonts"!==action?this._currFont.find("span").hasClass("ui-zfc-icon-tick")||this._currFont.find("span").addClass("ui-fcomponents-icon ui-icon-checkbox"):this._noFontsShown||(this._currFont.find("span").addClass("ui-fcomponents-icon ui-zfc-icon-close"),this._currFontType=this._myFonts)),"search"===action&&this._searchtoggleIcon.attr("class",this._searchClose),this._flag=!1,this._tempArray=[],this._fontsShown=!0,!this._toRefresh&&scrollPushEnabled)){var currScrollTop=$(this._fontList)[0].children[0].scrollTop;this._fontList.children(".ui-zscroll-child").animate({scrollTop:currScrollTop+100},200),this._fontList.zscroll("refresh")}},_createFontFaceCSS:function(fontFamily,fontPath,fWeight,fStyle,isFontPreview){fontPath=fontPath+"/"+(isFontPreview?"font_preview.":"font.")+this._suppWoffType,fontFamily+=isFontPreview?"preview":"",this._css+="@font-face{font-family:'"+fontFamily+"';font-weight:"+fWeight+";font-style:"+fStyle+"; src :local('"+fontFamily+"'),url('"+fontPath+"') format('"+this._suppWoffType+"');}"},_postAddition:function(tcount,initialCount){tcount-initialCount<this._displayCount&&(this._isFinished=!0,this._resetLoader()),this._toRefresh&&(this._appendList?this._fontsShown||this._fontList.add(this._previewContainer).css("opacity",.4):(this._noFonts(),this._fontList.add(this._previewContainer).css("opacity",1),this._searchtoggleIcon.attr("class",""!==this._searchBox.val()?this._searchClose:"ui-zfl-display-none")))},_resetLoader:function(){var base=this;clearInterval(this._loop),$("#ui-zfl-loader").remove(),this._fontList.on("scroll.zfontlibrary",function(e){var curTarget=$(e.target).children(".ui-zscroll-child");curTarget.scrollTop()&&curTarget[0].scrollHeight===curTarget.scrollTop()+400&&!base._isFinished&&base._getFurtherFonts()})},_getMyFonts:function(){for(var myFontsArray=[],selecFont=0;selecFont<FCWebFonts.length;selecFont++)FCWebFonts[selecFont].selected&&myFontsArray.push(FCWebFonts[selecFont].family);return myFontsArray},_setPreviewText:function(text){text?(this._default_value=text,this.options.previewText=text):this._default_value=this.options.previewText?this.options.previewText:"A quick brown fox jumps over the lazy dog."===this._getString("randomSentence1.label")?this._previewText[Math.floor(Math.random()*(this._previewText.length-1))]:this._getString("defaultSentence.label"),this._textArea.add($(this._backgroundSubjDiv)).val(this._default_value)},_loadFonts:function(fontPath,CustomData,onSuccess){return $.ajax({type:"GET",accepts:{font:"font/"+this._suppWoffType},url:fontPath,dataType:"font",beforeSend:function(xhr){xhr.overrideMimeType("font/woff2")},complete:function(){onSuccess&&setTimeout(function(){onSuccess(CustomData)},100)}})},_showError:function(msg){msg=""===msg||void 0===msg?this._getString("unknownerror.label"):msg,FCUtil.showError(msg,this._baseContainer,"#ui-zfl-main")},_getString:function(key,module,stringArray){return FCUtil.getI18NString(module?module:"zfontlibrary",key,stringArray,this.keys)},_triggerEvent:function(orgEvent,_ui){this._baseContainer.trigger("zfontlibrary"+orgEvent,_ui)},_refreshMyFonts:function(){var base=this,callbacks={progress:function(){},success:function(serverResponse){if(void 0!==serverResponse.myFonts){var myFonts=serverResponse.myFonts,array=myFonts.split(",");for(var i in FCWebFonts)for(var font=0;font<array.length;font++)FCWebFonts[i].family!==array[font]||FCWebFonts[i].selected||(FCWebFonts[i].selected=!0,base._myFontsCount++)}base._myFontsCount>=10&&base._myFontsCountContainer.width(30),base._myFontsCountContainer.children().text(base._myFontsCount),base._doRefresh=!0,$(base._currFontType).trigger("click.zfl")},fail:function(){}};this._getUserFonts(callbacks)},keys:{"minimize.label":"Minimize","maximize.label":"Maximize","fontlibrary.label":"Font Library","myFonts.label":"My Fonts","allFonts.label":"All Fonts","fontType1.label":"Serif","fontType2.label":"Sans Serif","fontType3.label":"Fixed width","fontType4.label":"Display","fontType5.label":"Decorative","fontType6.label":"Handwritten","fontType7.label":"Calligraphy","fontType8.label":"Others","cartoon.label":"Cartoon","gothic.label":"Gothic","typewriter.label":"Typewriter","comic.label":"Comic","retro.label":"Retro","fontSize.label":"Font Size","alphabets.label":"Aa","fontInfo.label":"Font Info","noFonts.label":"No Fonts","thin.label":"Thin","thinitalic.label":"Thin Italic","extralight.label":"ExtraLight","ultralight.label":"Ultra Light","ultralightitalic.label":"Ultra Light Italic","light.label":"Light","lightitalic.label":"Light Italic","normal.label":"Normal","italic.label":"Italic","medium.label":"Medium","mediumitalic.label":"Medium Italic","semibold.label":"Semi Bold","semibolditalic.label":"Semi Bold Italic","bold.label":"Bold","bolditalic.label":"Bold Italic","extrabold.label":"Extra Bold","extrabolditalic.label":"Extra Bold Italic","black.label":"Black","blackitalic.label":"Black Italic","addToLibrary.label":"Add to My Fonts","removeFromLibrary.label":"Remove from My Fonts","defaultSentence.label":"ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz 0123456789","fontfamily.label":"Font Family","fontvariants.label":"Font Variants","fontcategory.label":"Font Category","language.label":"Languages","randomSentence1.label":"A quick brown fox jumps over the lazy dog.","randomSentence2.label":"Mr. Jock, TV quiz PhD, bags few lynx.","randomSentence3.label":"The five boxing wizards jump quickly.","randomSentence4.label":"Pack my box with five dozen liquor jugs.","randomSentence5.label":"Jackdaws love my big sphinx of quartz.","randomSentence6.label":"Jack amazed a few girls by dropping the antique onyx vase.","randomSentence7.label":"A quick movement of the enemy will jeopardize six gunboats.","updateerror.label":"Sorry! Unable to update My Fonts list due to an unknown error.","unknownerror.label":"Sorry! We are unable to get My Fonts list due to an unknown error. Please try to again after some time."}};return{open:function(data){if(dialogOpen){var zflEle=$("#ui-zfl-container").parent();zflEle.hasClass("ui-dialog-minimized")&&zflEle.find(".ui-dialog-titlebar-minimize").trigger("click")}else fontLibrary._create(data)},close:function(){dialogOpen&&(dialogOpen=!1,fontLibrary._close())},setPreviewText:function(text){dialogOpen&&fontLibrary._setPreviewText(text)},getMyFonts:function(){return dialogOpen?fontLibrary._getMyFonts():void 0},getFontDetails:function(fontName){return dialogOpen?fontLibrary._getFontDetails(fontName):void 0}}}(window.jQuery),ZFeedback=function($){var dialogOpen=!1,zfeedbackKeys={"minimize.label":"Minimize","maximize.label":"Maximize","cancel.label":"Cancel","send.label":"Send","resend.label":"Resend","feedback.label":"Feedback","criticality.label":"Criticality","howcritical.label":"How critical is your feedback?","normal.label":"None","low.label":"Just FYI","medium.label":"Nothing urgent, can wait","high.label":"Emergency","subject.label":"Subject","comments.label":"Your Comments...","attachfile.label":"Attach File","screengrab.label":"Grab Screen","sending.label":"Sending...","thankyou.label":"Thank you","writesome.label":"Please write something...","invalidsizemessage.label":"File size exceeds the maximum allowed attachments limit of {0}.","removefile.label":"Remove","sendrequest.label":"Send Your Request","description.label":"Description","howcriticalrequest.label":"How critical is your request?","cancelfeedback.label":"Do you want to cancel this feedback?","cancelrequest.label":"Do you want to cancel this request?","alertmessage.label":'Press "OK" to proceed. "Cancel" to stay.',"screenshot.label":"Screenshot","unknownerror.label":"Sending failed due to an unknown error","close.label":"Close","viruspresent.label":"Virus found","collapse.label":"Collapse","expand.label":"Expand","attachments.label":"Attachments","tip.label":"Tip","usekeyboardshortcuts.label":"To grab the screen directly from the application window, use the below keyboard shortcuts","capturefullscreen.label":"Capture full screen","capturepartofscreen.label":"Capture part of the screen","unknownerrortext.label":"Unknown error","virusdetected.label":"Virus detected in the attached file. Please remove it.","virusdetectedinfile.label":"Virus detected in {0}. Please remove it.","unknownerrorinfile.label":"Unable to attach {0} due to an unknown error.","multiplefileserror.label":"{0} file(s) failed to upload. Please refer below for the reasons.","fileuploadinprogress.label":"File upload is in progress. Please send after it is complete.","multiplefilesuploadinprogress.label":"Uploading {0} files. Please send after they are complete."},zfeedbackDEFAULTS={minHeight:350,maxHeight:550,formType:"support",attachment:!0,criticality:!0,screengrabber:!0,attachmentURL:void 0,submitURL:void 0,customData:void 0,sendTo:"noreply@zohocorp.com",customHeaders:{}},zfeedback={widgetEventPrefix:"zfeedback",_EVENTS:{ONOPEN:"open",BEFORESEND:"beforesend",ONSEND:"send",ONSENDING:"sending",ONCLOSE:"close"},_isScreengrabberOpen:!1,_create:function(options){var base=this;this._formData={criticalType:"",mailSubject:"",mailContent:"",randomNumber:""},this.options=$.extend({},zfeedbackDEFAULTS,options),this._haveCustomKeys=void 0!==this.options.keys,this._customKeys=this.options.keys,this.options.keys=$.extend({},zfeedbackKeys,this.options.keys),this._windowObj=$(window),this._documentObj=$(document);var windowHeight=this._windowObj.innerHeight();this._dialogHeightAdjustment();var dialogWidth=530;dialogOpen=!0,this._dialogTop=windowHeight-this._dialogHeight;var dialogLeft=this._windowObj.innerWidth()-(dialogWidth+140);this.options.customData?this._feedbackData={sendTo:this.options.sendTo}:(this._feedbackData={sendTo:this.options.sendTo},this._feedbackData[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken()),this._contextPath=FComponents.option("contextPath"),this.options.postURL&&(this._contextPath=this.options.postURL),(this.options.attachmentURL||this.options.postURL)&&(this._externalAttachmentURL=!0),(this.options.submitURL||this.options.postURL)&&(this._externalSubmitURL=!0),this._isTooltipComponentUsed=this._documentObj.data("zZtooltip")?!0:!1,this.options.proxyURL=(this.options.attachmentURL?this.options.attachmentURL.substring(0,this.options.attachmentURL.lastIndexOf("/")+1):this._contextPath)+"proxy.do",this.options.fileActionURL=this.options.attachmentURL?this.options.attachmentURL:this._contextPath+"fileaction.do",this._fileData={},this._overallArray=[],this._currAttachmentSize=0,this._attachmentArray=[],this._originalEvent=!1,this._dialogDragged=!1,this._isIE=!1,this._filesPending=!1,this._isEnterDisabled=!1,this._isFeedbackCancelled=!1,this._screengrabberAttached=!1,this._isSuccessful=!1,this._maxAllowedSize=15728640,this._canvasQuart=Math.PI/2,this._canvasCirc=2*Math.PI,this._IE=!1,this._randomNumber=this._randomString(),this._isMacOS()?(this._fullScreen=["Command","Option","Shift","3"],this._partialScreen=["Command","Option","Shift","4"]):(this._fullScreen=["Ctrl","Alt","PrtSc"],this._partialScreen=["Ctrl","Shift","PrtSc"]),this._screenshotCount=0,this._totalScreenshotCount=0,this._fileCount=0,this._uploadedCount=0,this._feedbakDialog=$("<div>").attr({id:"zfeedbackDialog"}).appendTo($("body")),this._feedbakDialog.zdialog({modal:!1,minimizable:!0,position:[dialogLeft,windowHeight],closeOnEscape:!0}),this._feedbakDialog.dialog("option",{width:dialogWidth,height:this._dialogHeight,dialogClass:"ui-zfeedback",minWidth:400,minHeight:this.options.minHeight,resizable:!1,beforeClose:function(ev){return base._checkClose(ev)?void 0:!1},close:function(){base._close()}}),this._feedbackUiDialog=this._feedbakDialog.closest(".ui-dialog").attr("id","ui-zfeedback-dialog"),this._titlebar=this._feedbackUiDialog.find(".ui-dialog-titlebar"),this._createFeedbackContainer(),this._feedbakDialog.dialog("open"),this._dialogPosition={},this._feedbackUiDialog.css({opacity:0,top:this._dialogTop+200,left:"auto",right:"120px"}).animate({top:this._dialogTop,opacity:1},300,"easeInSine",function(){base._resizeTextArea(),$(this).css({top:$("#ui-zfeedback-dialog").offset().top,height:base._dialogHeight}),base._dialogPosition.left=base._feedbackUiDialog.offset().left,base._dialogPosition.top=base._feedbackUiDialog.offset().top}),this._feedbackUiDialog.find(".ui-dialog-titlebar .ui-icon").removeClass("ui-icon ui-components-icon").addClass("ui-fcomponents-icon").text(""),this._feedbackUiDialog.find(".ui-dialog-titlebar .ui-dialog-titlebar-close").first().attr("title",this._getString("cancel.label")).find("span.ui-icon-closethick").attr("class","ui-fcomponents-icon ui-zfc-icon-closethick"),this._isPlaceholder&&this._feedbackSubject.trigger("focusout.placeholder"),this._triggerEvent(this._EVENTS.ONOPEN),this._minimizeBtn=this._titlebar.find(".ui-dialog-titlebar-minimize").attr("title",base._getString("minimize.label")),$("body").on("screengrabberopen",function(){$("#ui-zfeedback-dialog").hide()}).off("screengrabberclose").on("screengrabberclose",function(){$("#ui-zfeedback-dialog").show(),base._isScreengrabberOpen=!1,!base._screengrabberAttached&&base._screenshotFallEle&&base._screenshotFallEle.remove(),base._focussedEle=$(base._screenGrabLabel)[0],$(base._focussedEle).focus(),base._screengrabberAttached=!1,$("body").off("screengrabberdone")})},_checkClose:function(ev){return this._originalEvent?!0:ev.originalEvent&&"keydown"===ev.originalEvent.type&&(this._criticalPopup.is(":visible")||this._isScreengrabberOpen)?!1:this._screenshotSize||this._fileSize||this._feedbackSubject.val()||this._feedbackCommentArea.val()||this._currAttachmentSize?(this._alertDialog(),$(".ui-alert-dialog").css({top:"50%",left:"50%","margin-left":"-200px","margin-top":"-110px"}),$(".ui-alert-dialog .ui-dialog-content").css({padding:"0px !important"}),void 0):!0},_alertDialog:function(){var base=this;ZComponents.showMessageDialog({type:"warning",secondary:base._getString(base._cancelForm+".label"),icon:"ui-zalert-warning",commandType:"yes-no",onClose:function(args){args.isCancel||(base._currAttachmentSize&&base._removeAllFiles(),base._close())}})},_close:function(){dialogOpen=!1,$("body").off("mousedown.zfeedback"),$("body").off("mousedown.errorBanner"),this._feedbakDialog.off("keydown.zfeedback"),this._triggerEvent(this._EVENTS.ONCLOSE),this._feedbakDialog.remove()},close:function(){this._close()},_createFeedbackContainer:function(){var base=this,title="sendrequest",content="description",criticality="howcriticalrequest";this._cancelForm="cancelrequest";var dialogTitle=this._feedbackUiDialog.find(".ui-dialog-titlebar .ui-dialog-title");if(this._feedbackForm=$("<div>").attr("id","ui-zfb-form").appendTo(this._feedbakDialog),this._feedbackFormTop=$("<div>").attr("id","ui-zfb-form-top").appendTo(this._feedbackForm),"feedback"==this.options.formType&&(title="feedback",content="comments",criticality="howcritical",this._cancelForm="cancelfeedback"),this._feedbakDialog.dialog("option","title",this._getString(title+".label")),this._errorBanner=$("<div>").attr("class","ui-zfb-error-unknown").html("<span>"+this._getString("unknownerror.label")+'</span><label><span class = "ui-fcomponents-icon ui-zfc-icon-closethick"> </span></label>'),this._feedbakDialog.prepend(this._errorBanner),this._errorBanner.on("mouseenter.zfeedback",function(){$(this).find("span.ui-zfc-icon-closethick").show()}).on("mouseleave.zfeedback",function(){$(this).find("span.ui-zfc-icon-closethick").hide()}),this._feedbackSubject=$("<input>").attr({id:"zfb-input-subject",type:"text",tabindex:1,maxlength:500}).appendTo(this._feedbackFormTop),this._focussedEle=this._feedbackSubject[0],this._overallArray.push($(this._feedbackSubject)[0]),this._isPlaceholder=void 0===this._feedbackSubject[0].placeholder||null===this._feedbackSubject[0].placeholder||-1!==navigator.appVersion.indexOf("MSIE 10."),this._feedbackFormMiddle=$("<div>").attr("id","ui-zfb-form-middle").appendTo(this._feedbackForm),this._feedbackCommentArea=$("<textarea>").attr({id:"zfb-input-message",tabindex:2,maxlength:1e4}).appendTo(this._feedbackFormMiddle),this._overallArray.push($(this._feedbackCommentArea)[0]),this._feedbackSubject.add(this._feedbackCommentArea).on("keypress.feedback paste.feedback",function(){setTimeout(function(){base._isErrorShown&&(base._isPlaceholder?base._subjectText.attr("class","ui-zfb-placeholder").text(base._getString("subject.label")):base._feedbackSubject.attr({placeholder:base._getString("subject.label"),"class":""}))},1)}),this._isPlaceholder){this._subjectText=$("<div>").attr("class","ui-zfb-placeholder").text(this._getString("subject.label")),this._feedbackFormTop.prepend(this._subjectText),this._placeHolder(this._feedbackSubject,this._subjectText);var commentText=$("<div>").attr("class","ui-zfb-placeholder").text(this._getString(content+".label"));this._feedbackFormMiddle.prepend(commentText),this._placeHolder(this._feedbackCommentArea,commentText)}else this._feedbackSubject.attr("placeholder",this._getString("subject.label")),this._feedbackCommentArea.attr("placeholder",this._getString(content+".label"));this._attachmentContainer=$("<div>").attr("id","ui-ztb-form-attach-container").appendTo(this._feedbackForm),this._attachmentHeader=$("<div>").attr("class","ui-ztb-form-attach-header ").appendTo(this._attachmentContainer),this._attachmentInner=$("<div>").attr("class","ui-ztb-form-attach-inner").appendTo(this._attachmentContainer),this._attachmentCount=$("<div>").attr("class","ui-ztb-form-attach-count").append("<b>"+base._getString("attachments.label")+" ("+base._uploadedCount+")</b>").appendTo(this._attachmentHeader),this._attachmentTempHeader=$("<div>").attr("class","ui-ztb-form-attach-temp-header").appendTo(this._attachmentContainer),this._attachmentErrorHeader=$("<div>").attr("class","ui-zfb-form-attach-errorheader").append('<div><span class="ui-fcomponents-icon ui-zfc-icon-feedback-attachmentheader-error"></span> <div class = "ui-zfb-form-error-headertext"></div></div>').appendTo(this._attachmentHeader),this._isPlaceholder||-1!==navigator.appVersion.indexOf("MSIE 10.")?(this._isIE=!0,this._attachmentHeader.addClass("ui-zfb-transform-unsupported"),this._attachmentCount.css({top:"0px",position:"relative"}),this._attachmentErrorHeader.css({top:"-62px",position:"relative"})):(this._attachmentHeader.addClass("flip-to-top cube"),this._attachmentCount.addClass("default-state"),this._attachmentErrorHeader.addClass("active-state")),$('<span class = "ui-fcomponents-icon ui-zfc-icon-feedback-attachmentheader-collapse"></span>').attr("title",this._getString("collapse.label")).appendTo(this._attachmentCount),this._feedbackFormBottom=$("<div>").attr("id","ui-zfb-form-bottom").appendTo(this._feedbackForm),this._fileContainer=$("<div>").attr("id","ui-zfb-form-others").appendTo(this._feedbackFormBottom);var invalidSizeMessage="";if((this.options.screengrabber||this.options.attachment)&&(invalidSizeMessage=base._getString("invalidsizemessage.label","zfeedback",[this._bytesToSize(this._maxAllowedSize)])),this.options.attachment){var uploadTooltip='{"componentOptions":{"content":"'+this._getString("attachfile.label")+'","callout":"south"}}';this._isTooltipComponentUsed||(uploadTooltip=this._getString("attachfile.label")),this._uploadLabel=$("<label>").attr({title:uploadTooltip,tabindex:3}).appendTo(this._fileContainer),this._overallArray.push($(this._uploadLabel)[0]),this._uploadBtn=$("<input>").attr({type:"file",id:"ui-zfb-file",name:"fileAttachment",multiple:""}).appendTo(this._uploadLabel);{$("<span>").attr("class","ui-fcomponents-icon ui-zfc-icon-attach").appendTo(this._uploadLabel)}this._uploadBtn.on("change.feedback",function(ev){var file,fileSize,mimeType;if("undefined"!=typeof FileReader)for(var i=0;i<base._uploadBtn[0].files.length;++i){var targetELe=ev.originalEvent.target||ev.originalEvent.srcElement;if(file=targetELe.files[i],fileSize=file.size,mimeType=file.type,base._currAttachmentSize+=fileSize,invalidSize=base._currAttachmentSize>base._maxAllowedSize?!0:!1)return base._clearFile($(this)),base._currAttachmentSize-=fileSize,ZComponents.showMessageDialog({type:"alert",secondary:invalidSizeMessage,icon:"ui-zalert-error"}),$(".ui-alert-dialog").css({top:"50%",left:"50%","margin-left":"-200px","margin-top":"-110px"}),!1;base._attachFile(file.name,fileSize,mimeType,file)}else{file=base._uploadBtn[0],fileSize=file.size,mimeType=file.type,base._currAttachmentSize+=fileSize;var path=document.getElementById("ui-zfb-file").value,fileName=path.match(/[^\/\\]+$/);base._attachFile(fileName[0],fileSize,mimeType,file)}setTimeout(function(){base._notSupportedBrowser=!1,base._virusPresent=!1},2e3)}),this._errorBanner.find("label").on("click",function(){$(this).parent().fadeOut(300)}),this._feedbakDialog.on("drop.feedback",function(ev){ev.preventDefault(),ev.stopPropagation()}).on("dragenter.feedback dragover.feedback",function(ev){ev.preventDefault()})}if(this.options.screengrabber){this._toolTipContainer=$("<div>").attr("id","ui-zsg-toolTipContainer").appendTo("body"),$("<span>").text(this._getString("screengrab.label")).appendTo(this._toolTipContainer),$("<span>").attr("class","ui-zfb-tooltip-grabscreen-iconholder").append($("<span>").addClass("ui-fcomponents-icon ui-zfc-icon-feedback-tip")).appendTo(this._toolTipContainer);var _screenGrabTooltip='{"componentOptions":{"content":"ui-zsg-toolTipContainer", "contentType": "html","isContentElementId":true,"callout":"south","containerClass":"ui-zfb-tooltip-grabscreen","autohide":false}, "noautohide" :true}';this._isTooltipComponentUsed||(_screenGrabTooltip=this._getString("screengrab.label")),this._screenGrabLabel=$("<label>").attr({id:"screenGrabLabel",title:_screenGrabTooltip,tabindex:4}).appendTo(this._fileContainer),this._overallArray.push($(this._screenGrabLabel)[0]),$("<span>").attr("class","ui-fcomponents-icon ui-zfc-icon-screengrabber").add($("<input style= display:none;>")).appendTo(this._screenGrabLabel),this._screenGrabLabel.on("click",function(orgEvent){base.options.criticality&&base._criticalPopup.is(":visible")&&base._criticalPopup.fadeOut(100),orgEvent.preventDefault(),orgEvent.stopPropagation(),base._attachScreenGrab()}).on("mouseenter.feedback",function(){$("#ui-zsg-toolTipContainer").removeClass("ui-zfb-tip-icon-hide")}),this._screenGrabLabel.on("mousedown mouseup",function(orgEvent){orgEvent.preventDefault(),orgEvent.stopPropagation()}),this._documentObj.on("click.feedback",".ui-ztooltip.ui-zfb-tooltip-grabscreen .ui-zfc-icon-feedback-tip",function(){if(!base._overalDiv||!base._overalDiv.is(":visible")){var toolTipEle=$(".ui-ztooltip.ui-zfb-tooltip-grabscreen");base._shortcutKeyNotify(toolTipEle,!1,!0)}}).on("mouseleave.feedback",".ui-ztooltip.ui-zfb-tooltip-grabscreen",function(){$(this).hide()})}if(this.options.criticality){var _criticalityTooltip='{"componentOptions":{"content":"'+this._getString("criticality.label")+'","callout":"south"}}';this._isTooltipComponentUsed||(_criticalityTooltip=this._getString("criticality.label"));var criticalStatus=$("<label>").append("<input></input>").appendTo(this._fileContainer).attr({"class":"ui-zfb-criticality-button",title:_criticalityTooltip,tabindex:5}).on("click",function(){base._criticalPopup.is(":visible")||($("body").on("mousedown.base._criticalpopup",function(e){$(this).off("mousedown.base._criticalpopup"),setTimeout(function(){base._criticalPopup.fadeOut(100),criticalStatus.removeClass("ui-zfb-field-focus")},200),e.target===criticalStatus[0]&&e.preventDefault(),base._feedbakDialog.off("keydown.base._criticalpopup")}),base._feedbakDialog.on("keydown.base._criticalpopup",function(e){return 27===e.which||13===e.which||9===e.which?($("body").trigger("mousedown.base._criticalpopup"),$(this).off("drag.base._criticalpopup")):40===e.which?criticalPopupUl.find("li.ui-zfb-critical-selected").next().trigger("mousedown.li"):38===e.which&&criticalPopupUl.find("li.ui-zfb-critical-selected").prev().trigger("mousedown.li"),!1}),base._criticalPopup.css({bottom:base._feedbackFormBottom.outerHeight()+1}).fadeIn(100),criticalStatus.addClass("ui-zfb-field-focus"))});this._overallArray.push($(criticalStatus)[0]),this.optionList={normal:this._getString("normal.label"),low:this._getString("low.label"),medium:this._getString("medium.label"),high:this._getString("high.label")},this._criticalPopup=$("<div>").attr("class","ui-zfb-critical-popup").appendTo(this._feedbackFormBottom);var criticalPopupUl=($("<span>").text(this._getString(criticality+".label")).appendTo(this._criticalPopup),$("<ul>").appendTo(this._criticalPopup));for(var option in this.optionList)criticalPopupUl.append($("<li>").attr("criticality-level",option).text(this.optionList[option]).append($("<div>")));this._formData.criticalType="",criticalPopupUl.find("li").on("mousedown.li",function(){var rectangle=$(this).children("div");criticalPopupUl.find("div").css("background-color",""),rectangle.css("background",""),criticalPopupUl.find("li").removeClass("ui-zfb-critical-selected"),$(this).addClass("ui-zfb-critical-selected");var criticality=$(this).attr("criticality-level");criticalStatus.attr("criticality-level",criticality),base._formData.criticalType="normal"===criticality?"":base.optionList[criticality],setTimeout(function(){rectangle.css("background-color",rectangle.css("border-left-color"))},20)});var className="ui-zfb-critical-popup-arrow";this.options.screengrabber&&this.options.attachment||(className="ui-zfb-critical-popup-arrow ui-zfb-arrow-leftdjustment");{$("<div>").attr("class",className).appendTo(this._criticalPopup)}criticalPopupUl.find("li:first-child").trigger("mousedown.li")}$("body").on("mousedown.zfeedback",function(e){var temp;base._focussedEle&&$(base._focussedEle).removeClass("ui-zfb-field-focus"),temp="span"==e.target.tagName.toLowerCase()||"file"==e.target.tagName.toLowerCase()?$(e.target).parent():$(e.target),base._overallArray.indexOf($(temp)[0])>-1&&(base._focussedEle=temp)}),base._feedbakDialog.on("keydown.zfeedback",function(e){if(9!==e.which||e.shiftKey)if(e.shiftKey&&9==e.keyCode){do base._tabNavigation(e,!0);while(!$(base._focussedEle).is(":visible"))}else 13===e.which&&$(base._focussedEle).is(":visible")&&(1!==base._overallArray.indexOf($(base._focussedEle)[0])&&e.preventDefault(),base._isEnterDisabled||$(base._focussedEle).trigger("click",!0));else do base._tabNavigation(e);while(!$(base._focussedEle).is(":visible"))}),this._feedbackUiDialog.off("dialogdragstop").on("dialogdragstop",function(){base._dialogDragged=!0,base._dialogPosition.left=base._feedbackUiDialog.offset().left,base._dialogPosition.top=base._feedbackUiDialog.offset().top}),this._flipOver=void 0,this._zfeedbackSendbutton=$("<button>").attr("tabindex",6).text(base._getString("send.label")).appendTo(this._fileContainer).on("click",function(){if(clearTimeout(base._flipOver),clearTimeout(base._removeHeader),base._errorBanner.css("top","-36px").hide(),0!==base._feedbackSubject.val().length||0!==base._feedbackCommentArea.val().length)if(base._attachmentInner.find(".ui-ztb-filename-container").hasClass("ui-zfb-file-error"))base._attachmentErrorHeader.children().animate({"margin-left":6},50).animate({"margin-left":-6},50).animate({"margin-left":6},50).animate({"margin-left":-6},50).animate({"margin-left":0},50),base._attachmentInner.animate({scrollTop:base._attachmentInner.find(".ui-zfb-file-error:first").offset().top-base._attachmentInner.offset().top+base._attachmentInner.scrollTop()});else if(base._areAttachmentsPending())base._attachmentHeader.hasClass("flip-over")||base._attachmentHeader.hasClass("slide-down")?base._attachmentErrorHeader.children().animate({"margin-left":6},50).animate({"margin-left":-6},50).animate({"margin-left":6},50).animate({"margin-left":-6},50).animate({"margin-left":0},50):base._filesPendingHandle(),base._flipOver=setTimeout(function(){clearTimeout(base._flipOver),base._attachmentCount.show(),base._zfeedbackSendbutton.attr("disabled",!0),base._isIE?(base._slideAnimation(!0),base._attachmentHeader.removeClass("slide-down")):base._attachmentHeader.removeClass("flip-over"),base._removeHeader=setTimeout(function(){clearTimeout(base._removeHeader),base._attachmentErrorHeader.removeClass("ui-zfb-form-attach-pendingheader").find("span").removeClass("ui-zfc-icon-feedback-attachmentheader-info").addClass("ui-zfc-icon-feedback-attachmentheader-error"),base._zfeedbackSendbutton.attr("disabled",!1)},250)},2500);else{base._feedbackSubject.removeClass("ui-zfb-input-error"),$(this).attr("disabled",!0),base._isEnterDisabled=!0,base._triggerEvent(base._EVENTS.ONSENDING),base._sendFeedback();var formChanges=base._triggerEvent(base._EVENTS.BEFORESEND,base._feedbackData);base._feedbackData=$.extend({},base._feedbackData,formChanges);{var callbacks={progress:function(){},success:function(){base._isResponseReceived=!0,base._isSuccessful=!0,base._triggerEvent(base._EVENTS.ONSEND)},fail:function(){base._isResponseReceived=!0,base._isEnterDisabled=!1,base._isSuccessful=!1}},postURL=base.options.submitURL?base.options.submitURL:base._contextPath+"sendfeedback.do";base._submitRequest(postURL,base._feedbackData,callbacks,base._externalSubmitURL)}base._isErrorShown=!1}else{base._isIE?base._feedbackCommentArea.trigger("focus"):base._feedbackSubject.trigger("focus"),base._focussedEle=base._feedbackSubject;var currLeft=base._feedbackUiDialog.position().left;base._dialogDragged?base._feedbackUiDialog.animate({left:currLeft+6},50).animate({left:currLeft-6},50).animate({left:currLeft+6},50).animate({left:currLeft-6},50).animate({left:currLeft},50):base._feedbackUiDialog.animate({"margin-right":6},50).animate({"margin-right":-6},50).animate({"margin-right":6},50).animate({"margin-right":-6},50).animate({"margin-right":0},50),$(this).removeClass("ui-zfb-field-focus"),base._isPlaceholder?base._subjectText.addClass("ui-zfb-input-error").text(base._getString("writesome.label")):base._feedbackSubject.attr("placeholder",base._getString("writesome.label")),base._isErrorShown=!0,base._feedbackSubject.addClass("ui-zfb-input-error").off("focus.zfeedback").on("keypress.zfeedback",function(){base._isPlaceholder?base._subjectText.removeClass("ui-zfb-input-error").text(base._getString("subject.label")):base._feedbackSubject.removeClass("ui-zfb-input-error").attr("placeholder",base._getString("subject.label")),base._isErrorShown=!1})}}).on("keyup",function(ev){13!==ev.keyCode&&32!==ev.keyCode||0!==base._feedbackSubject.val().length&&0!==base._feedbackCommentArea.val().length||base._isPlaceholder||base._feedbackSubject.trigger("focus")}),this._overallArray.push($(this._zfeedbackSendbutton)[0]),this._feedbakDialog.on("zdialogminimize",function(){dialogTitle.addClass("ui-zfb-title-ellipsis"),dialogTitle[0].offsetWidth<dialogTitle[0].scrollWidth&&dialogTitle.attr("title",dialogTitle.text()),base._feedbackUiDialog.css({left:"auto",top:"auto"}),base._minimizeBtn.attr("title",base._getString("maximize.label"))}).on("zdialogmaximize",function(){dialogTitle.removeAttr("title").removeClass("ui-zfb-title-ellipsis"),base._minimizeBtn.attr("title",base._getString("minimize.label")),base._feedbackUiDialog.css({left:base._dialogPosition.left,top:base._dialogPosition.top})}),this._attachmentCount.on("click.zfeedback",function(){base._attachmentContainer.hasClass("ui-zfb-file-attach-collapse")?(base._attachmentContainer.add(base._attachmentCount.children("span").attr("title",base._getString("collapse.label"))).removeClass("ui-zfb-file-attach-collapse"),base._isAttachmentCollapsed=!1):(base._attachmentContainer.add(base._attachmentCount.children("span").attr("title",base._getString("expand.label"))).addClass("ui-zfb-file-attach-collapse"),base._isAttachmentCollapsed=!0),base._resetTextArea()}),this._attachmentInner.on("scroll.zfeedback",function(){base._attachmentInner.scrollTop()}),setInterval(function(){base._isOnline()?base._isConnectionFail&&(base._zfeedbackSendbutton.attr("disabled",!1).removeClass("ui-zfb-disable"),base._isConnectionFail=!1):base._isConnectionFail||(base._zfeedbackSendbutton.attr("disabled",!0).addClass("ui-zfb-disable"),base._isConnectionFail=!0)},5e3),this._windowObj.on("resize.zfeedback",function(){base._dialogDragged||(base._dialogHeightAdjustment(),base._feedbakDialog.dialog("option",{height:base._dialogHeight}),base._resizeTextArea(),base._resetTextArea())})},_tabNavigation:function(e,shiftPressed){if(e.preventDefault(),e.stopPropagation(),shiftPressed)0===this._overallArray.indexOf($(this._focussedEle)[0])?(this._zfeedbackSendbutton.addClass("ui-zfb-field-focus").focus(),prevEle=this._zfeedbackSendbutton):1===this._overallArray.indexOf($(this._focussedEle)[0])?($("#zfb-input-subject").focus(),prevEle=$("#zfb-input-subject")):this._overallArray.indexOf($(this._focussedEle)[0])>-1&&($(this._focussedEle).blur(),$(this._focussedEle).removeClass("ui-zfb-field-focus"),2===this._overallArray.indexOf($(this._focussedEle)[0])?($("#zfb-input-message").focus(),prevEle=$("#zfb-input-message")):prevEle=this._overallArray[this._overallArray.indexOf($(this._focussedEle)[0])-1],$(prevEle).addClass("ui-zfb-field-focus").focus()),this._focussedEle=prevEle;else{var nextEle,prevEle;0===this._overallArray.indexOf($(this._focussedEle)[0])?($(this._overallArray[this._overallArray.indexOf($(e.target)[0])+1]).focus(),this._focussedEle=$(this._overallArray[this._overallArray.indexOf($(e.target)[0])+1])):this._overallArray.indexOf($(this._focussedEle)[0])>=-1&&($(e.target).blur(),$(this._focussedEle).blur(),$(this._focussedEle).removeClass("ui-zfb-field-focus"),$(this._focussedEle)[0]===$(this._zfeedbackSendbutton)[0]?($("#zfb-input-subject").focus(),nextEle=$("#zfb-input-subject")):nextEle=this._overallArray[this._overallArray.indexOf($(this._focussedEle)[0])+1],$(nextEle).addClass("ui-zfb-field-focus").focus(),this._focussedEle=nextEle)}},_fetchImportStatus:function(ele,mimeType,file,screenshot){var base=this,data={action:"upload",screenGrabData:null,fileAttachment:null,randomNumber:this._randomNumber,attachmentSize:this._currAttachmentSize};screenshot?(data.screenGrabData=file,delete data.fileAttachment,base._screenshotCount=base._screenshotCount+1):(data.fileAttachment=file,delete data.screenGrabData,base._fileCount=base._fileCount+1),base._fileBorderAdjustment(),data.randomNumber=base._randomNumber+"-"+base._fileCount+"-"+base._screenshotCount,base._feedbackRandomNum=data.randomNumber,data.attachmentSize=data.attachmentSize-parseInt(ele.attr("fileSize")),ele.attr({fileID:data.randomNumber,mimeType:mimeType,uploaded:"pending"}).find(".ui-ztb-filename-label").addClass("ui-zfeedback-dim");var callbacks={customData:data,progress:function(e,customData){var percentage=customData.percentage,ele=base._attachmentInner.find($('.ui-ztb-filename-container[fileID="'+customData.randomNumber+'"]')),ctx=ele.data("context");ele.find(".ui-zfb-attachment-temp").hide(),ele.length&&100!==percentage&&base._canvasAnimatn(ctx,percentage/100)},success:function(resp,req,customData){var jsonResp=$.parseJSON(resp),stat=jsonResp.status;if("success"===stat&&"upload"===customData.action){var ele=base._attachmentInner.find($('.ui-ztb-filename-container[fileID="'+customData.randomNumber+'"]'));ele.find(".ui-zfb-attachment-temp").hide(),ele.find(".ui-ztb-filename-label").animate({top:"-9px"},300);var canvas=ele.find("canvas");canvas.hide(),ele.find(".ui-ztb-filename-size").css("opacity",1).animate({top:"-4px"},300),ele.is(":visible")&&(base._uploadedCount=base._uploadedCount+1,ele.attr("uploaded",!0)),base._attachmentCount.find("b").text(base._getString("attachments.label")+" ("+base._uploadedCount+")"),base._uploadedInfo=jsonResp.uploadedInfo;var uploadedFileSize=jsonResp.size;if(ele.is(":visible")){base._currAttachmentSize=base._currAttachmentSize+uploadedFileSize-parseInt(ele.attr("fileSize"));var fileName=ele.find(".ui-ztb-filename-label").text();ele.find(".ui-ztb-filename-label")[0].hasAttribute("title")&&(fileName=ele.find(".ui-ztb-filename-label").attr("title")),base._attachmentArray.push({fileID:ele.attr("fileID"),fileName:fileName,mimeType:ele.attr("mimeType")}),ele.find(".ui-ztb-filename-label").removeClass("ui-ztb--dim"),ele.attr("fileSize",uploadedFileSize).find(".ui-ztb-filename-size").text(base._bytesToSize(uploadedFileSize))}}else base._handleFileCase(resp,customData)},fail:function(resp,req,customData){base._handleFileCase(resp,customData)}},ctx=this._canvasInitialization(ele.find("canvas"),callbacks,"");ele.data("context",ctx);this._submitRequest(this.options.fileActionURL,data,callbacks,this._externalAttachmentURL)},_handleFileCase:function(resp,customData){var ele=this._attachmentInner.find($('.ui-ztb-filename-container[fileID="'+customData.randomNumber+'"]'));ele.attr("uploaded",!1).find(".ui-ztb-filename-label").animate({top:"-9px"},300),this._currAttachmentSize-=parseInt(ele.attr("fileSize"));var responseText=resp.trim(),jsonResp=$.parseJSON(responseText);jsonResp||(jsonResp={}),null!==jsonResp&&"VIRUS_DETECTED"===jsonResp.errorType?ele.attr("errorType","virus-error-detected"):ele.attr("errorType","unknown-error-detected"),this._errorCaseHandle(ele)},_updateProgress:function(evt,ele,percentComplete){evt&&evt.lengthComputable?ele.css("width",percentComplete+"%"):ele.css("background-color","#00BD9C").animate({width:"20%"},300)},_attachFile:function(fileName,size,mimeType,file){var base=this,ext=fileName.split(".").pop().toLowerCase();this._fileData.fileAttachment=file;var fileNameBox=$("<div>").attr({"class":"ui-ztb-filename-container",uploaded:!1,fileSize:size}),fileText=$("<div>").attr({"class":"ui-ztb-filename-label"}).text(fileName).appendTo(fileNameBox);$("<span>").attr("class"," ui-ztb-filename-size").text(base._bytesToSize(size)).appendTo(fileNameBox),fileNameBox.appendTo(this._attachmentInner),fileText.text(base._start_and_end(fileName,fileText)),this._attachmentInner[0].offsetWidth>this._attachmentInner[0].scrollWidth&&this._getScrollBarWidth()&&this._attachmentInner.find(".ui-ztb-filename-container").css({width:fileNameBox.outerWidth()-this._getScrollBarWidth()/2}),this._attachmentContainer.show(),base._isAttachmentCollapsed&&base._attachmentCount.trigger("click"),$("<span>").attr({"class":"ui-fcomponents-icon ui-zfc-icon-feedback-attachment-close",title:this._getString("removefile.label")}).appendTo(fileNameBox).on("click.zfeedback",function(){$(this).off("click.zfeedback"),base._uploadBtn[0].value="",base._fileData.fileAttachment=void 0,base._uploadLabel.show(),base._isAlertShown=!1,base._removeFile(!1,$(this).parent())});{var appendEle;$("<canvas>").attr({width:"60px",height:"43px"}).appendTo(fileNameBox)}if("png"!==ext&&"jpg"!==ext&&"jpeg"!==ext&&"gif"!==ext||"undefined"==typeof FileReader)appendEle=document.createElement("span"),$(appendEle).attr("class","ui-fcomponents-icon ui-zfc-icon-filetype-others ui-zfc-icon-filetype-"+ext),$('<div class = "ui-zfb-attachment-outerRing">').append(appendEle).appendTo(fileNameBox);else{appendEle=document.createElement("img"),$(appendEle).addClass("ui-icon-fileType-img"),$('<div class = "ui-zfb-attachment-outerRing">').append(appendEle).appendTo(fileNameBox);var reader=new FileReader;reader.onloadend=function(){appendEle.src=reader.result},reader.readAsDataURL(file)}$('<div class = "ui-zfb-attachment-temp">').appendTo(fileNameBox),this._attachmentInner.scrollTop(this._attachmentInner.prop("scrollHeight")),this._resizeTextArea(),this._resetTextArea(),this._fetchImportStatus(fileNameBox,mimeType,file,!1,!1)},_start_and_end:function(str,ele){return str.length>23?(ele.attr("title",str),str.substr(0,13)+"..."+str.substr(str.length-6,str.length)):str},_fileBorderAdjustment:function(){var count=this._attachmentInner.find(".ui-ztb-filename-container").length;count>=7&&($(this._attachmentInner.find(".ui-ztb-filename-container")[5]).removeClass("ui-zfb-fileName-removeBorder"),7===count&&$(this._attachmentInner.find(".ui-ztb-filename-container")[5]).addClass("ui-zfb-fileName-removeBorder"))},_adjustFileText:function(ele,str){ele.text("");var leftAdjus=$('<span class = "left-adjustment">').text(str),centerAdjus=$('<span class = "center-adjustment">').text("..."),rightAdjus=$('<span class = "right-adjustment">').text(str);leftAdjus.add(centerAdjus).add(rightAdjus).appendTo(ele)},_canvasInitialization:function(ele){var num=Math.random();ele.prev().show(),ele.attr("id","ui-zfb-canvas-"+num);var canvas=document.getElementById("ui-zfb-canvas-"+num);!function(){var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=requestAnimationFrame}();var context=canvas.getContext("2d");return context.lineWidth=15,context.strokeStyle="rgba(0,0,0,0.55)",context},_canvasAnimatn:function(context,current){context.clearRect(0,0,60,44),context.fillStyle="rgba(0,0,0,0.7)",context.fillRect(0,0,60,44),context.beginPath(),context.fillStyle="black",context.globalCompositeOperation="destination-out",context.arc(30,22,17,0,this._canvasCirc),context.closePath(),context.fill(),context.beginPath(),context.globalCompositeOperation="source-over",context.arc(30,22,7,-this._canvasQuart,this._canvasCirc*current-this._canvasQuart,!0),context.strokeStyle="rgba(0,0,0,0.7)",context.stroke()},_attachScreenGrab:function(){function setCookie(cname,cvalue){document.cookie=cname+"="+cvalue+"; "}function getCookie(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""}var base=this;errorType="",base._isScreengrabberOpen=!0,this._screenshotFallEle=$("<div>").attr({"class":"ui-ztb-filename-container",fileSize:1021121}).appendTo(this._attachmentInner);var canvasEle=$("<canvas>").attr({width:"60px",height:"43px"}).appendTo(this._screenshotFallEle);Screengrabber.open({targetObject:canvasEle,fetchImageURL:this.options.proxyURL}),$("body").off("screengrabberdone").on("screengrabberdone",function(event,ui){base._currImageSource=ui.imageSource,base._attachScreenshot(ui.imageSource,base._screenshotFallEle),base._screenshotFallEle=void 0,getCookie("screengrabberShortcut")||(setCookie("screengrabberShortcut",!0),setTimeout(function(){base._shortcutKeyNotify($(".ui-ztooltip.ui-zfb-tooltip-grabscreen"),!0)},1200))})},_attachScreenshot:function(imageSrc,targetObj){var base=this,size=1021121,mimeType="image/png";imageSrc&&(this._currImageSource=imageSrc),this._screengrabberAttached=!0,this._feedbackUiDialog.show();var fileNameBox,previewImg=$("<img>").attr({"class":"ui-zfeedback-imgpreview ui-zfb-screenshot-img",src:this._currImageSource});fileNameBox=targetObj?targetObj:$("<div>").attr({"class":"ui-ztb-filename-container",fileSize:size}),base._totalScreenshotCount=base._totalScreenshotCount+1,$("<span>").addClass("ui-ztb-filename-label").text(this._getString("screenshot.label")+"_"+base._totalScreenshotCount+".png").appendTo(fileNameBox),$("<span>").addClass("ui-ztb-filename-size").text(base._bytesToSize(size)).appendTo(fileNameBox),$("<span>").attr({"class":"ui-fcomponents-icon ui-zfc-icon-feedback-attachment-close",title:this._getString("removefile.label")}).appendTo(fileNameBox).on("click",function(){base._isAlertShown=!1,base._fileData.screenGrabData=void 0,base._removeFile(!0,$(this).parent())});$("<canvas>").attr({width:"60px",height:"43px"}).appendTo(fileNameBox);$('<div class = "ui-zfb-attachment-outerRing">').append(previewImg).appendTo(fileNameBox),fileNameBox.appendTo(this._attachmentInner),base._isAttachmentCollapsed&&base._attachmentCount.trigger("click"),this._attachmentInner[0].offsetWidth>this._attachmentInner[0].scrollWidth&&this._getScrollBarWidth()&&this._attachmentInner.find(".ui-ztb-filename-container").css({width:fileNameBox.outerWidth()-this._getScrollBarWidth()/2}),this._attachmentContainer.show(),this._resetTextArea(),this._attachmentInner.scrollTop(this._attachmentInner.prop("scrollHeight")),this._currAttachmentSize+=size,this._fetchImportStatus(fileNameBox,mimeType,this._currImageSource,!0),this._isScreengrabberOpen=!1},_shortcutKeyNotify:function(ele){var base=this,className="ui-zfb-info";this.options.attachment||(className="ui-zfb-info ui-zfb-screengrabber-only"),base._feedbackFormBottom.addClass(className),ele.hide(),this._overalDiv=$("<div>").attr("class","ui-zsg-shortcut-overaldiv"),this._outerTipContainer=$("<div>").attr("class","ui-zsg-outer-tipcontainer");{var tipClose=$("<span>").attr({"class":"ui-fcomponents-icon ui-zfc-icon-feedback-tip-close",title:this._getString("close.label")}).appendTo(this._outerTipContainer),tipContainer=$("<div>").attr("class","ui-zfb-tip-container").appendTo(this._outerTipContainer),tipNotifier=$("<div>").attr("class","ui-zfb-tip-notifier").appendTo(tipContainer);$("<span>").attr("class","ui-zfb-tip-ele").text(this._getString("tip.label")+":").appendTo(tipNotifier)}$("<span class = ui-zfb-tip-info></span>").text(this._getString("usekeyboardshortcuts.label")+":").appendTo(tipNotifier);var captureCentreContainer=$("<div>").attr("class","ui-zfb-capture-center-container").appendTo(tipContainer),captureContainer=$("<div>").attr("class","ui-zfb-capture-container").appendTo(captureCentreContainer);4===this._partialScreen.length&&4===this._fullScreen.length&&captureContainer.addClass("four");var captureFullScreenContainer=$("<div class = ui-zfb-capture-fullScreen></div>").appendTo(captureContainer);$("<b class = ui-zfb-fullscreen-capture-text>"+this._getString("capturefullscreen.label")+"</b>").appendTo(captureFullScreenContainer);var div1=$('<div class = "fullscreen-keys">').appendTo(captureFullScreenContainer),separator=$("<span class = ui-zfb-fullscreen-capture-separator>").text("-").appendTo(div1);$(this._tipFormat(this._fullScreen)).appendTo(div1);var capturePartialScreenContainer=$("<div class = ui-zfb-capture-partialScreen></div>").appendTo(captureContainer);$("<b class = ui-zfb-partial-capture-text>"+this._getString("capturepartofscreen.label")+"</b>").appendTo(capturePartialScreenContainer);var div2=$('<div class = "partialscreen-keys">').appendTo(capturePartialScreenContainer);separator.clone().appendTo(div2),$(this._tipFormat(this._partialScreen)).appendTo(div2),base._feedbackFormMiddle.add(base._feedbackFormBottom).addClass("ui-zsg-tipnotifier-pushup"),this._overalDiv.append(this._outerTipContainer).appendTo(this._feedbackFormBottom);var attachmentHeight=0;this._attachmentContainer.is(":visible")&&(attachmentHeight=this._attachmentContainer.outerHeight(!0));var scrollBarWidth=this._getScrollBarWidth();captureCentreContainer.css({"margin-left":parseInt(captureCentreContainer.css("margin-left"))-scrollBarWidth,"margin-right":parseInt(captureCentreContainer.css("margin-right"))-scrollBarWidth});var textAreaHeight=this._textAreaHeight-attachmentHeight-this._overalDiv.outerHeight();32>=textAreaHeight&&(textAreaHeight=30,this._attachmentInner.addClass("ui-zfb-maxheight-adjustment"),this._attachmentInner[0].offsetWidth>this._attachmentInner[0].scrollWidth&&this._getScrollBarWidth()&&this._attachmentInner.find(".ui-ztb-filename-container").css({width:265-this._getScrollBarWidth()/2}),this._attachmentContainer.is(":visible")&&(attachmentHeight=this._attachmentContainer.outerHeight(!0)));var tipHeight=this._textAreaHeight-attachmentHeight-textAreaHeight;tipHeight>193&&(tipHeight=193),this._overalDiv.height(tipHeight),textAreaHeight=this._textAreaHeight-attachmentHeight-tipHeight,this._feedbackFormMiddle.dequeue().animate({height:textAreaHeight},500);tipClose.on("click",function(){base._feedbackFormBottom.removeClass("ui-zfb-info ui-zfb-screengrabber-only");var tcontainer=base._overalDiv;setTimeout(function(){tcontainer.css({borderRadius:"100%"})},350),tipClose.hide();tcontainer.dequeue().animate({width:"17px",height:"17px",left:"140px",padding:"0px"},400,"linear",function(){var left=90;base.options.attachment||(left=50);var timeout,innerTimeout;tcontainer.dequeue().css({overflow:"hidden"}).animate({top:-60,left:left},600,"linear",function(){tcontainer.hide(),clearTimeout(timeout),clearTimeout(innerTimeout);var toolTipEle=$(".ui-ztooltip.ui-zfb-tooltip-grabscreen:visible");toolTipEle.find(".ui-zfb-tooltip-grabscreen-iconholder").addClass("yellow").animate({height:"16px"},600,"easeInSine"),timeout=setTimeout(function(){toolTipEle.find(".ui-zfb-tooltip-grabscreen-iconholder").removeClass("yellow"),innerTimeout=setTimeout(function(){tcontainer.remove(),$("#ui-zsg-toolTipContainer").removeClass("ui-zfb-tip-icon-hide"),toolTipEle.find("#ui-zsg-toolTipContainer").removeClass("ui-zfb-tip-icon-hide").find(".ui-zfb-tooltip-grabscreen-iconholder").css("height",""),toolTipEle.hide()},1e3)},1200)})}),base._feedbackFormMiddle.add(base._feedbackFormBottom).removeClass("ui-zsg-tipnotifier-pushup"),base._attachmentInner.removeClass("ui-zfb-maxheight-adjustment");var divHeight=base._resetTextArea(!0);base._feedbackFormMiddle.dequeue().animate({height:divHeight},600,"linear",function(ev){{var ele=$(".ui-zfc-icon-screengrabber").parent();ele.offset().left}$("#ui-zsg-toolTipContainer").addClass("ui-zfb-tip-icon-hide");var ev={target:base._screenGrabLabel[0]};base._isTooltipComponentUsed&&base._documentObj.ztooltip("show",ev,base._screenGrabLabel)})})},_sendFeedback:function(){{var base=this;this._isMacOS()?100:400}this._feedbackUiDialog.add(this._feedbakDialog).add($(this._feedbackFormBottom.find("#ui-zfb-form-others"))).css("overflow","visible !important"),this._feedbakDialog.height("auto");var bottomValue=$(window).height()-(this._dialogHeight+this._feedbackUiDialog.offset().top);base._feedbackUiDialog.css({top:"auto",bottom:bottomValue});var bottomValue=$(window).height()-(this._dialogHeight+this._feedbackUiDialog.offset().top);if(base._feedbackUiDialog.addClass("scaling"),setTimeout(function(){var offSetLeft=base._feedbackUiDialog.offset();base._feedbackUiDialog.css("opacity",0);{var sendingLabel=$("<div class = ui-zfb-sending-label >").css({left:offSetLeft.left}).append("<a>"+base._getString("sending.label")+"</a>").appendTo("body");$(window).height()-base._dialogHeight+parseInt(base._feedbackUiDialog.css("top"))}sendingLabel.find("a").queue(function(){$(this).addClass("fadeout").dequeue()});var responseTimeout,response=setInterval(function(){base._isResponseReceived&&(clearTimeout(responseTimeout),base._isSuccessful?(sendingLabel.find("a").removeClass("fadeout"),setTimeout(function(){sendingLabel.find("a").text(base._getString("thankyou.label")).addClass("fadeout").show();{var hide=function(){sendingLabel.animate({bottom:-50,opacity:.2},300,function(){$(this).remove(),base._originalEvent=!0,base._feedbakDialog.dialog("close")})};setTimeout(function(){hide()},1500)}},400)):sendingLabel.animate({opacity:.2},300,function(){$(this).remove(),base._dialogTop=base._windowObj.innerHeight()-base._dialogHeight,base._feedbackUiDialog.removeClass("scaling").css({opacity:0,top:base._dialogTop+base._dialogHeight}).animate({top:base._dialogTop,opacity:1},500,"easeInSine",function(){$(this).css({top:"auto",bottom:0,height:base._dialogHeight}),base._zfeedbackSendbutton.attr("disabled",!1).removeClass("ui-zfb-disable").addClass("ui-zfb-field-focus").text(base._getString("resend.label")).focus(),base._isEnterDisabled=!1,base._focussedEle=base._zfeedbackSendbutton,base._errorBanner.css({display:"block"}).animate({top:"0px"},300,function(){$("body").on("mousedown.errorBanner",function(){$(this).off("mousedown.errorBanner"),base._errorBanner.fadeOut(200)})})})}),clearInterval(response))},2500);responseTimeout=setTimeout(function(){base._isResponseReceived||(base._isSuccessful=!0,base._isResponseReceived=!0)},5100)},800),this._formData.mailSubject=$("#zfb-input-subject").val(),this._formData.mailContent=$("#zfb-input-message").val(),this.options.criticality)if(this._formData.criticalType){var criticalLevel=this._feedbackFormBottom.find(".ui-zfb-criticality-button").attr("criticality-level");"medium"===criticalLevel?this._formData.mailSubject=this._formData.mailSubject+" - "+this._formData.criticalType:(this._formData.criticalType="high"===criticalLevel?"["+this._formData.criticalType.toUpperCase()+"] ":this._formData.criticalType+": ",this._formData.mailSubject=this._formData.criticalType+this._formData.mailSubject)}else this._formData.criticalType="";var base=this;this._formData.randomNumber=this._feedbackRandomNum,this._attachmentArray.length&&(this._formData.fileDetails=JSON.stringify(this._attachmentArray));var customData={};customData["Screen Resolution"]=screen.width+" x "+screen.height,customData=$.extend({},customData,this.options.customHeaders);var result=[],obj={};for(var i in customData)obj[i]=customData[i],result.push(obj),obj={};this._formData.customHeaders=JSON.stringify(result);for(var i in this._formData)this._feedbackData[i]=void 0!=this._formData[i]?this._formData[i]:void 0;this._feedbackData.fileAttachment||delete this._feedbackData.fileAttachment,this._feedbackData.randomNumber||delete this._feedbackData.randomNumber,this._uploadedInfo&&(this._feedbackData=$.extend({},this._feedbackData,this._uploadedInfo))},_setOption:function(key,value){this.options[key]=value},_removeFile:function(screenshot,fileContainer){var timeout,data={randomNumber:fileContainer.attr("fileID"),action:"remove"},callbacks={progress:function(){},success:function(){},fail:function(){}},base=this;clearTimeout(timeout),fileContainer.dequeue().animate({opacity:.1},300,function(){for(var i=0;i<base._attachmentArray.length;i++)if(base._attachmentArray[i].fileID==fileContainer.attr("fileID")){base._attachmentArray.splice(i,1);break}fileContainer.remove(),base._errorTextHandle(fileContainer,!0),base._fileBorderAdjustment(),base._attachmentInner[0].offsetWidth===base._attachmentInner[0].scrollWidth&&base._getScrollBarWidth()&&base._attachmentInner.find(".ui-ztb-filename-container").css({width:"265px"}),base._resizeTextArea(),base._resetTextArea();base._submitRequest(base.options.fileActionURL,data,callbacks,base._externalAttachmentURL)}),timeout=setTimeout(function(){"true"===fileContainer.attr("uploaded")&&(base._uploadedCount=base._uploadedCount-1,base._attachmentCount.find("b").text(base._getString("attachments.label")+" ("+base._uploadedCount+")"),base._currAttachmentSize-=parseInt(fileContainer.attr("fileSize"))),"pending"===fileContainer.attr("uploaded")&&(base._currAttachmentSize-=parseInt(fileContainer.attr("fileSize"))),base._uploadedCount||1!==base._attachmentInner.children().length||(base._attachmentContainer.hide(),base._isIE?(base._slideAnimation(!0),base._attachmentHeader.removeClass("slide-down")):base._attachmentHeader.removeClass("flip-over"),base._attachmentErrorHeader.siblings(":last").removeClass("ui-zfc-icon-collapse-white"),base._attachmentHeader.removeClass("ui-zfb-form-attach-error")),base._resizeTextArea(),base._resetTextArea()},100)},_removeAllFiles:function(){var data={};this._attachmentArray.length&&(data.fileDetails=JSON.stringify(this._attachmentArray)),data.action="remove";{var callbacks={progress:function(){},success:function(){},fail:function(){}};this._submitRequest(this.options.fileActionURL,data,callbacks,this._externalAttachmentURL)}},_submitRequest:function(postURL,postData,callbacks){return this.options.customData?postData=$.extend({},postData,this.options.customData):postData[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken(),postURL=this.options.postURL?this.options.postURL:postURL,$.ajaxUpload(postURL,postData,callbacks)},_isOnline:function(){return navigator.onLine},_clearFile:function(ele){ele.wrap("<form>").closest("form").get(0).reset(),ele.unwrap()},_bytesToSize:function(bytes){var sizes=["bytes","KB","MB","GB","TB"];if(0==bytes)return bytes+""+sizes[0];var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.ceil(bytes/Math.pow(1024,i)*100)/100+" "+sizes[i]},_tipFormat:function(arrayELe){for(var htmlEle="",i=0;i<arrayELe.length;i++)htmlEle+='<div class = "ui-keys-border">'+arrayELe[i]+"</div><span>+</span>";var result=htmlEle.substring(0,htmlEle.lastIndexOf("<span>"));return result},_errorCaseHandle:function(ele){ele.attr("errorFound",!0).find("canvas").remove(),$('<div class = "ui-ztb-file-error-blackout"></div><div class = "ui-ztb-file-error"><span class = "ui-fcomponents-icon ui-zfc-icon-feedback-attachment-error"></span></div>').appendTo(ele);$("<div>").attr("class","ui-zfb-file-error-text").appendTo(ele);this._errorTextHandle(ele),ele.find(".ui-zfc-icon-feedback-attachment-error").css({transform:"scale(1.1)"}),setTimeout(function(){ele.find(".ui-zfc-icon-feedback-attachment-error").css("transform","scale(1)")},200)},_errorTextHandle:function(ele,isRemoved){var headerText,text,className,timeout,base=this,fileName=ele.find(".ui-ztb-filename-label").text(),number=this._attachmentInner.find('.ui-ztb-filename-container[errorfound="true"]').length;if(this._errorText=[this._getString("viruspresent.label"),this._getString("unknownerrortext.label")],isRemoved)0===number?this._isIE?(this._slideAnimation(!0),this._attachmentHeader.removeClass("slide-down")):this._attachmentHeader.removeClass("flip-over"):number>=1&&(headerText=this._errorHeaderText(null,number,3),this._attachmentErrorHeader.find(".ui-zfb-form-error-headertext").text(headerText));else{var errorKind=ele.attr("errorType");"virus-error-detected"===errorKind?(text=this._errorText[0],className="ui-zfb-file-error",headerText=1==number?1===this._attachmentInner.find(".ui-ztb-filename-container").length?this._errorHeaderText(fileName,number,0):this._errorHeaderText(fileName,number,1):this._errorHeaderText(fileName,number,3)):"unknown-error-detected"===errorKind&&(text=this._errorText[1],className="ui-zfb-file-error",headerText=1===number?this._errorHeaderText(fileName,number,2):this._errorHeaderText(fileName,number,3)),clearTimeout(timeout),this._isIE?(this._attachmentHeader.addClass("slide-down"),this._slideAnimation()):(this._attachmentHeader.addClass("flip-over"),this._attachmentCount.add(this._attachmentHeader).addClass("ui-zfb-header-grey-effect"),this._attachmentTempHeader.show(),timeout=setTimeout(function(){base._attachmentTempHeader.hide(),base._attachmentCount.add(base._attachmentHeader).removeClass("ui-zfb-header-grey-effect")},400)),this._attachmentHeader.addClass("ui-zfb-form-attach-error"),ele.addClass(className),ele.find(".ui-zfb-file-error-text").text(text),this._attachmentErrorHeader.find(".ui-zfb-form-error-headertext").text(headerText)}this._resetTextArea()},_slideAnimation:function(resetAnim){var countTop,errorTop,base=this;resetAnim?(countTop="0px",errorTop="-62px"):(countTop="31px",errorTop="-31px"),this._attachmentCount.animate({top:countTop},300),setTimeout(function(){base._attachmentErrorHeader.animate({top:errorTop},300)},0)},_dialogHeightAdjustment:function(){this._dialogHeight=.7*this._windowObj.innerHeight();var minHeight=this.options.minHeight,maxHeight=this.options.maxHeight;this._dialogHeight<minHeight?this._dialogHeight=minHeight:this._dialogHeight>maxHeight&&(this._dialogHeight=maxHeight)},_errorHeaderText:function(fileName,number,index){return[this._getString("virusdetected.label"),this._getString("virusdetectedinfile.label","zfeedback",[fileName]),this._getString("unknownerrorinfile.label","zfeedback",[fileName]),this._getString("multiplefileserror.label","zfeedback",[number])][index]},_areAttachmentsPending:function(){return this._attachmentInner.find('.ui-ztb-filename-container[uploaded="pending"]').length},_filesPendingHandle:function(){var base=this;this._attachmentErrorHeader.addClass("ui-zfb-form-attach-pendingheader").find("span").removeClass("ui-zfc-icon-feedback-attachmentheader-error").addClass("ui-zfc-icon-feedback-attachmentheader-info");setTimeout(function(){clearTimeout(timeout),base._isIE?(base._attachmentHeader.addClass("slide-down"),base._slideAnimation()):(base._attachmentHeader.addClass("flip-over"),base._attachmentCount.add(base._attachmentHeader).addClass("ui-zfb-header-grey-effect"),base._attachmentTempHeader.show());var timeout,textEle=base._attachmentErrorHeader.find(".ui-zfb-form-error-headertext"),number=base._areAttachmentsPending();textEle.text(1===number?base._getString("fileuploadinprogress.label"):base._getString("multiplefilesuploadinprogress.label","zfeedback",[number])),base._resetTextArea(),timeout=setTimeout(function(){base._attachmentTempHeader.hide(),base._attachmentCount.add(base._attachmentHeader).removeClass("ui-zfb-header-grey-effect")},400)},100)},_resizeTextArea:function(){this._textAreaHeight=this._feedbakDialog.height()-this._fileContainer.outerHeight()-this._feedbackFormTop.outerHeight(),this._attachmentContainer.is(":visible")&&(this._textAreaHeight-=this._attachmentContainer.outerHeight()),this._feedbackFormMiddle.height(this._textAreaHeight)},_resetTextArea:function(valueNeeded){var shortcutHeight=0;this._overalDiv&&this._overalDiv.is(":visible")&&!valueNeeded&&(shortcutHeight=this._overalDiv.outerHeight(!0));var attachmentHeight=0;this._attachmentContainer.is(":visible")&&(attachmentHeight=this._attachmentContainer.outerHeight(!0));var feedbackHeight=this._textAreaHeight-attachmentHeight-shortcutHeight;feedbackHeight=feedbackHeight>30?feedbackHeight:30,32>=feedbackHeight?(this._attachmentInner.addClass("ui-zfb-maxheight-adjustment"),this._attachmentContainer.is(":visible")&&(attachmentHeight=this._attachmentContainer.outerHeight(!0)),this._attachmentInner[0].offsetWidth>this._attachmentInner[0].scrollWidth&&this._getScrollBarWidth()&&this._attachmentInner.find(".ui-ztb-filename-container").css({width:265-this._getScrollBarWidth()/2})):!valueNeeded&&this._attachmentInner.hasClass("ui-zfb-maxheight-adjustment")&&feedbackHeight>140?(this._attachmentInner.removeClass("ui-zfb-maxheight-adjustment"),attachmentHeight=this._attachmentContainer.outerHeight(!0)):this._overalDiv&&this._overalDiv.is(":visible")&&!valueNeeded&&this._attachmentInner.children().length&&!this._attachmentInner.hasClass("ui-zfb-maxheight-adjustment")&&feedbackHeight>70&&(shortcutHeight=193,this._overalDiv.height(shortcutHeight)),feedbackHeight=this._textAreaHeight-attachmentHeight-shortcutHeight,feedbackHeight=feedbackHeight>30?feedbackHeight:30;var tipHeight=this._textAreaHeight-attachmentHeight-feedbackHeight;return this._overalDiv&&this._overalDiv.is(":visible")&&!valueNeeded&&this._overalDiv.height(tipHeight>193?193:tipHeight),valueNeeded?feedbackHeight:void this._feedbackFormMiddle.css({height:feedbackHeight})},_placeHolder:function(input,text){$(input).on("focus.placeholder",function(){$(text).hide()}).on("focusout.placeholder",function(){0!=$(this).val().length?$(text).hide():$(text).show()}),setTimeout(function(){$("#zfb-input-subject").blur(),$("body").focus()},40)},_getScrollBarWidth:function(){var $outer=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),widthWithScroll=$("<div>").css({width:"100%"}).appendTo($outer).outerWidth();return $outer.remove(),100-widthWithScroll},_randomString:function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;5>i;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},_isMacOS:function(){var ua=navigator.userAgent.toLowerCase();return-1!=ua.indexOf("mac")},_getString:function(key,module,replaceArray){return this._haveCustomKeys&&void 0!==this._customKeys[key]?this._customKeys[key]:FCUtil.getI18NString(module,key,replaceArray,this.options.keys)},_triggerEvent:function(orgEvent,_ui){this._feedbakDialog.trigger("zfeedback"+orgEvent,_ui)}};return{init:function(options){if(zfeedbackDEFAULTS=$.extend({},zfeedbackDEFAULTS,options),zfeedbackDEFAULTS.screengrabber){var contextPath=FComponents.option("contextPath"),URL=zfeedbackDEFAULTS.proxyURL?zfeedbackDEFAULTS.proxyURL:contextPath+"proxy.do";Screengrabber.init({fetchImageURL:URL})}$("body").on("screengrabberopen",function(){$("#ui-zfeedback-dialog").hide()}).off("screengrabberclose").on("screengrabberclose",function(){zfeedback._totalScreenshotCount=0,$("#ui-zfeedback-dialog").css({display:"block",opacity:0}).animate({opacity:1,easing:"easeInExpo"},250),zfeedback._isScreengrabberOpen=!1,zfeedback._focussedEle=$(zfeedback._screenGrabLabel)[0],$(zfeedback._focussedEle).focus()})},option:function(name,value){zfeedback._setOption(name,value)},open:function(data){if(dialogOpen){var feedbackUiDialog=$("#ui-zfeedback-dialog");feedbackUiDialog.is(".ui-dialog-minimized")&&feedbackUiDialog.find(".ui-dialog-titlebar-minimize").trigger("click")}else zfeedback._create(data)},close:function(){zfeedback._close()},attachScreenshot:function(image,targetObj){ZFeedback.open({formType:"feedback"}),zfeedback._attachScreenshot(image.src,targetObj)}}}(window.jQuery);!function($){var zscreengrabber={widgetEventPrefix:"screengrabber",_EVENTS:{ONOPEN:"open",ONFINISH:"done",ONCLOSE:"close"},_grabAreaDrag:!1,_selectionDrag:!1,_isIE9:!1,_selectedTool:void 0,_toolSelected:!1,_undoCount:void 0,_undoFlag:void 0,_rightDrag:!1,_overflow:!0,_ctx:void 0,_memCtx:void 0,options:{targetObject:!1,fetchImageURL:""},_create:function(){var base=this;this._initalOverflow=$("body").css("overflow"),$("body").addClass("ui-zsg-userselect").css("overflow","hidden"),this._drawArray=[],this._scrollTopVal={},this._scrollTopVal.topval=window.pageYOffset||document.documentElement.scrollTop,this._scrollTopVal.leftval=window.pageXOffset||document.documentElement.scrollLeft,this.options=$.extend({},$.ui.zscreengrabber.config,this.options),-1!==navigator.appVersion.indexOf("MSIE 9.")&&(this._isIE9=!0),this._createScreenGrabber(),this._createTopBandTools(),$(window).on("keydown.screengrabber",function(ev){return 27===ev.which?(ev.stopPropagation(),base._close(!0),ev.preventDefault(),!1):void(13===ev.which&&base._canvasEleCreated&&!base._captureInProgress&&base._doneBtn.trigger("click.screengrabber"))}),base._triggerEvent(base._EVENTS.ONOPEN)},_close:function(){var base=this;this._loaderBar&&this._loaderBar.remove(),base._screenCaptureError.remove(),setTimeout(function(){base._centralDiv.add(base._screenGrabberArea).add(base._topBand).add(base._outerDragEle).remove(),$("body").removeClass("ui-zsg-userselect").css({cursor:"",overflow:base._initalOverflow}),base._triggerEvent(base._EVENTS.ONCLOSE),$(window).off("keydown.screengrabber"),$(window).off("keyup.screengrabber"),base.element.off("."+base.widgetName),$.Widget.prototype.destroy.apply(base,arguments)},200)},close:function(){this._close()},_createTopBandTools:function(){var base=this;this._topBand=$("<div>").addClass("ui-zsg-toolbar"),this._screenCaptureError=$("<div>").attr("id","ui-zsg-error-container"),$("<span>").text(this._getString("screencapturealert.label")).appendTo(this._screenCaptureError),$("<button>").attr("id","ui-zsg-retry").text(this._getString("retry.label")).appendTo(this._screenCaptureError),$("<button>").attr("id","ui-zsg-quit").text(this._getString("quit.label")).appendTo(this._screenCaptureError);var headerDiv=$("<div>").attr("id","ui-zsg-toolbar-left").appendTo(this._topBand),buttonDiv=$("<div>").attr("id","ui-zsg-toolbar-inner").appendTo(headerDiv),zoomBtn=$("<div>").attr({id:"ui-zfc-zoomin",title:this._getString("actualsize.label"),"class":"ui-zsg-icons"}).appendTo(buttonDiv).hide();$("<span>").addClass("ui-icon ui-components-icon ui-icon-zoomin").appendTo(zoomBtn);var highlightBtn=$("<div>").attr({title:this._getString("highlight.label")}).addClass("ui-zsg-icons").appendTo(buttonDiv);$("<span>").addClass("ui-icon ui-components-icon ui-icon-highlight").appendTo(highlightBtn);var blackoutBtn=$("<div>").attr({title:this._getString("blackout.label")}).addClass("ui-zsg-icons").appendTo(buttonDiv);$("<span>").addClass("ui-icon ui-components-icon ui-icon-blackout").appendTo(blackoutBtn),this._doneBtn=$("<div>").attr("title",this._getString("attach.label")).addClass("ui-zsg-donebtn").appendTo(buttonDiv),$("<span>").addClass("ui-icon ui-components-icon ui-icon-tick").appendTo(this._doneBtn),this._topBand.appendTo("body"),this._screenCaptureError.appendTo("body");var currentPath=this._scriptPath();highlightBtn.click(function(){base._selectedTool="line",base._isIE9?base._outerDragEle.css("cursor","url('"+currentPath+"/images/pen.cur'), auto"):base._outerDragEle.removeClass("ui-zsg-blackout-cursor ui-zsg-default-cursor").addClass("ui-zsg-highlight-cursor"),base._toolSelected=!0}),$("<div>").attr({title:this._getString("cancel.label"),"class":"ui-zsg-donebtn cancel"}).html('<span class="ui-icon ui-components-icon ui-icon-cross"></span>').appendTo(buttonDiv).click(function(){base._close(!0)}),blackoutBtn.click(function(){base._selectedTool="rectangle",base._isIE9?base._outerDragEle.css("cursor","crosshair"):base._outerDragEle.removeClass("ui-zsg-default-cursor ui-zsg-highlight-cursor").addClass("ui-zsg-blackout-cursor"),base._toolSelected=!0}),zoomBtn.on("click",function(){base._selectedTool="zoom",base._isIE9?base._outerDragEle.css("cursor","default"):base._outerDragEle.removeClass("ui-zsg-highlight-cursor ui-zsg-blackout-cursor").addClass("ui-zsg-default-cursor"),base._zoomImage(),base._toolSelected=!1}).on("mousedown.zscreengrabber",function(){zoomBtn.attr("title",base._getString(base._isZoomedIn?"actualsize.label":"smallsize.label"))})},_createScreenGrabber:function(){var base=this,end1=void 0;this._centralDiv=$("<div>").attr("id","ui-zsg-msg-default").html("<span>"+this._getString("message.label")+"</span>").appendTo("body"),this._screenGrabberArea=$("<div>").attr({id:"ui-zsg-screen-select","data-html2canvas-ignore":!0}).css({top:this._scrollTopVal.topval}).appendTo("body"),this._darkerDiv=$("<div>").attr({"data-html2canvas-ignore":!0,"class":"ui-zsg-fadeoutarea"}).appendTo(this._screenGrabberArea),this._innerDragEle=void 0,this._outerDragEle=$("<div>").addClass("ui-zsg-editor").appendTo(this._screenGrabberArea);var leftDiv,rightDiv,topDiv,bottomDiv;this._screenGrabberArea.on("contextmenu",function(e){e.preventDefault(),e.stopPropagation()}),$(document).on("click","#ui-zsg-retry",function(){base._screenCaptureError.hide(),$(this).hide(),base._screenGrabFail=!0,base._loaderBar.show(),base._doneBtn.trigger("click.screengrabber")}).on("click","#ui-zsg-quit",function(){base._screenCaptureError.hide(),base._close()}),this._mouseMove=!1,this._screenGrabberArea.mousedown(function(e){2!==e.button&&(e.preventDefault(),e.stopPropagation(),base._centralDiv.remove(),base._selectionDrag=!0,base._drag1=!0,base._mouseMove||(base._mouseMove=!1),base._windowWidth=$(window).width(),base._windowHeight=$(window).height(),base.id=Math.round(1e6*Math.random()),start1=[e.clientX,e.clientY],base._outerDragEle.show(),base._outerDragEle.attr("id",base.id))}).mouseup(function(e){if(2!==e.button){base._selectionDrag=!1,e.stopPropagation(),e.preventDefault(),$("body").get(0).style.cursor="auto",base._screenGrabberArea.css({"background-image":""});var x=base._outerDragEle.innerWidth(),y=base._outerDragEle.innerHeight(),ele=base._outerDragEle.position();base._topBandHeight=base._topBand.outerHeight(),base._defLeft=ele.left,base._defTop=ele.top,base._defWidth=x,base._defHeight=y,base._screenGrabberArea.off().on("mousedown click mouseup",function(ev){ev.stopPropagation(),ev.preventDefault()}),base._mouseMove?(topDiv.css({width:base._windowWidth,height:base._defTop}),leftDiv.css({top:base._efTop,width:base._defLeft,height:base._defHeight}),rightDiv.css({left:base._defLeft+base._defWidth,top:base._defTop,width:base._windowWidth-(base._defLeft+base._defWidth),height:base._defHeight}),bottomDiv.css({top:base._defTop+base._defHeight,width:base._windowWidth,height:base._windowHeight-(base._defTop+base._defHeight)}),base._darkerDiv.add(base._topBand).add($(window)).mouseup(function(){base._grabAreaDrag&&(base._grabAreaDrag=!1,base._drawCurve())})):(base._defHeight=base._windowHeight,base._defWidth=base._windowWidth),base._outerDragEle.css({left:base._defLeft,top:base._defTop,width:base._defWidth,height:base._defHeight});var screengrabArea={top:base._defTop+base._scrollTopVal.topval,height:base._defHeight,left:base._defLeft,width:base._defWidth};base._createLoaderBar();var insertCanvas=$("<canvas>").attr({id:"ui-zsg-editor-canvas",width:base._defWidth,height:base._defHeight}).appendTo(base._outerDragEle).focus();base._canvasEleCreated=!0;var mycanvas=document.getElementById("ui-zsg-editor-canvas");if(base._ctx=mycanvas.getContext("2d"),base._mouseMove){var marginLeft,topbarPos=base._defTop-base._topBandHeight,minTopbarWidthPerc=.25,topbarWidth=base._windowWidth*minTopbarWidthPerc;base._defWidth>topbarWidth&&(topbarWidth=base._defWidth);var iconAlignmentFactor=1/3;if(base._defWidth<base._windowWidth*iconAlignmentFactor){var buttonWidth=80;marginLeft=(topbarWidth-2*base._doneBtn.outerWidth()-buttonWidth)/2,$("#ui-zsg-toolbar-inner").css({margin:0,"margin-left":marginLeft})}base._topBand.css({top:topbarPos,left:base._defLeft,width:topbarWidth})}var req;base._isIE9||(base._defWidth>500?base._loaderBar.addClass("ui-zsg-loader-large"):base._defWidth>230?base._loaderBar.addClass("ui-zsg-loader-medium"):(base._loaderBar.addClass("ui-zsg-loader-small"),base._defWidth<100&&base._loaderBar.addClass("ui-zsg-loader-extra"))),base._loaderBar.css("top",base._defHeight/2-base._loaderBar.innerHeight()/2).show(),base._triggerEvent(base._EVENTS.ONSEND),base._captureInProgress=!0,setTimeout(function(){var callbacks={success:function(canvas){window.scroll(base._scrollTopVal.leftval,base._scrollTopVal.topval);var image=document.createElement("img");base._loaderBar.remove(),image.src=canvas.toDataURL("image/png");var width,left,top,y=-base._defTop,x=-base._defLeft;base._mouseMove?(width=base._defWidth,top=0,left=base._defLeft,y-=base._scrollTopVal.topval):(width=.8*base._windowWidth,left=.1*base._windowWidth,top=40,$(image).css({width:"100%"}),base._topBand.find(".ui-icon-zoomin").parent().show(),base._isZoomedIn=!1,base._defTop=top,base._defWidth=width,base._defLeft=left,base._screenGrabberArea.css("top",base._topBandHeight+base._scrollTopVal.topval),y=.8*-base._scrollTopVal.topval),$(topDiv).add(bottomDiv).add(leftDiv).add(rightDiv).fadeOut(200),base._darkerDiv.fadeIn(200),base._outerDragEle.css({height:base._defHeight,width:width,top:base._defTop,left:left});var canvasDiv=$("<div>").addClass("ui-zsg-editor-container").appendTo(base._outerDragEle);insertCanvas.attr("width",width).appendTo(canvasDiv);var imageDiv=$("<div>").addClass("ui-zsg-grab-container").appendTo(base._outerDragEle);imageDiv.append($(image).attr("id","ui-zsg-grabbed-img").css({left:x,top:y-1})),base._mouseMove||(base._defHeight=.8*base._windowHeight,base._outerDragEle.css({height:base._defHeight}),base._minimizedHeight=base._defHeight,insertCanvas.attr("height",base._defHeight),base._defTop=base._defTop+base._topBandHeight),base._defHeight=base._defHeight,base._captureInProgress=!1,setTimeout(function(){base._pushImage()},1)},fail:function(){base._topBand.hide(),$("#ui-zsg-quit-id").show(),base._screenCaptureError.fadeIn(200),base._captureInProgress=!1}};base._screenGrabFail||(base._outerDragEle.css("border","none"),html2canvas($("body"),{proxy:base.options.fetchImageURL,grabArea:screengrabArea,onrendered:function(canvas){base._screenGrabFail=!1,clearTimeout(req),callbacks.success(canvas)}})),req=setTimeout(function(){callbacks.fail(),base._loaderBar.hide(),base._screenGrabFail=!1},2e4)},50),base._doneBtn.on("click.screengrabber",function(){var req;base._screenGrabFail=!0,base._triggerEvent(base._EVENTS.ONSEND),setTimeout(function(){var callbacks={success:function(canvas){window.scroll(base._scrollTopVal.leftval,base._scrollTopVal.topval);var finalImgSrc=canvas.toDataURL("image/png");base._screenGrabberArea.hide();var targetTop,targetLeft,targetWidth,targetHeight;if(base.element.data("imageSource",finalImgSrc),base._triggerEvent(base._EVENTS.ONFINISH,finalImgSrc),base.options.targetObject){var targetObject=base.options.targetObject;targetTop=targetObject.offset().top,targetLeft=targetObject.offset().left,targetWidth=targetObject.innerWidth(),targetHeight=targetObject.innerHeight()}else{var body=$("body");targetTop=body.innerHeight()/2,targetLeft=body.innerWidth()/2,targetWidth=0,targetHeight=0}base._topBand.remove();var finalImg=$("<img>").attr({src:finalImgSrc});finalImg.css({position:"absolute",top:base._defTop+base._scrollTopVal.topval,left:base._defLeft,width:base._defWidth,height:base._defHeight,"z-index":1e8}).appendTo("body"),finalImg.animate({top:targetTop,left:targetLeft,width:targetWidth,height:targetHeight,opacity:.2},500,function(){base._close(),$(this).remove(),base._captureInProgress=!1})},fail:function(){base._topBand.hide(),$("#ui-zsg-quit-id").show(),base._screenCaptureError.fadeIn(200),base._captureInProgress=!1}};html2canvas($(base._outerDragEle),{grabArea:screengrabArea,onrendered:function(canvas){base._screenGrabFail=!1,clearTimeout(req),callbacks.success(canvas)}}),req=setTimeout(function(){base._screenGrabFail&&(callbacks.fail(),base._loaderBar.hide(),base._screenGrabFail=!1)},2e4)},50)});var ctrlDown=!1,yKey=89,zKey=90;base._undoCount=0;$(window).on("keydown.screengrabber",function(e){var MAC=-1!==navigator.platform.toString().toLowerCase().indexOf("mac")?!0:!1;if(!MAC&&e.ctrlKey&&(ctrlDown=!0),e.metaKey&&e.keyCode===zKey&&!e.shiftKey&&!e.ctrlKey||ctrlDown&&e.keyCode===zKey){if(e.preventDefault(),e.stopPropagation(),base._undoFlag=!0,base._undoCount=base._undoCount+1,base._baseArray.length-base._undoCount<0)return void(base._undoCount=base._baseArray.length);var lastBaseId=base._baseArray[base._baseArray.length-base._undoCount];"rectangle"===base._drawArray["draw"+lastBaseId].tool?$("#"+lastBaseId).hide():base._undoRedo()}if((e.metaKey&&e.keyCode===zKey&&e.shiftKey&&!e.ctrlKey||ctrlDown&&e.keyCode===yKey)&&(e.preventDefault(),e.stopPropagation(),base._undoCount>0)){base._undoCount=base._undoCount-1;var lastBaseId=base._baseArray[base._baseArray.length-1-base._undoCount];if(base._baseArray.length-1-base._undoCount<0)return;"rectangle"===base._drawArray["draw"+lastBaseId].tool?$("#"+lastBaseId).show():base._undoRedo()}e.metaKey&&57===e.keyCode||e.metaKey&&189===e.keyCode||ctrlDown&&189===e.keyCode?base._isZoomedIn&&!base._mouseMove&&base._zoomImage():(e.metaKey&&48===e.keyCode||e.metaKey&&187===e.keyCode||ctrlDown&&48===e.keyCode||ctrlDown&&187===e.keyCode)&&(base._isZoomedIn||base._mouseMove||base._zoomImage())}).on("keyup.screengrabber",function(e){e.ctrlKey&&(ctrlDown=!1)}),base._baseArray=[],base._outerDragEle.on("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1}),base._outerDragEle.on("mousedown.screengrabber",function(e){if(base._toolSelected===!0){var i;for(i=1;i<=base._undoCount;i++){var d=0;for(var abc in base._drawArray)var d=abc;delete base._drawArray[d],base._baseArray.pop()}base._undoCount=0,base.id=Math.round(1e7*Math.random()),base._baseArray.push(base.id),"rectangle"===base._selectedTool&&(base._grabAreaDrag=!0,base._innerDragEle=$("<div>").attr({id:base.id,"class":"ui-zsg-editor-blackout"}).appendTo(base._outerDragEle),base._drawArray["draw"+base.id]={tool:"rectangle",offset:{Xaxis:0,Yaxis:0,Width:0,Height:0}},start=[e.clientX,e.clientY+base._screenGrabberArea.scrollTop()]),"line"===base._selectedTool&&(base._drawArray["draw"+base.id]=[],base._drawArray["draw"+base.id].offset=[],base._drawArray["draw"+base.id].tool="line",base._drawArray["draw"+base.id].zoom=base._isZoomedIn?"zoom-in":"zoom-out",base._grabAreaDrag=!0,e._x=e.clientX,e._y=e.clientY+base._screenGrabberArea.scrollTop(),base._ctx.beginPath(),base._ctx.moveTo(e._x-base._defLeft,e._y-base._defTop),base._drawArray["draw"+base.id].offset[base._drawArray["draw"+base.id].offset.length]={Xaxis:e._x-base._defLeft,Yaxis:e._y-base._defTop})}}).on("mouseup.screengrabber",function(){base._grabAreaDrag=!1,"line"===base._selectedTool&&setTimeout(function(){base._drawCurve()},100)}).on("mousemove.screengrabber",function(e){if($("body").get(0).style.cursor="auto",base._grabAreaDrag===!0)if("rectangle"===base._selectedTool){end=[e.clientX,e.clientY+base._screenGrabberArea.scrollTop()];var divTop=start[1];start[1]>end[1]&&(divTop=end[1]);var divLeft=start[0];start[0]>end[0]&&(divLeft=end[0]),divHeight=Math.abs(start[1]-end[1]),divWidth=Math.abs(start[0]-end[0]),$("#"+base.id).length&&$("#"+base.id).remove(),base._drawArray["draw"+base.id]={tool:"rectangle",offset:{Xaxis:divLeft-base._defLeft,Yaxis:divTop-base._defTop,Width:base._divWidth,Height:base._divHeight}},base._innerDragEle.css({left:divLeft-base._defLeft,top:divTop-base._defTop,width:divWidth,height:divHeight}).appendTo(base._outerDragEle)}else"line"===base._selectedTool&&base._grabAreaDrag&&(e._x=e.clientX,e._y=e.clientY+base._screenGrabberArea.scrollTop(),base._ctx.lineCap="round",base._ctx.lineTo(e._x-base._defLeft,e._y-base._defTop),base._ctx.lineWidth=5,base._drawArray["draw"+base.id].offset[base._drawArray["draw"+base.id].offset.length]={Xaxis:e._x-base._defLeft,Yaxis:e._y-base._defTop},base._ctx.strokeStyle="red",base._ctx.stroke())})}}).on("mousemove.screengrabber",function(e){if(base._selectionDrag){base._mouseMove=!0,$("body").css({cursor:"crosshair"}),end1=[e.clientX,e.clientY],void 0===topDiv&&(leftDiv=$("<div>").addClass("ui-zsg-outer-bg ui-zsg-left").appendTo(base._screenGrabberArea),topDiv=$("<div>").addClass("ui-zsg-outer-bg ui-zsg-top").appendTo(base._screenGrabberArea),rightDiv=$("<div>").addClass("ui-zsg-outer-bg ui-zsg-right").appendTo(base._screenGrabberArea),bottomDiv=$("<div>").addClass("ui-zsg-outer-bg ui-zsg-bottom").appendTo(base._screenGrabberArea));var divTop1=start1[1];start1[1]>end1[1]&&(divTop1=end1[1],base._rightDrag=!0);var divLeft1=start1[0];start1[0]>end1[0]&&(divLeft1=end1[0]),divHeight1=Math.abs(start1[1]-end1[1]),divWidth1=Math.abs(start1[0]-end1[0]);var rightTop=start1[1];base._rightDrag&&(rightTop=end1[1],base._rightDrag=!1),leftDiv.css({width:divLeft1,top:divTop1,height:divHeight1}),topDiv.css({width:base._windowWidth,height:divTop1}),rightDiv.css({top:rightTop,left:divLeft1+divWidth1,height:divHeight1}),bottomDiv.css({width:base._windowWidth,height:base._windowHeight-(divTop1+divHeight1)}),base._outerDragEle.css({left:divLeft1,top:divTop1,width:divWidth1,height:divHeight1})}}).on("click.screengrabber",function(e){e.preventDefault(),e.stopPropagation()})},_pushImage:function(){var base=this;if(this._defTop<this._topBand.outerHeight()&&this._defHeight<this._topBandHeight+20)this._topBand.css({top:this._defTop+this._defHeight,opacity:1}).fadeIn(250);else if(this._defTop<this._topBand.outerHeight()){this._topBand.addClass("ui-zsg-draggable").css({top:this._defTop-this._topBand.outerHeight()}).animate({top:this._defTop,opacity:1},300);var mousex,mousey,move=!1;this._topBand.on("mousedown.screengrabber",function(e){$(e.target)[0]===$("#ui-zsg-toolbar-left")[0]&&(mousex=e.clientX,mousey=e.clientY,move=!0,base._toolSelected=!1)}).add($("body")).on("mousemove.screengrabber",function(e){if(move){var top=parseInt(base._topBand.css("top"))+e.clientY-mousey,left=parseInt(base._topBand.css("left"))+e.clientX-mousex;0>top?top=0:top+base._topBand.outerHeight()>base._windowHeight&&(top=base._windowHeight-base._topBand.outerHeight()),0>left?left=0:left+base._topBand.outerWidth()>base._windowWidth&&(left=base._windowWidth-base._topBand.outerWidth()),base._topBand.css({top:top,left:left}),mousex=e.clientX,mousey=e.clientY,base._toolSelected=!1}}).on("mouseup.screengrabber",function(){move=!1,base._toolSelected=!0})}else this._topBand.fadeIn(250)},_createLoaderBar:function(){this._loaderBar=$("<div>").attr("data-html2canvas-ignore",!0).appendTo(this._outerDragEle),this._isIE9?this._loaderBar.addClass("ui-zsg-loading"):($("<div>").addClass("ui-zsg-loader-css1").appendTo(this._loaderBar),$("<div>").addClass("ui-zsg-loader-css2").appendTo(this._loaderBar),$("<div>").addClass("ui-zsg-loader-css3").appendTo(this._loaderBar),this._loaderBar.addClass("ui-zsg-loader"))},_drawCurve:function(){var memCanvas=document.createElement("canvas");memCanvas.width=this._defWidth,memCanvas.height=this._defHeight,this._memCtx=memCanvas.getContext("2d");var mycanvas=(memCanvas.getContext("2d"),document.getElementById("ui-zsg-editor-canvas"));for(var g in this._drawArray){if("line"===this._drawArray[g].tool){this._ctx.beginPath(),this._ctx.lineCap="round",this._ctx.lineWidth=5,this._mouseMove||(this._fullscreenScale=this._isZoomedIn?"zoom-in"===this._drawArray[g].zoom?1:1.25:"zoom-in"===this._drawArray[g].zoom?.8:1),this._ctx.scale(this._fullscreenScale,this._fullscreenScale),this._ctx.moveTo(this._drawArray[g].offset[0].Xaxis,this._drawArray[g].offset[0].Yaxis);for(var d in this._drawArray[g].offset){var e=parseInt(d)+parseInt(1);if(e<this._drawArray[g].offset.length){this._ctx.clearRect(0,0,this._defWidth,this._defHeight);var s=(this._drawArray[g].offset[d].Xaxis+this._drawArray[g].offset[e].Xaxis)/2,t=(this._drawArray[g].offset[d].Yaxis+this._drawArray[g].offset[e].Yaxis)/2;this._ctx.quadraticCurveTo(this._drawArray[g].offset[d].Xaxis,this._drawArray[g].offset[d].Yaxis,s,t),this._ctx.stroke(),this._ctx.strokeStyle="red"}}this._memCtx.drawImage(mycanvas,0,0)}this._mouseMove||this._ctx.scale(1/this._fullscreenScale,1/this._fullscreenScale)}this._ctx.drawImage(memCanvas,0,0)},_undoRedo:function(){var memCanvas=document.createElement("canvas");memCanvas.width=this._defWidth,memCanvas.height=this._defHeight,this._memCtx=memCanvas.getContext("2d");var mycanvas=document.getElementById("ui-zsg-editor-canvas");if(this._baseArray.length-this._undoCount===0)this._ctx.clearRect(0,0,this._defWidth,this._defHeight);else for(var i=0;i<this._baseArray.length-this._undoCount;i++){var g="draw"+this._baseArray[i];if(this._ctx.clearRect(0,0,this._defWidth,this._defHeight),"line"===this._drawArray[g].tool){this._ctx.beginPath(),this._ctx.lineCap="round",this._ctx.lineWidth=5,this._mouseMove||(this._fullscreenScaleRedo=this._isZoomedIn?"zoom-in"===this._drawArray[g].zoom?1:1.25:"zoom-in"===this._drawArray[g].zoom?.8:1,this._ctx.scale(this._fullscreenScaleRedo,this._fullscreenScaleRedo)),this._ctx.moveTo(this._drawArray[g].offset[0].Xaxis,this._drawArray[g].offset[0].Yaxis);for(var d in this._drawArray[g].offset){var e=parseInt(d)+1;if(e<this._drawArray[g].offset.length){this._ctx.clearRect(0,0,this._defWidth,this._defHeight);var s=(this._drawArray[g].offset[d].Xaxis+this._drawArray[g].offset[e].Xaxis)/2,t=(this._drawArray[g].offset[d].Yaxis+this._drawArray[g].offset[e].Yaxis)/2;this._ctx.quadraticCurveTo(this._drawArray[g].offset[d].Xaxis,this._drawArray[g].offset[d].Yaxis,s,t),this._ctx.stroke(),this._ctx.strokeStyle="red"}}this._memCtx.drawImage(mycanvas,0,0)}this._mouseMove||this._ctx.scale(1/this._fullscreenScaleRedo,i/this._fullscreenScaleRedo)}this._ctx.drawImage(memCanvas,0,0)},_zoomImage:function(){var width,left,height,alteredSize,top=0,canvas=$("#ui-zsg-editor-canvas"),zoomDiv=(parseInt(this._outerDragEle.css("width")),$("#ui-zfc-zoomin")),zoomIcon=zoomDiv.find("span");this._isZoomedIn?(width=.8*this._windowWidth,left=.1*this._windowWidth,top=40,this._isZoomedIn=!1,alteredSize=.8,height=this._minimizedHeight,zoomIcon.attr("class","ui-icon ui-components-icon ui-icon-zoomin"),zoomDiv.attr("title",this._getString("actualsize.label")),$("#ui-zsg-grabbed-img").css({top:-(.8*this._scrollTopVal.topval)})):(width=this._windowWidth,height=this._windowHeight+this._topBandHeight,left=0,alteredSize=1.25,this._isZoomedIn=!0,zoomIcon.attr("class","ui-icon ui-components-icon ui-icon-zoomout"),zoomDiv.attr("title",this._getString("smallsize.label")),$("#ui-zsg-grabbed-img").css({top:-(1*this._scrollTopVal.topval)})),this._defTop=top+this._topBandHeight,this._defLeft=left,this._outerDragEle.css({top:top,left:left,width:width,height:height});var drawObj=void 0;this._outerDragEle.find(".ui-zsg-inner-rect").each(function(i,obj){drawObj=$(obj),drawObj.css({top:alteredSize*parseInt(drawObj.css("top")),left:alteredSize*parseInt(drawObj.css("left")),width:alteredSize*parseInt(drawObj.css("width")),height:alteredSize*parseInt(drawObj.css("height"))})}),canvas.attr({width:width,height:height}),this._defWidth=width,this._defHeight=height,this._drawCurve(!0)},_getString:function(key,module,replaceArray){return $.ui.utils.getI18NString(module,key,replaceArray,this.options.keys)},_scriptPath:function(){var scripts=document.getElementsByTagName("SCRIPT"),path="";if(scripts&&scripts.length>0)for(var i in scripts)if(scripts[i].src&&scripts[i].src.match(/\/ui.zscreengrabber\.js$/)){path=scripts[i].src.replace(/(.*)\/ui.zscreengrabber\.js$/,"$1");break}var lastDir=path.lastIndexOf("/");return path.substr(0,lastDir)},_triggerEvent:function(event,_ui){var ui=_ui;if(void 0===_ui)var ui=$.extend(ui,_ui);return this._trigger(event,ui)}};Screengrabber.open=function(options){$("body").zscreengrabber(options)},Screengrabber.close=function(){$("body").zscreengrabber("close")},$.widget("ui.zscreengrabber",zscreengrabber),$.ui.zscreengrabber.config={keys:{"highlight.label":"Highlight","blackout.label":"Blackout","attach.label":"Attach","cancel.label":"Cancel","message.label":"Click to select the full screen. Drag to select part of the screen.","screencapturealert.label":"Unable to capture your screen due to an unknown error","screencapturefailure.label":"Sorry! We are unable to capture your screen due to an unknown error","actualsize.label":"Actual Size","smallsize.label":"Small Size","retry.label":"Retry","quit.label":"Quit"}}}(jQuery),function(window,document,undefined){"use strict";function toPX(element,attribute,value){var left,rsLeft=element.runtimeStyle&&element.runtimeStyle[attribute],style=element.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(value)&&/^-?\d/.test(value)&&(left=style.left,rsLeft&&(element.runtimeStyle.left=element.currentStyle.left),style.left="fontSize"===attribute?"1em":value||0,value=style.pixelLeft+"px",style.left=left,rsLeft&&(element.runtimeStyle.left=rsLeft)),/^(thin|medium|thick)$/i.test(value)?value:Math.round(parseFloat(value))+"px"}function asInt(val){return parseInt(val,10)}function parseBackgroundSizePosition(value,element,attribute,index){if(value=(value||"").split(","),value=value[index||0]||value[0]||"auto",value=_html2canvas.Util.trimText(value).split(" "),"backgroundSize"!==attribute||value[0]&&!value[0].match(/cover|contain|auto/)){if(value[0]=-1===value[0].indexOf("%")?toPX(element,attribute+"X",value[0]):value[0],value[1]===undefined){if("backgroundSize"===attribute)return value[1]="auto",value;value[1]=value[0]}value[1]=-1===value[1].indexOf("%")?toPX(element,attribute+"Y",value[1]):value[1]}else;return value}function backgroundBoundsFactory(prop,el,bounds,image,imageIndex,backgroundSize){var topPos,left,percentage,val,bgposition=_html2canvas.Util.getCSS(el,prop,imageIndex);if(1===bgposition.length&&(val=bgposition[0],bgposition=[],bgposition[0]=val,bgposition[1]=val),-1!==bgposition[0].toString().indexOf("%"))percentage=parseFloat(bgposition[0])/100,left=bounds.width*percentage,"backgroundSize"!==prop&&(left-=(backgroundSize||image).width*percentage);else if("backgroundSize"===prop)if("auto"===bgposition[0])left=image.width;else if(/contain|cover/.test(bgposition[0])){var resized=_html2canvas.Util.resizeBounds(image.width,image.height,bounds.width,bounds.height,bgposition[0]);left=resized.width,topPos=resized.height}else left=parseInt(bgposition[0],10);else left=parseInt(bgposition[0],10);return"auto"===bgposition[1]?topPos=left/image.width*image.height:-1!==bgposition[1].toString().indexOf("%")?(percentage=parseFloat(bgposition[1])/100,topPos=bounds.height*percentage,"backgroundSize"!==prop&&(topPos-=(backgroundSize||image).height*percentage)):topPos=parseInt(bgposition[1],10),[left,topPos]}function h2cRenderContext(width,height){var storage=[];return{storage:storage,width:width,height:height,clip:function(){storage.push({type:"function",name:"clip",arguments:arguments})},translate:function(){storage.push({type:"function",name:"translate",arguments:arguments})},fill:function(){storage.push({type:"function",name:"fill",arguments:arguments})},save:function(){storage.push({type:"function",name:"save",arguments:arguments})},restore:function(){storage.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){storage.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){storage.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var shape=[];return storage.push({type:"function",name:"drawShape",arguments:shape}),{moveTo:function(){shape.push({name:"moveTo",arguments:arguments})},lineTo:function(){shape.push({name:"lineTo",arguments:arguments})},arcTo:function(){shape.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){shape.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){shape.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){storage.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){storage.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(variable,value){return storage.push({type:"variable",name:variable,arguments:value}),value}}}function h2czContext(zindex){return{zindex:zindex,children:[]}}var previousElement,computedCSS,_html2canvas={};_html2canvas.Util={},_html2canvas.Util.log=function(a){_html2canvas.logging&&window.console&&window.console.log&&window.console.log(a)},_html2canvas.Util.trimText=function(isNative){return function(input){return isNative?isNative.apply(input):((input||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),_html2canvas.Util.asFloat=function(v){return parseFloat(v)},function(){var TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;_html2canvas.Util.parseTextShadows=function(value){if(!value||"none"===value)return[];for(var shadows=value.match(TEXT_SHADOW_PROPERTY),results=[],i=0;shadows&&i<shadows.length;i++){var s=shadows[i].match(TEXT_SHADOW_VALUES);results.push({color:s[0],offsetX:s[1]?s[1].replace("px",""):0,offsetY:s[2]?s[2].replace("px",""):0,blur:s[3]?s[3].replace("px",""):0})}return results}}(),_html2canvas.Util.parseBackgroundImage=function(value){var method,definition,prefix,prefix_i,block,c,quote,args,whitespace=" \r\n	",results=[],mode=0,numParen=0,appendResult=function(){method&&('"'===definition.substr(0,1)&&(definition=definition.substr(1,definition.length-2)),definition&&args.push(definition),"-"===method.substr(0,1)&&(prefix_i=method.indexOf("-",1)+1)>0&&(prefix=method.substr(0,prefix_i),method=method.substr(prefix_i)),results.push({prefix:prefix,method:method.toLowerCase(),value:block,args:args})),args=[],method=prefix=definition=block=""};appendResult();for(var i=0,ii=value.length;ii>i;i++)if(c=value[i],!(0===mode&&whitespace.indexOf(c)>-1)){switch(c){case'"':quote?quote===c&&(quote=null):quote=c;break;case"(":if(quote)break;if(0===mode){mode=1,block+=c;continue}numParen++;break;case")":if(quote)break;if(1===mode){if(0===numParen){mode=0,block+=c,appendResult();continue}numParen--}break;case",":if(quote)break;if(0===mode){appendResult();continue}if(1===mode&&0===numParen&&!method.match(/^url$/i)){args.push(definition),definition="",block+=c;continue}}block+=c,0===mode?method+=c:definition+=c}return appendResult(),results},_html2canvas.Util.Bounds=function(element){var clientRect,bounds={};return element.getBoundingClientRect&&(clientRect=element.getBoundingClientRect(),bounds.top=clientRect.top,bounds.bottom=clientRect.bottom||clientRect.top+clientRect.height,bounds.left=clientRect.left,bounds.width=element.offsetWidth,bounds.height=element.offsetHeight,_html2canvas.Util.isFixedEle&&(bounds.top+=window.zCurrentScrollTop)),bounds},_html2canvas.Util.OffsetBounds=function(element){var parent=element.offsetParent?_html2canvas.Util.OffsetBounds(element.offsetParent):{top:0,left:0};return{top:element.offsetTop+parent.top,bottom:element.offsetTop+element.offsetHeight+parent.top,left:element.offsetLeft+parent.left,width:element.offsetWidth,height:element.offsetHeight}},_html2canvas.Util.getCSS=function(element,attribute,index){previousElement!==element&&(computedCSS=document.defaultView.getComputedStyle(element,null));var value=computedCSS[attribute];if(/^background(Size|Position)$/.test(attribute))return parseBackgroundSizePosition(value,element,attribute,index);if(/border(Top|Bottom)(Left|Right)Radius/.test(attribute)){var arr=value.split(" ");return arr.length<=1&&(arr[1]=arr[0]),arr.map(asInt)}return value},_html2canvas.Util.resizeBounds=function(current_width,current_height,target_width,target_height,stretch_mode){var output_width,output_height,target_ratio=target_width/target_height,current_ratio=current_width/current_height;return stretch_mode&&"auto"!==stretch_mode?current_ratio>target_ratio^"contain"===stretch_mode?(output_height=target_height,output_width=target_height*current_ratio):(output_width=target_width,output_height=target_width/current_ratio):(output_width=target_width,output_height=target_height),{width:output_width,height:output_height}},_html2canvas.Util.BackgroundPosition=function(el,bounds,image,imageIndex,backgroundSize){var result=backgroundBoundsFactory("backgroundPosition",el,bounds,image,imageIndex,backgroundSize);return{left:result[0],top:result[1]}},_html2canvas.Util.BackgroundSize=function(el,bounds,image,imageIndex){var result=backgroundBoundsFactory("backgroundSize",el,bounds,image,imageIndex);return{width:result[0],height:result[1]}},_html2canvas.Util.Extend=function(options,defaults){for(var key in options)options.hasOwnProperty(key)&&(defaults[key]=options[key]);return defaults},_html2canvas.Util.Children=function(elem){var children;try{children=elem.nodeName&&"IFRAME"===elem.nodeName.toUpperCase()?elem.contentDocument||elem.contentWindow.document:function(array){var ret=[];return null!==array&&!function(first,second){var i=first.length,j=0;if("number"==typeof second.length)for(var l=second.length;l>j;j++)first[i++]=second[j];else for(;second[j]!==undefined;)first[i++]=second[j++];return first.length=i,first}(ret,array),ret}(elem.childNodes)}catch(ex){_html2canvas.Util.log("html2canvas.Util.Children failed with exception: "+ex.message),children=[]}return children},_html2canvas.Util.isTransparent=function(backgroundColor){return"transparent"===backgroundColor||"rgba(0, 0, 0, 0)"===backgroundColor},_html2canvas.Util.Font=function(){var fontData={};return function(font,fontSize,doc){if(fontData[font+"-"+fontSize]!==undefined)return fontData[font+"-"+fontSize];var baseline,middle,metricsObj,container=doc.createElement("div"),img=doc.createElement("img"),span=doc.createElement("span"),sampleText="Hidden Text";return container.style.visibility="hidden",container.style.fontFamily=font,container.style.fontSize=fontSize,container.style.margin=0,container.style.padding=0,doc.body.appendChild(container),img.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",img.width=1,img.height=1,img.style.margin=0,img.style.padding=0,img.style.verticalAlign="baseline",span.style.fontFamily=font,span.style.fontSize=fontSize,span.style.margin=0,span.style.padding=0,span.appendChild(doc.createTextNode(sampleText)),container.appendChild(span),container.appendChild(img),baseline=img.offsetTop-span.offsetTop+1,container.removeChild(span),container.appendChild(doc.createTextNode(sampleText)),container.style.lineHeight="normal",img.style.verticalAlign="super",middle=img.offsetTop-container.offsetTop+1,metricsObj={baseline:baseline,lineWidth:1,middle:middle},fontData[font+"-"+fontSize]=metricsObj,doc.body.removeChild(container),metricsObj}}(),function(){function addScrollStops(grad){return function(colorStop){try{grad.addColorStop(colorStop.stop,colorStop.color)}catch(e){Util.log(["failed to add color stop: ",e,"; tried to add: ",colorStop])}}}var Util=_html2canvas.Util,Generate={};_html2canvas.Generate=Generate;var reGradients=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];Generate.parseGradient=function(css,bounds){var gradient,i,m1,stop,m2,m2Len,step,m3,tl,tr,br,bl,len=reGradients.length;for(i=0;len>i&&!(m1=css.match(reGradients[i]));i+=1);if(m1)switch(m1[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(gradient={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},m2=m1[2].match(/\w+/g))for(m2Len=m2.length,i=0;m2Len>i;i+=1)switch(m2[i]){case"top":gradient.y0=0,gradient.y1=bounds.height;break;case"right":gradient.x0=bounds.width,gradient.x1=0;break;case"bottom":gradient.y0=bounds.height,gradient.y1=0;break;case"left":gradient.x0=0,gradient.x1=bounds.width}if(null===gradient.x0&&null===gradient.x1&&(gradient.x0=gradient.x1=bounds.width/2),null===gradient.y0&&null===gradient.y1&&(gradient.y0=gradient.y1=bounds.height/2),m2=m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(m2Len=m2.length,step=1/Math.max(m2Len-1,1),i=0;m2Len>i;i+=1)m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),m3[2]?(stop=parseFloat(m3[2]),stop/="%"===m3[3]?100:bounds.width):stop=i*step,gradient.colorStops.push({color:m3[1],stop:stop});break;case"-webkit-gradient":if(gradient={type:"radial"===m1[2]?"circle":m1[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},m2=m1[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),m2&&(gradient.x0=m2[1]*bounds.width/100,gradient.y0=m2[2]*bounds.height/100,gradient.x1=m2[3]*bounds.width/100,gradient.y1=m2[4]*bounds.height/100),m2=m1[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(m2Len=m2.length,i=0;m2Len>i;i+=1)m3=m2[i].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),stop=parseFloat(m3[2]),"from"===m3[1]&&(stop=0),"to"===m3[1]&&(stop=1),gradient.colorStops.push({color:m3[3],stop:stop});break;case"-moz-linear-gradient":if(gradient={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},m2=m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),m2&&(gradient.x0=m2[1]*bounds.width/100,gradient.y0=m2[2]*bounds.height/100,gradient.x1=bounds.width-gradient.x0,gradient.y1=bounds.height-gradient.y0),m2=m1[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(m2Len=m2.length,step=1/Math.max(m2Len-1,1),i=0;m2Len>i;i+=1)m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),m3[2]?(stop=parseFloat(m3[2]),m3[3]&&(stop/=100)):stop=i*step,gradient.colorStops.push({color:m3[1],stop:stop});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(gradient={type:"circle",x0:0,y0:0,x1:bounds.width,y1:bounds.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},m2=m1[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),m2&&(gradient.cx=m2[1]*bounds.width/100,gradient.cy=m2[2]*bounds.height/100),m2=m1[3].match(/\w+/),m3=m1[4].match(/[a-z\-]*/),m2&&m3)switch(m3[0]){case"farthest-corner":case"cover":case"":tl=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.cy,2)),tr=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2)),br=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2)),bl=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.cy,2)),gradient.rx=gradient.ry=Math.max(tl,tr,br,bl);break;case"closest-corner":tl=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.cy,2)),tr=Math.sqrt(Math.pow(gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2)),br=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.y1-gradient.cy,2)),bl=Math.sqrt(Math.pow(gradient.x1-gradient.cx,2)+Math.pow(gradient.cy,2)),gradient.rx=gradient.ry=Math.min(tl,tr,br,bl);break;case"farthest-side":"circle"===m2[0]?gradient.rx=gradient.ry=Math.max(gradient.cx,gradient.cy,gradient.x1-gradient.cx,gradient.y1-gradient.cy):(gradient.type=m2[0],gradient.rx=Math.max(gradient.cx,gradient.x1-gradient.cx),gradient.ry=Math.max(gradient.cy,gradient.y1-gradient.cy));break;case"closest-side":case"contain":"circle"===m2[0]?gradient.rx=gradient.ry=Math.min(gradient.cx,gradient.cy,gradient.x1-gradient.cx,gradient.y1-gradient.cy):(gradient.type=m2[0],gradient.rx=Math.min(gradient.cx,gradient.x1-gradient.cx),gradient.ry=Math.min(gradient.cy,gradient.y1-gradient.cy))}if(m2=m1[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(m2Len=m2.length,step=1/Math.max(m2Len-1,1),i=0;m2Len>i;i+=1)m3=m2[i].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),m3[2]?(stop=parseFloat(m3[2]),stop/="%"===m3[3]?100:bounds.width):stop=i*step,gradient.colorStops.push({color:m3[1],stop:stop})}return gradient},Generate.Gradient=function(src,bounds){if(0!==bounds.width&&0!==bounds.height){var gradient,grad,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");if(canvas.width=bounds.width,canvas.height=bounds.height,gradient=_html2canvas.Generate.parseGradient(src,bounds))switch(gradient.type){case"linear":grad=ctx.createLinearGradient(gradient.x0,gradient.y0,gradient.x1,gradient.y1),gradient.colorStops.forEach(addScrollStops(grad)),ctx.fillStyle=grad,ctx.fillRect(0,0,bounds.width,bounds.height);break;case"circle":grad=ctx.createRadialGradient(gradient.cx,gradient.cy,0,gradient.cx,gradient.cy,gradient.rx),gradient.colorStops.forEach(addScrollStops(grad)),ctx.fillStyle=grad,ctx.fillRect(0,0,bounds.width,bounds.height);break;case"ellipse":var canvasRadial=document.createElement("canvas"),ctxRadial=canvasRadial.getContext("2d"),ri=Math.max(gradient.rx,gradient.ry),di=2*ri;canvasRadial.width=canvasRadial.height=di,grad=ctxRadial.createRadialGradient(gradient.rx,gradient.ry,0,gradient.rx,gradient.ry,ri),gradient.colorStops.forEach(addScrollStops(grad)),ctxRadial.fillStyle=grad,ctxRadial.fillRect(0,0,di,di),ctx.fillStyle=gradient.colorStops[gradient.colorStops.length-1].color,ctx.fillRect(0,0,canvas.width,canvas.height),ctx.drawImage(canvasRadial,gradient.cx-gradient.rx,gradient.cy-gradient.ry,2*gradient.rx,2*gradient.ry)}return canvas}},Generate.ListAlpha=function(number){var modulus,tmp="";do modulus=number%26,tmp=String.fromCharCode(modulus+64)+tmp,number/=26;while(26*number>26);return tmp},Generate.ListRoman=function(number){var v,romanArray=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],decimal=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],roman="",len=romanArray.length;if(0>=number||number>=4e3)return number;for(v=0;len>v;v+=1)for(;number>=decimal[v];)number-=decimal[v],roman+=romanArray[v];return roman}}(),_html2canvas.Parse=function(images,options){function documentWidth(){return Math.max(Math.max(doc.body.scrollWidth,doc.documentElement.scrollWidth),Math.max(doc.body.offsetWidth,doc.documentElement.offsetWidth),Math.max(doc.body.clientWidth,doc.documentElement.clientWidth))}function documentHeight(){return Math.max(Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight),Math.max(doc.body.offsetHeight,doc.documentElement.offsetHeight),Math.max(doc.body.clientHeight,doc.documentElement.clientHeight))}function getCSSInt(element,attribute){var val=parseInt(getCSS(element,attribute),10);return isNaN(val)?0:val}function renderRect(ctx,x,y,w,h,bgcolor){"transparent"!==bgcolor&&(ctx.setVariable("fillStyle",bgcolor),ctx.fillRect(x,y,w,h),numDraws+=1)}function capitalize(m,p1,p2){return m.length>0?p1+p2.toUpperCase():void 0}function textTransform(text,transform){switch(transform){case"lowercase":return text.toLowerCase();case"capitalize":return text.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case"uppercase":return text.toUpperCase();default:return text}}function noLetterSpacing(letter_spacing){return/^(normal|none|0px)$/.test(letter_spacing)}function drawText(currentText,x,y,ctx){null!==currentText&&Util.trimText(currentText).length>0&&(ctx.fillText(currentText,x,y),numDraws+=1)}function setTextVariables(ctx,el,text_decoration,color){var align=!1,bold=getCSS(el,"fontWeight"),family=getCSS(el,"fontFamily"),size=getCSS(el,"fontSize"),shadows=Util.parseTextShadows(getCSS(el,"textShadow"));switch(parseInt(bold,10)){case 401:bold="bold";break;case 400:bold="normal"}return ctx.setVariable("fillStyle",color),ctx.setVariable("font",[getCSS(el,"fontStyle"),getCSS(el,"fontVariant"),bold,size,family].join(" ")),ctx.setVariable("textAlign",align?"right":"left"),shadows.length&&(ctx.setVariable("shadowColor",shadows[0].color),ctx.setVariable("shadowOffsetX",shadows[0].offsetX),ctx.setVariable("shadowOffsetY",shadows[0].offsetY),ctx.setVariable("shadowBlur",shadows[0].blur)),"none"!==text_decoration?Util.Font(family,size,doc):void 0}function renderTextDecoration(ctx,text_decoration,bounds,metrics,color){switch(text_decoration){case"underline":renderRect(ctx,bounds.left,Math.round(bounds.top+metrics.baseline+metrics.lineWidth),bounds.width,1,color);break;case"overline":renderRect(ctx,bounds.left,Math.round(bounds.top),bounds.width,1,color);break;case"line-through":renderRect(ctx,bounds.left,Math.ceil(bounds.top+metrics.middle+metrics.lineWidth),bounds.width,1,color)}}function getTextBounds(state,text,textDecoration,isLast,transform){var bounds;if(support.rangeBounds&&!transform)("none"!==textDecoration||0!==Util.trimText(text).length)&&(bounds=textRangeBounds(text,state.node,state.textOffset)),state.textOffset+=text.length;else if(state.node&&"string"==typeof state.node.nodeValue){var newTextNode=isLast?state.node.splitText(text.length):null;bounds=textWrapperBounds(state.node,transform),state.node=newTextNode}return bounds}function textRangeBounds(text,textNode,textOffset){var range=doc.createRange();return range.setStart(textNode,textOffset),range.setEnd(textNode,textOffset+text.length),range.getBoundingClientRect()}function textWrapperBounds(oldTextNode,transform){var parent=oldTextNode.parentNode,wrapElement=doc.createElement("wrapper"),backupText=oldTextNode.cloneNode(!0);wrapElement.appendChild(oldTextNode.cloneNode(!0)),parent.replaceChild(wrapElement,oldTextNode);var bounds=transform?Util.OffsetBounds(wrapElement):Util.Bounds(wrapElement);return parent.replaceChild(backupText,wrapElement),bounds}function renderText(el,textNode,stack){var metrics,textList,ctx=stack.ctx,color=getCSS(el,"color"),textDecoration=getCSS(el,"textDecoration"),textAlign=getCSS(el,"textAlign"),state={node:textNode,textOffset:0};Util.trimText(textNode.nodeValue).length>0&&(textNode.nodeValue=textTransform(textNode.nodeValue,getCSS(el,"textTransform")),textAlign=textAlign.replace(["-webkit-auto"],["auto"]),textList=textNode.nodeValue.split(!options.letterRendering&&/^(left|right|justify|auto)$/.test(textAlign)&&noLetterSpacing(getCSS(el,"letterSpacing"))?/(\b| )/:""),metrics=setTextVariables(ctx,el,textDecoration,color),options.chinese&&textList.forEach(function(word,index){/.*[\u4E00-\u9FA5].*$/.test(word)&&(word=word.split(""),word.unshift(index,1),textList.splice.apply(textList,word))}),textList.forEach(function(text,index){var bounds=getTextBounds(state,text,textDecoration,index<textList.length-1,stack.transform.matrix);if(bounds){var eleTop=bounds.top+bounds.height;_html2canvas.Util.isFixedEle&&(eleTop+=window.zCurrentScrollTop),drawText(text,bounds.left,eleTop,ctx),renderTextDecoration(ctx,textDecoration,bounds,metrics,color)}}))}function listPosition(element,val){var originalType,bounds,boundElement=doc.createElement("boundelement");return boundElement.style.display="inline",originalType=element.style.listStyleType,element.style.listStyleType="none",boundElement.appendChild(doc.createTextNode(val)),element.insertBefore(boundElement,element.firstChild),bounds=Util.Bounds(boundElement),element.removeChild(boundElement),element.style.listStyleType=originalType,bounds}function elementIndex(el){var i=-1,count=1,childs=el.parentNode.childNodes;if(el.parentNode){for(;childs[++i]!==el;)1===childs[i].nodeType&&count++;return count}return-1}function listItemText(element,type){var text,currentIndex=elementIndex(element);switch(type){case"decimal":text=currentIndex;break;case"decimal-leading-zero":text=1===currentIndex.toString().length?currentIndex="0"+currentIndex.toString():currentIndex.toString();break;case"upper-roman":text=_html2canvas.Generate.ListRoman(currentIndex);break;case"lower-roman":text=_html2canvas.Generate.ListRoman(currentIndex).toLowerCase();break;case"lower-alpha":text=_html2canvas.Generate.ListAlpha(currentIndex).toLowerCase();break;case"upper-alpha":text=_html2canvas.Generate.ListAlpha(currentIndex)}return text+". "}function renderListItem(element,stack,elBounds){var x,text,listBounds,ctx=stack.ctx,type=getCSS(element,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(type)){if(text=listItemText(element,type),listBounds=listPosition(element,text),setTextVariables(ctx,element,"none",getCSS(element,"color")),"inside"!==getCSS(element,"listStylePosition"))return;ctx.setVariable("textAlign","left"),x=elBounds.left,drawText(text,x,listBounds.bottom,ctx)}}function loadImage(src){var img=images[src];return img&&img.succeeded===!0?img.img:!1}function clipBounds(src,dst){var x=Math.max(src.left,dst.left),y=Math.max(src.top,dst.top),x2=Math.min(src.left+src.width,dst.left+dst.width),y2=Math.min(src.top+src.height,dst.top+dst.height);return{left:x,top:y,width:x2-x,height:y2-y}}function setZ(element,stack,parentStack){var newContext,isPositioned="static"!==stack.cssPosition,zIndex=isPositioned?getCSS(element,"zIndex"):"auto",opacity=getCSS(element,"opacity"),isFloated="none"!==getCSS(element,"cssFloat");stack.zIndex=newContext=h2czContext(zIndex),newContext.isPositioned=isPositioned,newContext.isFloated=isFloated,newContext.opacity=opacity,newContext.ownStacking="auto"!==zIndex||1>opacity,parentStack&&parentStack.zIndex.children.push(stack)}function renderImage(ctx,element,image,bounds,borders){var paddingLeft=getCSSInt(element,"paddingLeft"),paddingTop=getCSSInt(element,"paddingTop"),paddingRight=getCSSInt(element,"paddingRight"),paddingBottom=getCSSInt(element,"paddingBottom");drawImage(ctx,image,0,0,image.width,image.height,bounds.left+paddingLeft+borders[3].width,bounds.top+paddingTop+borders[0].width,bounds.width-(borders[1].width+borders[3].width+paddingLeft+paddingRight),bounds.height-(borders[0].width+borders[2].width+paddingTop+paddingBottom))}function getBorderData(element){return["Top","Right","Bottom","Left"].map(function(side){return{width:getCSSInt(element,"border"+side+"Width"),color:getCSS(element,"border"+side+"Color")}})}function getBorderRadiusData(element){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(side){return getCSS(element,"border"+side+"Radius")})}function bezierCurve(start,startControl,endControl,end){var lerp=function(a,b,t){return{x:a.x+(b.x-a.x)*t,y:a.y+(b.y-a.y)*t}};return{start:start,startControl:startControl,endControl:endControl,end:end,subdivide:function(t){var ab=lerp(start,startControl,t),bc=lerp(startControl,endControl,t),cd=lerp(endControl,end,t),abbc=lerp(ab,bc,t),bccd=lerp(bc,cd,t),dest=lerp(abbc,bccd,t);return[bezierCurve(start,ab,abbc,dest),bezierCurve(dest,bccd,cd,end)]},curveTo:function(borderArgs){borderArgs.push(["bezierCurve",startControl.x,startControl.y,endControl.x,endControl.y,end.x,end.y])},curveToReversed:function(borderArgs){borderArgs.push(["bezierCurve",endControl.x,endControl.y,startControl.x,startControl.y,start.x,start.y])}}}function parseCorner(borderArgs,radius1,radius2,corner1,corner2,x,y){radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",corner1[0].start.x,corner1[0].start.y]),corner1[0].curveTo(borderArgs),corner1[1].curveTo(borderArgs)):borderArgs.push(["line",x,y]),(radius2[0]>0||radius2[1]>0)&&borderArgs.push(["line",corner2[0].start.x,corner2[0].start.y])}function drawSide(borderData,radius1,radius2,outer1,inner1,outer2,inner2){var borderArgs=[];return radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",outer1[1].start.x,outer1[1].start.y]),outer1[1].curveTo(borderArgs)):borderArgs.push(["line",borderData.c1[0],borderData.c1[1]]),radius2[0]>0||radius2[1]>0?(borderArgs.push(["line",outer2[0].start.x,outer2[0].start.y]),outer2[0].curveTo(borderArgs),borderArgs.push(["line",inner2[0].end.x,inner2[0].end.y]),inner2[0].curveToReversed(borderArgs)):(borderArgs.push(["line",borderData.c2[0],borderData.c2[1]]),borderArgs.push(["line",borderData.c3[0],borderData.c3[1]])),radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",inner1[1].end.x,inner1[1].end.y]),inner1[1].curveToReversed(borderArgs)):borderArgs.push(["line",borderData.c4[0],borderData.c4[1]]),borderArgs}function calculateCurvePoints(bounds,borderRadius,borders){var x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,tlh=borderRadius[0][0],tlv=borderRadius[0][1],trh=borderRadius[1][0],trv=borderRadius[1][1],brh=borderRadius[2][0],brv=borderRadius[2][1],blh=borderRadius[3][0],blv=borderRadius[3][1],halfHeight=Math.floor(height/2);tlh=tlh>halfHeight?halfHeight:tlh,tlv=tlv>halfHeight?halfHeight:tlv,trh=trh>halfHeight?halfHeight:trh,trv=trv>halfHeight?halfHeight:trv,brh=brh>halfHeight?halfHeight:brh,brv=brv>halfHeight?halfHeight:brv,blh=blh>halfHeight?halfHeight:blh,blv=blv>halfHeight?halfHeight:blv;var topWidth=width-trh,rightHeight=height-brv,bottomWidth=width-brh,leftHeight=height-blv;return{topLeftOuter:getCurvePoints(x,y,tlh,tlv).topLeft.subdivide(.5),topLeftInner:getCurvePoints(x+borders[3].width,y+borders[0].width,Math.max(0,tlh-borders[3].width),Math.max(0,tlv-borders[0].width)).topLeft.subdivide(.5),topRightOuter:getCurvePoints(x+topWidth,y,trh,trv).topRight.subdivide(.5),topRightInner:getCurvePoints(x+Math.min(topWidth,width+borders[3].width),y+borders[0].width,topWidth>width+borders[3].width?0:trh-borders[3].width,trv-borders[0].width).topRight.subdivide(.5),bottomRightOuter:getCurvePoints(x+bottomWidth,y+rightHeight,brh,brv).bottomRight.subdivide(.5),bottomRightInner:getCurvePoints(x+Math.min(bottomWidth,width+borders[3].width),y+Math.min(rightHeight,height+borders[0].width),Math.max(0,brh-borders[1].width),Math.max(0,brv-borders[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:getCurvePoints(x,y+leftHeight,blh,blv).bottomLeft.subdivide(.5),bottomLeftInner:getCurvePoints(x+borders[3].width,y+leftHeight,Math.max(0,blh-borders[3].width),Math.max(0,blv-borders[2].width)).bottomLeft.subdivide(.5)}}function getBorderClip(element,borderPoints,borders,radius,bounds){var backgroundClip=getCSS(element,"backgroundClip"),borderArgs=[];switch(backgroundClip){case"content-box":case"padding-box":parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftInner,borderPoints.topRightInner,bounds.left+borders[3].width,bounds.top+borders[0].width),parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightInner,borderPoints.bottomRightInner,bounds.left+bounds.width-borders[1].width,bounds.top+borders[0].width),parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightInner,borderPoints.bottomLeftInner,bounds.left+bounds.width-borders[1].width,bounds.top+bounds.height-borders[2].width),parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftInner,borderPoints.topLeftInner,bounds.left+borders[3].width,bounds.top+bounds.height-borders[2].width);break;default:parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topRightOuter,bounds.left,bounds.top),parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightOuter,borderPoints.bottomRightOuter,bounds.left+bounds.width,bounds.top),parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomLeftOuter,bounds.left+bounds.width,bounds.top+bounds.height),parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.topLeftOuter,bounds.left,bounds.top+bounds.height)}return borderArgs}function parseBorders(element,bounds,borders){var borderSide,bx,by,bw,bh,borderArgs,x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,borderRadius=getBorderRadiusData(element),borderPoints=calculateCurvePoints(bounds,borderRadius,borders),borderData={clip:getBorderClip(element,borderPoints,borders,borderRadius,bounds),borders:[]};for(borderSide=0;4>borderSide;borderSide++)if(borders[borderSide].width>0){switch(bx=x,by=y,bw=width,bh=height-borders[2].width,borderSide){case 0:bh=borders[0].width,borderArgs=drawSide({c1:[bx,by],c2:[bx+bw,by],c3:[bx+bw-borders[1].width,by+bh],c4:[bx+borders[3].width,by+bh]},borderRadius[0],borderRadius[1],borderPoints.topLeftOuter,borderPoints.topLeftInner,borderPoints.topRightOuter,borderPoints.topRightInner);break;case 1:bx=x+width-borders[1].width,bw=borders[1].width,borderArgs=drawSide({c1:[bx+bw,by],c2:[bx+bw,by+bh+borders[2].width],c3:[bx,by+bh],c4:[bx,by+borders[0].width]},borderRadius[1],borderRadius[2],borderPoints.topRightOuter,borderPoints.topRightInner,borderPoints.bottomRightOuter,borderPoints.bottomRightInner);break;case 2:by=by+height-borders[2].width,bh=borders[2].width,borderArgs=drawSide({c1:[bx+bw,by+bh],c2:[bx,by+bh],c3:[bx+borders[3].width,by],c4:[bx+bw-borders[3].width,by]},borderRadius[2],borderRadius[3],borderPoints.bottomRightOuter,borderPoints.bottomRightInner,borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner);break;case 3:bw=borders[3].width,borderArgs=drawSide({c1:[bx,by+bh+borders[2].width],c2:[bx,by],c3:[bx+bw,by+borders[0].width],c4:[bx+bw,by+bh]},borderRadius[3],borderRadius[0],borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner,borderPoints.topLeftOuter,borderPoints.topLeftInner)}borderData.borders.push({args:borderArgs,color:borders[borderSide].color})}return borderData}function createShape(ctx,args){var shape=ctx.drawShape();return args.forEach(function(border,index){shape[0===index?"moveTo":border[0]+"To"].apply(null,border.slice(1))}),shape}function renderBorders(ctx,borderArgs,color){"transparent"!==color&&(ctx.setVariable("fillStyle",color),createShape(ctx,borderArgs),ctx.fill(),numDraws+=1)}function renderFormValue(el,bounds,stack){var textValue,textNode,valueWrap=doc.createElement("valuewrap"),cssPropertyArray=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];cssPropertyArray.forEach(function(property){try{valueWrap.style[property]=getCSS(el,property)}catch(e){Util.log("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}}),valueWrap.style.borderColor="black",valueWrap.style.borderStyle="solid",valueWrap.style.display="block",valueWrap.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(el.type)||"SELECT"===el.nodeName)&&(valueWrap.style.lineHeight=getCSS(el,"height")),valueWrap.style.top=bounds.top+"px",valueWrap.style.left=bounds.left+"px",textValue="SELECT"===el.nodeName?(el.options[el.selectedIndex]||0).text:el.value,textValue||(textValue=el.placeholder),textNode=doc.createTextNode(textValue),valueWrap.appendChild(textNode),body.appendChild(valueWrap),renderText(el,textNode,stack),body.removeChild(valueWrap)}function drawImage(ctx){ctx.drawImage.apply(ctx,Array.prototype.slice.call(arguments,1)),numDraws+=1}function getPseudoElement(el,which){var elStyle=window.getComputedStyle(el,which);if(elStyle&&elStyle.content&&"none"!==elStyle.content&&"-moz-alt-content"!==elStyle.content&&"none"!==elStyle.display){var content=elStyle.content+"",first=content.substr(0,1);first===content.substr(content.length-1)&&first.match(/'|"/)&&(content=content.substr(1,content.length-2));var isImage="url"===content.substr(0,3),elps=document.createElement(isImage?"img":"span");elps.className=pseudoHide+"-before "+pseudoHide+"-after";for(var prop in elStyle)if(indexedProperty(prop)&&"cssText"!==prop)try{elps.style[prop]=elStyle[prop]}catch(e){Util.log(["Tried to assign readonly property ",prop,"Error:",e])}return isImage?elps.src=Util.parseBackgroundImage(content)[0].args[0]:elps.innerHTML=content,elps}}function indexedProperty(property){return isNaN(window.parseInt(property,10))}function injectPseudoElements(el,stack){var before=getPseudoElement(el,":before"),after=getPseudoElement(el,":after");(before||after)&&(before&&(el.className+=" "+pseudoHide+"-before",el.parentNode.insertBefore(before,el),parseElement(before,stack,!0),el.parentNode.removeChild(before),el.className=el.className.replace(pseudoHide+"-before","").trim()),after&&(el.className+=" "+pseudoHide+"-after",el.appendChild(after),parseElement(after,stack,!0),el.removeChild(after),el.className=el.className.replace(pseudoHide+"-after","").trim()))}function renderBackgroundRepeat(ctx,image,backgroundPosition,bounds){var offsetX=Math.round(bounds.left+backgroundPosition.left),offsetY=Math.round(bounds.top+backgroundPosition.top);ctx.createPattern(image),ctx.translate(offsetX,offsetY),ctx.fill(),ctx.translate(-offsetX,-offsetY)}function backgroundRepeatShape(ctx,image,backgroundPosition,bounds,left,top,width,height){var args=[];args.push(["line",Math.round(left),Math.round(top)]),args.push(["line",Math.round(left+width),Math.round(top)]),args.push(["line",Math.round(left+width),Math.round(height+top)]),args.push(["line",Math.round(left),Math.round(height+top)]),createShape(ctx,args),ctx.save(),ctx.clip(),renderBackgroundRepeat(ctx,image,backgroundPosition,bounds),ctx.restore()}function renderBackgroundColor(ctx,backgroundBounds,bgcolor){renderRect(ctx,backgroundBounds.left,backgroundBounds.top,backgroundBounds.width,backgroundBounds.height,bgcolor)}function renderBackgroundRepeating(el,bounds,ctx,image,imageIndex){var backgroundSize=Util.BackgroundSize(el,bounds,image,imageIndex),backgroundPosition=Util.BackgroundPosition(el,bounds,image,imageIndex,backgroundSize),backgroundRepeat=getCSS(el,"backgroundRepeat").split(",").map(Util.trimText);switch(image=resizeImage(image,backgroundSize),backgroundRepeat=backgroundRepeat[imageIndex]||backgroundRepeat[0]){case"repeat-x":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left,bounds.top+backgroundPosition.top,99999,image.height);break;case"repeat-y":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left+backgroundPosition.left,bounds.top,image.width,99999);break;case"no-repeat":backgroundRepeatShape(ctx,image,backgroundPosition,bounds,bounds.left+backgroundPosition.left,bounds.top+backgroundPosition.top,image.width,image.height);break;default:renderBackgroundRepeat(ctx,image,backgroundPosition,{top:bounds.top,left:bounds.left,width:image.width,height:image.height})}}function renderBackgroundImage(element,bounds,ctx){for(var image,backgroundImage=getCSS(element,"backgroundImage"),backgroundImages=Util.parseBackgroundImage(backgroundImage),imageIndex=backgroundImages.length;imageIndex--;)if(backgroundImage=backgroundImages[imageIndex],backgroundImage.args&&0!==backgroundImage.args.length){var key="url"===backgroundImage.method?backgroundImage.args[0]:backgroundImage.value;image=loadImage(key),image?renderBackgroundRepeating(element,bounds,ctx,image,imageIndex):Util.log("html2canvas: Error loading background:",backgroundImage)}}function resizeImage(image,bounds){if(image.width===bounds.width&&image.height===bounds.height)return image;var ctx,canvas=doc.createElement("canvas");return canvas.width=bounds.width,canvas.height=bounds.height,ctx=canvas.getContext("2d"),drawImage(ctx,image,0,0,image.width,image.height,0,0,bounds.width,bounds.height),canvas}function setOpacity(ctx,element,parentStack){return ctx.setVariable("globalAlpha",getCSS(element,"opacity")*(parentStack?parentStack.opacity:1))}function removePx(str){return str.replace("px","")}function getTransform(element){var transform=getCSS(element,"transform")||getCSS(element,"-webkit-transform")||getCSS(element,"-moz-transform")||getCSS(element,"-ms-transform")||getCSS(element,"-o-transform"),transformOrigin=getCSS(element,"transform-origin")||getCSS(element,"-webkit-transform-origin")||getCSS(element,"-moz-transform-origin")||getCSS(element,"-ms-transform-origin")||getCSS(element,"-o-transform-origin")||"0px 0px";transformOrigin=transformOrigin.split(" ").map(removePx).map(Util.asFloat);var matrix;if(transform&&"none"!==transform){var match=transform.match(transformRegExp);if(match)switch(match[1]){case"matrix":matrix=match[2].split(",").map(Util.trimText).map(Util.asFloat)}}return{origin:transformOrigin,matrix:matrix}}function createStack(element,parentStack,bounds,transform){var ctx=h2cRenderContext(parentStack?bounds.width:documentWidth(),parentStack?bounds.height:documentHeight()),stack={ctx:ctx,opacity:setOpacity(ctx,element,parentStack),cssPosition:getCSS(element,"position"),borders:getBorderData(element),transform:transform,clip:parentStack&&parentStack.clip?Util.Extend({},parentStack.clip):null};return setZ(element,stack,parentStack),options.useOverflow===!0&&/(hidden|scroll|auto)/.test(getCSS(element,"overflow"))===!0&&/(BODY)/i.test(element.nodeName)===!1&&(stack.clip=stack.clip?clipBounds(stack.clip,bounds):bounds),stack}function getBackgroundBounds(borders,bounds,clip){var backgroundBounds={left:bounds.left+borders[3].width,top:bounds.top+borders[0].width,width:bounds.width-(borders[1].width+borders[3].width),height:bounds.height-(borders[0].width+borders[2].width)};return clip&&(backgroundBounds=clipBounds(backgroundBounds,clip)),backgroundBounds}function getBounds(element,transform){var bounds=transform.matrix?Util.OffsetBounds(element):Util.Bounds(element);return transform.origin[0]+=bounds.left,transform.origin[1]+=bounds.top,bounds}function renderElement(element,parentStack,pseudoElement,ignoreBackground){var image,transform=getTransform(element,parentStack),bounds=getBounds(element,transform),stack=createStack(element,parentStack,bounds,transform),borders=stack.borders,ctx=stack.ctx,backgroundBounds=getBackgroundBounds(borders,bounds,stack.clip),borderData=parseBorders(element,bounds,borders),backgroundColor=ignoreElementsRegExp.test(element.nodeName)?"#efefef":getCSS(element,"backgroundColor");switch(createShape(ctx,borderData.clip),ctx.save(),ctx.clip(),backgroundBounds.height>0&&backgroundBounds.width>0&&!ignoreBackground?(renderBackgroundColor(ctx,bounds,backgroundColor),renderBackgroundImage(element,backgroundBounds,ctx)):ignoreBackground&&(stack.backgroundColor=backgroundColor),ctx.restore(),borderData.borders.forEach(function(border){renderBorders(ctx,border.args,border.color)}),pseudoElement||injectPseudoElements(element,stack),element.nodeName){case"IMG":(image=loadImage(element.getAttribute("src")))?renderImage(ctx,element,image,bounds,borders):Util.log("html2canvas: Error loading <img>:"+element.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(element.type)&&(element.value||element.placeholder||"").length>0&&renderFormValue(element,bounds,stack);break;case"TEXTAREA":(element.value||element.placeholder||"").length>0&&renderFormValue(element,bounds,stack);break;case"SELECT":(element.options||element.placeholder||"").length>0&&renderFormValue(element,bounds,stack);break;case"LI":renderListItem(element,stack,backgroundBounds);break;case"CANVAS":renderImage(ctx,element,element,bounds,borders)}return stack}function isElementVisible(element){return"none"!==getCSS(element,"display")&&"hidden"!==getCSS(element,"visibility")&&!element.hasAttribute("data-html2canvas-ignore")}function parseElement(element,stack,pseudoElement,isParentFixed){if(isElementVisible(element)){var isInViewPort,isFixedEle;isParentFixed?isInViewPort=!0:(isFixedEle="fixed"===getCSS(element,"position")?!0:!1,isInViewPort=isFixedEle||_html2canvas.Util.isElementInViewport(element,options)),_html2canvas.Util.isFixedEle=isFixedEle||isParentFixed?!0:!1,isInViewPort&&(stack=renderElement(element,stack,pseudoElement,!1)||stack,ignoreElementsRegExp.test(element.nodeName)||parseChildren(element,stack,pseudoElement,_html2canvas.Util.isFixedEle))}}function parseChildren(element,stack,pseudoElement,isParentFixed){Util.Children(element).forEach(function(node){node.nodeType===node.ELEMENT_NODE?parseElement(node,stack,pseudoElement,isParentFixed):node.nodeType===node.TEXT_NODE&&renderText(element,node,stack)})}function init(){var background=getCSS(document.documentElement,"backgroundColor"),transparentBackground=Util.isTransparent(background)&&element===document.body,stack=renderElement(element,null,!1,transparentBackground);return parseChildren(element,stack),transparentBackground&&(background=stack.backgroundColor),body.removeChild(hidePseudoElements),{backgroundColor:background,stack:stack}}window.scroll(0,0);var element=options.elements===undefined?document.body:options.elements[0],numDraws=0,doc=element.ownerDocument,Util=_html2canvas.Util,support=Util.Support(options,doc),ignoreElementsRegExp=new RegExp("("+options.ignoreElements+")"),body=doc.body,getCSS=Util.getCSS,pseudoHide="___html2canvas___pseudoelement",hidePseudoElements=doc.createElement("style");hidePseudoElements.innerHTML="."+pseudoHide+'-before:before { content: "" !important; display: none !important; }.'+pseudoHide+'-after:after { content: "" !important; display: none !important; }',body.appendChild(hidePseudoElements),images=images||{};var getCurvePoints=function(kappa){return function(x,y,r1,r2){var ox=r1*kappa,oy=r2*kappa,xm=x+r1,ym=y+r2;return{topLeft:bezierCurve({x:x,y:ym},{x:x,y:ym-oy},{x:xm-ox,y:y},{x:xm,y:y}),topRight:bezierCurve({x:x,y:y},{x:x+ox,y:y},{x:xm,y:ym-oy},{x:xm,y:ym}),bottomRight:bezierCurve({x:xm,y:y},{x:xm,y:y+oy},{x:x+ox,y:ym},{x:x,y:ym}),bottomLeft:bezierCurve({x:xm,y:ym},{x:xm-ox,y:ym},{x:x,y:y+oy},{x:x,y:y})}}}(4*((Math.sqrt(2)-1)/3)),transformRegExp=/(matrix)\((.+)\)/;return init()},_html2canvas.Preload=function(options){function isSameOrigin(url){link.href=url,link.href=link.href;var origin=link.protocol+link.host;return origin===pageOrigin}function start(){Util.log("html2canvas: start: images: "+images.numLoaded+" / "+images.numTotal+" (failed: "+images.numFailed+")"),images.firstRun||images.numLoaded!==images.numTotal||(Util.log("Finished loading images: # "+images.numTotal+" (failed: "+images.numFailed+")"),"function"==typeof options.complete&&options.complete(images))}function proxyGetImage(url,img,imageObj){var callback_name,script,scriptUrl=options.proxy;link.href=url,url=link.href;var arr=url.split("/");"http:"===arr[0]||"https:"===arr[0]?(callback_name="html2canvas_"+count++,imageObj.callbackname=callback_name,scriptUrl+=scriptUrl.indexOf("?")>-1?"&":"?",scriptUrl+="url="+encodeURIComponent(url)+"&callback="+callback_name,script=doc.createElement("script"),window[callback_name]=function(a){"error:"===a.substring(0,6)?(imageObj.succeeded=!1,images.numLoaded++,images.numFailed++,start()):(setImageLoadHandlers(img,imageObj),img.src=a),window[callback_name]=undefined;try{delete window[callback_name]}catch(ex){}script.parentNode.removeChild(script),script=null,delete imageObj.script,delete imageObj.callbackname},script.setAttribute("type","text/javascript"),script.setAttribute("src",scriptUrl),imageObj.script=script,window.document.body.appendChild(script)):(imageObj.succeeded=!1,images.numLoaded++,images.numFailed++,start())}function loadPseudoElement(element,type){var style=window.getComputedStyle(element,type),content=style.content;"url"===content.substr(0,3)&&methods.loadImage(_html2canvas.Util.parseBackgroundImage(content)[0].args[0]),loadBackgroundImages(style.backgroundImage,element)}function loadPseudoElementImages(element){loadPseudoElement(element,":before"),loadPseudoElement(element,":after")}function loadGradientImage(backgroundImage,bounds){var img=_html2canvas.Generate.Gradient(backgroundImage,bounds);img!==undefined&&(images[backgroundImage]={img:img,succeeded:!0},images.numTotal++,images.numLoaded++,start())}function invalidBackgrounds(background_image){return background_image&&background_image.method&&background_image.args&&background_image.args.length>0}function loadBackgroundImages(background_image,el){var bounds;_html2canvas.Util.parseBackgroundImage(background_image).filter(invalidBackgrounds).forEach(function(background_image){"url"===background_image.method?methods.loadImage(background_image.args[0]):background_image.method.match(/\-?gradient$/)&&(bounds===undefined&&(bounds=_html2canvas.Util.Bounds(el)),loadGradientImage(background_image.value,bounds))})}function getImages(el){var elNodeType=!1;try{Util.Children(el).forEach(getImages)}catch(e){}try{elNodeType=el.nodeType}catch(ex){elNodeType=!1,Util.log("html2canvas: failed to access some element's nodeType - Exception: "+ex.message)}if((1===elNodeType||elNodeType===undefined)&&_html2canvas.Util.isElementInViewport(el,options,window.zCurrentScrollTop)){loadPseudoElementImages(el);try{loadBackgroundImages(Util.getCSS(el,"backgroundImage"),el)}catch(e){Util.log("html2canvas: failed to get background-image - Exception: "+e.message)}loadBackgroundImages(el)}}function setImageLoadHandlers(img,imageObj){img.onload=function(){imageObj.timer!==undefined&&window.clearTimeout(imageObj.timer),images.numLoaded++,imageObj.succeeded=!0,img.onerror=img.onload=null,start()},img.onerror=function(){if("anonymous"===img.crossOrigin&&(window.clearTimeout(imageObj.timer),options.proxy)){var src=img.src;return img=new Image,imageObj.img=img,img.src=src,void proxyGetImage(img.src,img,imageObj)}images.numLoaded++,images.numFailed++,imageObj.succeeded=!1,img.onerror=img.onload=null,start()}}window.zCurrentScrollTop=document.body.scrollTop||document.documentElement.scrollTop;for(var pageOrigin,methods,i,timeoutTimer,images={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},Util=_html2canvas.Util,count=0,element=options.elements[0]||document.body,doc=element.ownerDocument,domImages1=element.getElementsByTagName("img"),imgLen1=domImages1.length,link=doc.createElement("a"),supportCORS=function(img){return img.crossOrigin!==undefined}(new Image),domImages=new Array,imagesURL=new Array,i=0;imgLen1>i;i++)_html2canvas.Util.isElementInViewport(domImages1[i],options,window.zCurrentScrollTop)&&-1===imagesURL.indexOf(domImages1[i].src)&&(imagesURL.push(domImages1[i].src),domImages.push(domImages1[i]));var imgLen=domImages.length;for(link.href=window.location.href,pageOrigin=link.protocol+link.host,methods={loadImage:function(src){var img,imageObj;src&&images[src]===undefined&&(img=new Image,src.match(/data:image\/.*;base64,/i)?(img.src=src.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),imageObj=images[src]={img:img},images.numTotal++,setImageLoadHandlers(img,imageObj)):isSameOrigin(src)||options.allowTaint===!0?(imageObj=images[src]={img:img},images.numTotal++,setImageLoadHandlers(img,imageObj),img.src=src):supportCORS&&!options.allowTaint&&options.useCORS?(img.crossOrigin="anonymous",imageObj=images[src]={img:img},images.numTotal++,setImageLoadHandlers(img,imageObj),img.src=src):options.proxy&&(imageObj=images[src]={img:img},images.numTotal++,proxyGetImage(src,img,imageObj)))},cleanupDOM:function(cause){var img,src;if(!images.cleanupDone){Util.log(cause&&"string"==typeof cause?"html2canvas: Cleanup because: "+cause:"html2canvas: Cleanup after timeout: "+options.timeout+" ms.");for(src in images)if(images.hasOwnProperty(src)&&(img=images[src],"object"==typeof img&&img.callbackname&&img.succeeded===undefined)){window[img.callbackname]=undefined;try{delete window[img.callbackname]}catch(ex){}img.script&&img.script.parentNode&&(img.script.setAttribute("src","about:blank"),img.script.parentNode.removeChild(img.script)),images.numLoaded++,images.numFailed++,Util.log("html2canvas: Cleaned up failed img: '"+src+"' Steps: "+images.numLoaded+" / "+images.numTotal)}window.stop!==undefined?window.stop():document.execCommand!==undefined&&document.execCommand("Stop",!1),document.close!==undefined&&document.close(),images.cleanupDone=!0,cause&&"string"==typeof cause||start()}},renderingDone:function(){timeoutTimer&&window.clearTimeout(timeoutTimer)}},options.timeout>0&&(timeoutTimer=window.setTimeout(methods.cleanupDOM,options.timeout)),Util.log("html2canvas: Preload starts: finding background-images"),images.firstRun=!0,getImages(element),Util.log("html2canvas: Preload: Finding images"),i=0;imgLen>i;i+=1)methods.loadImage(domImages[i].getAttribute("src"));return images.firstRun=!1,Util.log("html2canvas: Preload: Done."),images.numTotal===images.numLoaded&&start(),methods},_html2canvas.Renderer=function(parseQueue,options){function createRenderQueue(parseQueue){function sortZ(context){Object.keys(context).sort().forEach(function(zi){var nonPositioned=[],floated=[],positioned=[],list=[];context[zi].forEach(function(v){v.node.zIndex.isPositioned||v.node.zIndex.opacity<1?positioned.push(v):v.node.zIndex.isFloated?floated.push(v):nonPositioned.push(v)}),function walk(arr){arr.forEach(function(v){list.push(v),v.children&&walk(v.children)})}(nonPositioned.concat(floated,positioned)),list.forEach(function(v){v.context?sortZ(v.context):queue.push(v.node)})})}var rootContext,queue=[];return rootContext=function(rootNode){function insert(context,node,specialParent){var zi="auto"===node.zIndex.zindex?0:Number(node.zIndex.zindex),contextForChildren=context,isPositioned=node.zIndex.isPositioned,isFloated=node.zIndex.isFloated,stub={node:node},childrenDest=specialParent;node.zIndex.ownStacking?(contextForChildren=stub.context={"!":[{node:node,children:[]}]},childrenDest=undefined):(isPositioned||isFloated)&&(childrenDest=stub.children=[]),0===zi&&specialParent?specialParent.push(stub):(context[zi]||(context[zi]=[]),context[zi].push(stub)),node.zIndex.children.forEach(function(childNode){insert(contextForChildren,childNode,childrenDest)})}var rootContext={};return insert(rootContext,rootNode),rootContext}(parseQueue),sortZ(rootContext),queue}function getRenderer(rendererName){var renderer;if("string"==typeof options.renderer&&_html2canvas.Renderer[rendererName]!==undefined)renderer=_html2canvas.Renderer[rendererName](options);else{if("function"!=typeof rendererName)throw new Error("Unknown renderer");renderer=rendererName(options)}if("function"!=typeof renderer)throw new Error("Invalid renderer defined");return renderer}return getRenderer(options.renderer)(parseQueue,options,document,createRenderQueue(parseQueue.stack),_html2canvas)},_html2canvas.Util.Support=function(options,doc){function supportSVGRendering(){var img=new Image,canvas=doc.createElement("canvas"),ctx=canvas.getContext===undefined?!1:canvas.getContext("2d");if(ctx===!1)return!1;canvas.width=canvas.height=10,img.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{ctx.drawImage(img,0,0),canvas.toDataURL()}catch(e){return!1}return _html2canvas.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function supportRangeBounds(){var r,testElement,rangeBounds,rangeHeight,support=!1;return doc.createRange&&(r=doc.createRange(),r.getBoundingClientRect&&(testElement=doc.createElement("boundtest"),testElement.style.height="123px",testElement.style.display="block",doc.body.appendChild(testElement),r.selectNode(testElement),rangeBounds=r.getBoundingClientRect(),rangeHeight=rangeBounds.height,123===rangeHeight&&(support=!0),doc.body.removeChild(testElement))),support}return{rangeBounds:supportRangeBounds(),svgRendering:options.svgRendering&&supportSVGRendering()}},_html2canvas.Util.isElementInViewport=function(element,options,currentScrollTop){var eleOffsetTop=element.getBoundingClientRect().top,eleOffsetLeft=element.getBoundingClientRect().left;return currentScrollTop&&(eleOffsetTop+=currentScrollTop),null===element.offsetParent?!1:(eleOffsetTop>=options.grabArea.top&&eleOffsetTop<=options.grabArea.top+options.grabArea.height||eleOffsetTop<=options.grabArea.top&&eleOffsetTop+element.offsetHeight>=options.grabArea.top||!element.offsetHeight)&&(eleOffsetLeft>=options.grabArea.left&&eleOffsetLeft<=options.grabArea.left+options.grabArea.width||eleOffsetLeft<=options.grabArea.left&&eleOffsetLeft+element.offsetWidth>=options.grabArea.left||!element.offsetWidth)?!0:!1},window.html2canvas=function(elements,opts){elements=elements.length?elements:[elements];var queue,canvas,options={logging:!1,elements:elements,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas",grabArea:undefined};return options=_html2canvas.Util.Extend(opts,options),_html2canvas.logging=options.logging,options.complete=function(images){("function"!=typeof options.onpreloaded||options.onpreloaded(images)!==!1)&&(queue=_html2canvas.Parse(images,options),("function"!=typeof options.onparsed||options.onparsed(queue)!==!1)&&(canvas=_html2canvas.Renderer(queue,options),"function"==typeof options.onrendered&&options.onrendered(canvas)))},window.setTimeout(function(){_html2canvas.Preload(options)},0),{render:function(queue,opts){return _html2canvas.Renderer(queue,_html2canvas.Util.Extend(opts,options))},parse:function(images,opts){return _html2canvas.Parse(images,_html2canvas.Util.Extend(opts,options))},preload:function(opts){return _html2canvas.Preload(_html2canvas.Util.Extend(opts,options))},log:_html2canvas.Util.log}},window.html2canvas.log=_html2canvas.Util.log,window.html2canvas.Renderer={Canvas:undefined},_html2canvas.Renderer.Canvas=function(options){function createShape(ctx,args){ctx.beginPath(),args.forEach(function(arg){ctx[arg.name].apply(ctx,arg.arguments)}),ctx.closePath()}function safeImage(item){if(-1===safeImages.indexOf(item.arguments[0].src)){testctx.drawImage(item.arguments[0],0,0);try{testctx.getImageData(0,0,1,1)}catch(e){return testCanvas=doc.createElement("canvas"),testctx=testCanvas.getContext("2d"),!1}safeImages.push(item.arguments[0].src)}return!0}function renderItem(ctx,item){switch(item.type){case"variable":ctx[item.name]=item.arguments;break;case"function":switch(item.name){case"createPattern":if(item.arguments[0].width>0&&item.arguments[0].height>0)try{ctx.fillStyle=ctx.createPattern(item.arguments[0],"repeat")}catch(e){Util.log("html2canvas: Renderer: Error creating pattern",e.message)}break;case"drawShape":createShape(ctx,item.arguments);break;case"drawImage":item.arguments[8]>0&&item.arguments[7]>0&&(!options.taintTest||options.taintTest&&safeImage(item))&&ctx.drawImage.apply(ctx,item.arguments);break;default:ctx[item.name].apply(ctx,item.arguments)}}}options=options||{};var doc=document,safeImages=[],testCanvas=document.createElement("canvas"),testctx=testCanvas.getContext("2d"),Util=_html2canvas.Util,canvas=options.canvas||doc.createElement("canvas");return function(parsedData,options,document,queue,_html2canvas){var newCanvas,bounds,fstyle,ctx=canvas.getContext("2d"),zStack=parsedData.stack;return canvas.width=canvas.style.width=options.width||zStack.ctx.width,canvas.height=canvas.style.height=options.height||zStack.ctx.height,fstyle=ctx.fillStyle,ctx.fillStyle=Util.isTransparent(zStack.backgroundColor)&&options.background!==undefined?options.background:parsedData.backgroundColor,ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle=fstyle,queue.forEach(function(storageContext){ctx.textBaseline="bottom",ctx.save(),storageContext.transform.matrix&&(ctx.translate(storageContext.transform.origin[0],storageContext.transform.origin[1]),ctx.transform.apply(ctx,storageContext.transform.matrix),ctx.translate(-storageContext.transform.origin[0],-storageContext.transform.origin[1])),storageContext.clip&&(ctx.beginPath(),ctx.rect(storageContext.clip.left,storageContext.clip.top,storageContext.clip.width,storageContext.clip.height),ctx.clip()),storageContext.ctx.storage&&storageContext.ctx.storage.forEach(function(item){renderItem(ctx,item)}),ctx.restore()}),Util.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===options.elements.length&&"object"==typeof options.elements[0]&&"BODY"!==options.elements[0].nodeName?(bounds=_html2canvas.Util.Bounds(options.elements[0]),newCanvas=document.createElement("canvas"),newCanvas.width=Math.ceil(bounds.width),newCanvas.height=Math.ceil(bounds.height),ctx=newCanvas.getContext("2d"),ctx.drawImage(canvas,bounds.left,bounds.top,bounds.width,bounds.height,0,0,bounds.width,bounds.height),canvas=null,newCanvas):canvas}}}(window,document),function(){function getI18NString(key,stringArray){return i8nText=zjQuery.i18n("ztopbar",key,stringArray)}function getString(key){return ztopbar.i18nKeys["fcomponents.ztopbar."+key]}var zTopbar=function(data){function _createSwitchToMenu(){var myAppsObj=data.userInfo&&data.userInfo.appsInUse?data.userInfo.appsInUse:"/allapps";ztopbarObj._zohoAppsMenu&&myAppsObj&&ztopbarObj._signInStatus?"string"==typeof myAppsObj?getData(myAppsObj,mergeApps):mergeApps(myAppsObj):(appsContainer.addClass("ztb-collapse"),ztopbarObj._createTooltip(),checkNavigationPanel()),ztopbarObj._zohoAppsMenu&&(menu.data("itemType","switch-menu"),menu.bind("click.menu",function(){ztopbarObj._toggle(menu,zjQuery("#ztb-apps"))}))}function hideNavPanel(mainDiv){mainDiv.hide(),gotoMyApps.hide(),gotoAllApps.hide()}function checkNavigationPanel(){var hiddenMenu=0;myAppsDiv.children().length<1&&(hideNavPanel(myAppsDiv),hiddenMenu++),allAppsDiv.children().length<1&&(hideNavPanel(allAppsDiv),hiddenMenu++),2===hiddenMenu&&(zjQuery("#ztb-switch-menu").hide(),appsContainer.hide()),"block"!==gotoAllApps.css("display")&&"block"!==gotoMyApps.css("display")&&"block"!==gotoHome.css("display")&&navigationDiv.hide()}function addNonzohoApps(apps){ztopbar.nonZohoApps=void 0!=apps.length?apps:apps.apps,ztopbar.usedAppsRestAPI&&"string"==typeof ztopbar.usedAppsRestAPI?getData(ztopbar.usedAppsRestAPI,updateAppInUse):updateAppInUse(ztopbar.usedAppsRestAPI),_createSwitchToMenu()}function getData(appsObj,callback){if("string"==typeof appsObj){var myAppsData={};zjQuery.ajax({url:appsObj,type:"POST",beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset=x-user-defined")},error:function(){},success:function(responseObj){myAppsData=responseObj,"object"!=typeof myAppsData&&(myAppsData=zjQuery.parseJSON(myAppsData))}}).done(function(){"function"==typeof callback&&callback(myAppsData)})}}function updateAppInUse(appList){if(appList=void 0!=appList.length?appList:appList.appsInUse,appList&&appList.length)for(var i=0;i<appList.length;i++)for(var j=0;j<ztopbar.nonZohoApps.length;j++)ztopbar.nonZohoApps[j].name.toLowerCase().replace(/\s/g,"")===appList[i].toLowerCase().replace(/\s/g,"")&&(ztopbar.nonZohoApps[j].is_used_app=!0)}function mergeApps(myAppsObj){if(ztopbar.nonZohoApps){for(var i=0;i<ztopbar.nonZohoApps.length;i++){var attr=ztopbar.nonZohoApps[i],id=attr.name.toLowerCase().replace(/\s/g,"");attr.app_name=id,attr.app_url=attr.homePageLink,appsShortNameMap[id]=id,ztopbar.supportedApps.push(id)}myAppsObj=myAppsObj.apps||myAppsObj,zjQuery.merge(myAppsObj,ztopbar.nonZohoApps),myAppsObj.sort(function(a,b){return a.app_name.localeCompare(b.app_name)})}createMyAppsContainer(myAppsObj)}function getConfigMap(configArray){var output={};if(configArray)for(var j=0;j<configArray.length;j++){var config=configArray[j],confValue=config.config_value;output[config.config_name]=confValue||null}return output}function createMyAppsContainer(usedApps){var myApps={},tempAppArray=[];if("zoho"!==ztopbarObj._suite&&zjQuery.each(appsShortNameMap,function(i,value){tempAppArray.push(value)}),usedApps.apps){usedApps=usedApps.apps;var tempJSON={};zjQuery.each(appsShortNameMap,function(i,value){tempJSON[value]=value}),appsShortNameMap=tempJSON}for(var appNames=[],i=0;i<usedApps.length;i++){var app=usedApps[i],appName=appsShortNameMap[app.app_name.toLowerCase()];if(!appName||-1!=zjQuery.inArray(appName,appNames)){for(var inAppsList=!1,newAppName="",k=0;k<tempAppArray.length;k++)newAppName=tempAppArray[k].toLowerCase(),app.app_name.toLowerCase().indexOf(newAppName)>0&&(inAppsList=!0,appName=newAppName);if(!inAppsList){usedApps.splice(i,1),i--;continue}}if(!checkSupportedApps||-1!==ztopbar.supportedApps.indexOf(appName)){ztopbarObj._isAppsInfoMapped=!0;var subDomain=app.url||app.default_sub_domain,tryNowUrl=app.trynow_url;if(void 0!==app.configuration){var configMap=getConfigMap(app.configuration);tryNowUrl=configMap.zh_trynow_url,tryNowUrl&&0!==tryNowUrl.indexOf("//")&&(tryNowUrl=subDomain+tryNowUrl)}var home_page=subDomain+(app.home_page&&app.home_page.length?app.home_page:"");myApps[appName]={url:app.app_url||home_page,tryNowURL:tryNowUrl||subDomain,isMyApp:app.is_used_app,app_name:"livedesk"===appName?"salesiq":appName},ztopbarObj._myApps=ztopbarObj._myApps?ztopbarObj._myApps:app.is_used_app,appNames.push(appName)}}ztopbarObj._myAppsData=myApps,ztopbarObj._isAppsInfoMapped&&(ztopbarObj._supportedApps=appNames),createAllAppsContainer();var allAppsHeight=allAppsDiv.height();if(ztopbarObj._myApps){myAppsDiv.attr("class","ztb-myapps-count-"+appNames.length).css({opacity:1,"margin-left":0}).show(),ztopbarObj._buildMyApps();var navigationElementHeight=navigationDiv.height()+1;allAppsDiv&&allAppsDiv.children().length>0&&0===allAppsDiv.find(".ztb-products").length&&(navigationDiv.hide(),navigationElementHeight=0);var myAppsContent=zjQuery("#ztb-myapps-list .ztb-myapps-cont"),myAppsFirstListingDiv=myAppsContent.first();zjQuery("#ztb-myapps-list").width(myAppsFirstListingDiv.outerWidth()*(zjQuery(".ztb-myapps-cont").length+1));var myAppsHeight=myAppsDiv.height(),_appsContainerWidth=appsContainer.width(),myAppsListWidth=myAppsFirstListingDiv.width();myAppsListWidth+94>_appsContainerWidth&&(_appsContainerWidth=myAppsListWidth+94);var _appsContainerHeight=myAppsHeight;allAppsDiv&&allAppsDiv.height()>myAppsHeight&&(_appsContainerHeight=allAppsHeight,paddingTop=parseFloat(myAppsFirstListingDiv.css("padding-top"))+(allAppsHeight-myAppsHeight)/2,myAppsContent.css("padding-top",paddingTop)),allAppsDiv.css({height:_appsContainerHeight,"margin-top":-(_appsContainerHeight+8)+"px",opacity:0}),appsContainer.css({width:_appsContainerWidth,height:_appsContainerHeight+navigationElementHeight}),myAppsDiv.css({height:_appsContainerHeight,width:_appsContainerWidth}),appsContainer.addClass("ztb-collapse")}else zjQuery("#ztb-all-apps .ztb-allApps").addClass("ztb-allApps-only"),allAppsDiv.find(".ztb-products").length||zjQuery("#ztb-switch-menu").hide(),hideNavPanel(myAppsDiv);ztopbarObj._createTooltip(),checkNavigationPanel()}function pushAppName(appsJSON,categoryId,name,categoryName){for(var isName=!1,length=appsJSON.length,k=0;length>k;k++)appsJSON[k].categoryId===categoryId&&(appsJSON[k].apps.push(name),isName=!0);if(!isName&&categoryName){length+=1,appsJSON.push({categoryId:categoryId,categoryName:categoryName,apps:[name],position:length});var len=this._appsLayout.length-1;this._appsLayout[len].length<this._appsLayout[0].length?this._appsLayout[len].push(length):(this._appsLayout.push(new Array),this._appsLayout[len+1][0]=length)}return appsJSON}function createAllAppsContainer(){var allAppsWrapper=zjQuery("<div>").attr("class","ztb-allApps ztb-allapps").appendTo(allAppsDiv),allAppsWrapperInner=zjQuery("<div>").appendTo(allAppsWrapper);this._appsLayout=ztopbar.allAppsCategoryListOrder;var supportedApps=ztopbar.supportedApps;ztopbarObj._isAppsInfoMapped&&(supportedApps=ztopbarObj._supportedApps);var checkSupportedApps=ztopbar.supportedApps&&ztopbar.supportedApps.length?!0:!1,appsJSON=ztopbar.getDefaults.getAllAppsJSON();if(ztopbar.nonZohoApps)for(var name=void 0,i=0;i<ztopbar.nonZohoApps.length;i++)name=ztopbar.nonZohoApps[i].name.toLowerCase().replace(/\s/g,""),categoryId=ztopbar.nonZohoApps[i].categoryId,appsJSON=categoryId?pushAppName(appsJSON,categoryId,name,ztopbar.nonZohoApps[i].categoryName):pushAppName(appsJSON,"OT",name),supportedApps.push(name);for(var allAppsHTMLArray=[],allAppsHTML="",appsPresentInCat=!1,i=0;i<appsJSON.length;i++)if(appsJSON[i]&&appsJSON[i].apps){appsPresentInCat=!1,allAppsHTML="<ul class='ztb-ul'>";var cname=ztopbarObj._getString(appsJSON[i].categoryName)?ztopbarObj._getString(appsJSON[i].categoryName):appsJSON[i].categoryName;allAppsHTML+="<li class='ztb-apps-title'>"+cname+"</li>";for(var appList=0;appList<appsJSON[i].apps.length;appList++){var appName=appsJSON[i].apps[appList],aname=ztopbarObj._getString(appName)?ztopbarObj._getString(appName):appName;(checkSupportedApps&&supportedApps.indexOf(appName)>-1||!checkSupportedApps)&&(appsPresentInCat=!0,allAppsHTML+="<li data-zapp='"+appName+"' class='ztb-products'><a class='ztb-anchor' href='"+ztopbarObj._getTryNowURL(appName)+"'><span class='zicon-apps-16 zicon-apps-"+appName+"'></span><div class='ztb-app-name'>"+aname+"</div></a></li>")}allAppsHTML+="</ul>",appsPresentInCat&&(allAppsHTMLArray[appsJSON[i].position]=allAppsHTML)}for(var layoutGrid=["","","",""],i=0;i<this._appsLayout.length;i++)for(var j=0;j<this._appsLayout[i].length;j++){var allappsHTML=allAppsHTMLArray[this._appsLayout[i][j]];void 0!==allappsHTML&&""!==allappsHTML&&(layoutGrid[j+1]+=allappsHTML)}allAppsHTML="";for(var i=0;i<layoutGrid.length;i++)""!==layoutGrid[i]&&(allAppsHTML+='<div class="ztb-appslist-'+i+'">'+layoutGrid[i]+"</div>");allAppsWrapperInner.append(allAppsHTML),zjQuery("#ztb-all-apps .ztb-products").bind("click.apps",function(e){ztopbarObj._closeOpenedItems(),ztopbarObj.data.product.toLowerCase()===zjQuery(this).data("zapp")?location.reload():window.open(zjQuery(this).find("a")[0].href,"_blank"),e.preventDefault(),e.stopPropagation()}),gotoAllApps.append("<span class='ztb-icon-group ztab-allapps-icon'></span><span class='ztab-allapps-text'>"+ztopbarObj._getString("allAppsLabel")+"</span>"),gotoMyApps.html("<span class='ztb-icon-group ztab-myapps-icon'></span><span class='ztab-myapps-text'>"+ztopbarObj._getString("myAppsLabel")+"</span>").hide(),gotoMyApps.click(function(){gotoMyApps.hide(),gotoAllApps.show(),slideWindow.show(),allAppsDiv.css({"margin-top":-(allAppsDiv.height()+8)+"px",opacity:0}),myAppsDiv.css({opacity:1,"margin-left":0})})}if(window===this&&data&&data.properWay){"undefined"==typeof zjQuery&&(zjQuery=window.jQuery);var ztopbarObj=new zTopbar(data);ztopbarObj.data=data,ztopbarObj.isOpen=!0,ztopbarObj._init(data);var mainElement=zjQuery("#ztb-topband");if(mainElement.length?(ztopbarObj.mainCont=mainElement,ztopbarObj.mainCont.addClass("ztb-topband")):ztopbarObj.mainCont=zjQuery(".ztb-topband").attr("id","ztb-topband"),data.position&&ztopbarObj.mainCont.addClass("ztb-fixed"),ztopbarObj._isEditor){var innerHTML=ztopbarObj.mainCont.html();innerHTML&&innerHTML.trim().length&&(""===data.placeHolderHTML||void 0===data.placeHolderHTML)&&(ztopbarObj.mainCont.html(""),data.placeHolderHTML=innerHTML)}else ztopbarObj.mainCont.html(""),data.placeHolderHTML="";if(ztopbarObj._displayLogo=ztopbarObj._isEditor?!1:!0,ztopbarObj._signInStatus=data.userInfo&&data.userInfo.emailAddress&&data.userInfo.userId?!0:!1,ztopbarObj.ztbContainer=zjQuery("<div>").attr({id:"ztb-container"}).appendTo(ztopbarObj.mainCont),ztopbarObj._zohoAppsMenu)var label=ztopbarObj._replaceMessage(ztopbarObj._getString("switchToMenuLabel"),[ztopbar.suite]),menu=zjQuery("<div>").attr({ztooltip:label,"class":"ztooltip ztb-font-family "+("zoho"===ztopbarObj._suite?"ztb-deployment-zoho":""),id:"ztb-switch-menu"}).html("<div class='ztb-switch-to-square'><span></span><span class='two'></span><span></span><span></span><span class='five'></span><span></span><span></span><span class='eight'></span><span></span></div>").appendTo(ztopbarObj.ztbContainer);ztopbarObj._ztbLogo=zjQuery("<a>").attr("id","ztb-logo").appendTo(ztopbarObj.ztbContainer),ztopbarObj._initRebradingLogo(data.rebranding?data.rebranding.logo:"");var homePageLink=ztopbarObj._signInStatus?data.homePageLink:data.websiteHomePageLink;void 0!=homePageLink&&""!=homePageLink&&(ztopbarObj._ztbLogo.css("cursor","pointer"),"function"==typeof data.homePageLink?ztopbarObj._ztbLogo.click(function(){data.homePageLink()}):ztopbarObj._ztbLogo.attr("href",homePageLink));var ztbMenusCont=zjQuery("<div>").attr({id:"ztb-menu-container","class":"ztb-font-family "+(ztopbarObj._signInStatus?"":"ztb-user-signout")}).appendTo(ztopbarObj.ztbContainer);if(ztopbarObj.ztbOthersTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbPopoverTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbMenuTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbTextTypeCont=zjQuery("<div class='ztb-item-container'>").attr("id","ztb-textTypeCont")[ztopbarObj._signInStatus?"prependTo":"appendTo"](ztbMenusCont),ztopbarObj._signInStatus){var info=data.userInfo,photoClassName="",ztbProfileCont=zjQuery("<div>").attr("class","ztb-profile-container ztb-profile-image-pre").insertBefore(ztbMenusCont),imgSrc="",photoLabel="";info.photo?(imgSrc=info.photo,photoLabel=ztopbarObj._getString("change")):photoLabel=ztopbarObj._getString("upload"),ztopbarObj._rebrandingObj.myStoreAccess&&(photoClassName+=" ztb-mystore-enabled");var ztbProfile=zjQuery("<div>").attr({type:"profile",id:"ztb-profile","class":photoClassName+" ztb-font-family"}).appendTo(ztbProfileCont);ztbProfile.append("<div id='ztb-profile-header'></div><img id='ztb-profile-image' src='"+imgSrc+"'/>"),ztopbarObj.profileHeader=zjQuery("#ztb-profile-header"),ztopbarObj._rebrandingObj.myAccountAccess&&zjQuery("<a>").attr({href:ztopbarObj._accountsLink+"u/h#profile/home",target:"_blank",id:"ztb-change-photo"}).appendTo(ztbProfile).text(photoLabel),ztopbarObj.ztbProfileDetails=zjQuery("<div>").attr("id","ztb-accountInfo").appendTo(ztbProfile),ztopbarObj._setUsername(info.name),ztopbarObj._setEmailAddress(info.emailAddress);var profileHeaderElement="";ztopbarObj._rebrandingObj.displayUserID&&info.userId&&(profileHeaderElement+="<p id='ztb-zoho-uid'><label>"+ztopbarObj._getString("userIdLabel")+": "+info.userId+"</label>","zoho"===ztopbarObj._suite&&(profileHeaderElement+="<span id='ztb-zoho-uid-info' class='ztb-icon-group'></span>"),profileHeaderElement+="</p>"),profileHeaderElement+="<div id='ztb-mylinks'>",ztopbarObj._rebrandingObj.myAccountAccess&&(profileHeaderElement+="<a id='ztb-myaccount' href='"+ztopbarObj._accountsLink+"' target='_blank'>"+ztopbarObj._getString("myAccount")+"</a>"),ztopbarObj._rebrandingObj.myStoreAccess&&(profileHeaderElement+="<a class='ztb-mystore' href="+ztopbarObj._storeLink+" target='_blank'>"+ztopbarObj._getString("myStore")+"</a>");var _refreshHTML="";ztopbarObj._referralStatus&&(_refreshHTML+="<span class='ztb-myreferral'><a class='ztb-myreferral-link' href="+ztopbarObj._referralLink+" target='_blank'>"+ztopbarObj._getString("referyourfriend")+"</a>",ztopbarObj._referralIsNew&&(_refreshHTML+="<span id='ztb-myreferrals-count'>"+ztopbarObj._getString("new")+"</span>"),_refreshHTML+="</span>"),profileHeaderElement+="</div>",ztopbarObj.profileHeader.append(profileHeaderElement),signOutStr="<a class='ztb-anchor' id='ztb-signout'>"+ztopbarObj._getString("signout")+"</a>";var ztbSignOut=zjQuery("<span>").append(signOutStr).attr("class","ztb-signout").appendTo(ztopbarObj.ztbProfileDetails);ztopbarObj.ztbProfileDetails.append(_refreshHTML),ztbProfileCont.append("<img id='ztb-profile-image-pre' src='"+imgSrc+"'/>"),info.signOutURL&&("function"==typeof info.signOutURL?ztbSignOut.bind("click.signout",function(){info.signOutURL()}):zjQuery("#ztb-signout").attr("href",info.signOutURL.split("URL:")[1])),ztbProfile.data("imageHeight",ztbProfile.height());var initProfile=!1,profileMenuWidth=0;zjQuery(document).bind("mouseover.profile",function(){zjQuery("#ztb-profile").addClass("ztb-profile-ani-before"),profileMenuWidth=zjQuery("#ztb-profile").width(),profileMenuWidth=309>profileMenuWidth?310:profileMenuWidth,zjQuery("#ztb-profile").removeClass("ztb-profile-ani-before"),zjQuery(document).unbind("mouseover.profile")}),ztopbarObj._toggleTimeout=void 0;var profileEle=zjQuery("#ztb-profile"),profileImgEle=zjQuery("#ztb-profile-image"),changePhotoLink=zjQuery("#ztb-change-photo");ztbProfileCont.bind("click.profile",function(){profileEle.show(),zjQuery("#ztb-profile-image-pre").hide(),ztbProfileCont.removeClass("ztb-profile-image-pre"),profileEle.width(profileMenuWidth).addClass("ztb-profile-collapse"),initProfile||(ztopbarObj._initTooltipEvents(zjQuery("#ztb-user-id")),ztopbarObj._setUsername(ztopbarObj.data.userInfo.name),ztopbarObj._setEmailAddress(ztopbarObj.data.userInfo.emailAddress)),ztopbarObj._profileToggle(),initProfile||(initProfile=!0,ztopbarObj._setUsername(ztopbarObj.data.userInfo.name),ztopbarObj._setEmailAddress(ztopbarObj.data.userInfo.emailAddress))}),profileImgEle.add(changePhotoLink).mouseover(function(){profileEle.hasClass("ztb-expand")&&(profileImgEle[0].height!==profileEle.data("imageHeight")?changePhotoLink.fadeIn(200):changePhotoLink.fadeOut(200))}),changePhotoLink.mouseout(function(){profileImgEle[0].height!==profileEle.data("imageHeight")&&changePhotoLink.fadeOut(200)})}else{delete data.userInfo,delete data.helpMenu,delete data.settings,delete data.portalInfo,delete data.subscription,delete data.notifications,delete data.messages;var signUpPageLink=data.signUpPageLink?data.signUpPageLink:ztopbarObj._websiteLink+"signup.html",signInPageLink=data.signInPageLink?data.signInPageLink:ztopbarObj._websiteLink+"login.html",ztbLoginCont=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-signin"}),ztbSignupCont=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-signup"});ztopbarObj.ztbTextTypeCont.prepend(ztbSignupCont),ztopbarObj.ztbTextTypeCont.prepend(ztbLoginCont),zjQuery("<a>").attr({href:signInPageLink,target:"_self"}).appendTo(ztbLoginCont).text(ztopbarObj._getString("signin")),zjQuery("<a>").attr({href:signUpPageLink,target:"_self"}).appendTo(ztbSignupCont).text(ztopbarObj._getString("signup"))}data.settings&&ztopbarObj.addItem("button"===data.settings.uitype?{uitype:"button",id:"settings",iconClass:"ztb-icon-group ztb-settings-icon",action:data.settings.action,title:ztopbarObj._getString("myPreferences"===data.settings.type?"myPreferences":"settings"),target:data.settings.target?data.settings.target:"_self",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}:{uitype:"menu",id:"settings",title:ztopbarObj._getString("settings"),menu:data.settings.menu,iconClass:"ztb-icon-group ztb-settings-icon",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}),data.helpMenu&&ztopbarObj.addItem({uitype:"menu",id:"help",title:ztopbarObj._getString("help"),menu:data.helpMenu,iconClass:"ztb-icon-group ztb-help-icon",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}),"object"==typeof data.messages&&ztopbarObj.addItem({uitype:"popover",id:"messages",title:ztopbarObj._getString("messages"),popover:{title:ztopbarObj._getString("messages"),html:data.messages.html,count:data.messages.count},iconClass:"ztb-icon-group ztb-messages-icon",appendTo:ztopbarObj.ztbPopoverTypeCont,removable:!1}),"object"==typeof data.notifications&&ztopbarObj.addItem({uitype:"popover",id:"notifications",title:ztopbarObj._getString("notifications"),popover:{title:ztopbarObj._getString("notifications"),html:data.notifications.html,count:data.notifications.count},iconClass:"ztb-icon-group ztb-notifications-icon",appendTo:ztopbarObj.ztbPopoverTypeCont,removable:!1});var subDetail=data.subscription;if(void 0!==subDetail&&subDetail.planType){ztopbarObj._trialUpgradeLink=subDetail.upgradeLink;var canTryOtherEditions=subDetail.canTryOtherEditions&&subDetail.tryOtherEditionsLink?!0:!1,manageSubscriptionLinkIsAdded=!1,settingArray=[],settingsObj=zjQuery("#ztb-settings");if("button"!==settingsObj.attr("type")){var menuObj=zjQuery("#ztb-settings-menu .ztb-content ul li").length;if(0===menuObj)if("free"===subDetail.planType)ztopbarObj._trialUpgradeLink&&settingArray.push({id:"ztb-upgrade",label:ztopbarObj._getString("upgrade"),URL:ztopbarObj._trialUpgradeLink,target:"_blank"});else if(void 0!==subDetail.manageSubscriptionLink)if(canTryOtherEditions)manageSubscriptionLinkIsAdded=!0,settingArray.push({id:"ztb-manageSubscription",label:ztopbarObj._getString("manageSubscription"),URL:subDetail.manageSubscriptionLink,target:"_blank"}),settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"});else{var ztbOtherEditions=zjQuery("<div>").attr({"class":"ztb-text-type",id:"ztb-subscriptionText",type:"text"}).appendTo(zjQuery("#ztb-textTypeCont"));zjQuery("<a>").attr({href:subDetail.manageSubscriptionLink,target:"_blank","class":"ztb-anchor"}).appendTo(ztbOtherEditions).text(ztopbarObj._getString("supscription")),settingsObj.hide()}else settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"});else("paid"===subDetail.planType&&subDetail.manageSubscriptionLink||"free"===subDetail.planType&&ztopbarObj._trialUpgradeLink)&&settingArray.push({id:"ztb-sep1",separator:!0}),"free"===subDetail.planType?ztopbarObj._trialUpgradeLink&&settingArray.push({id:"ztb-upgrade",label:ztopbarObj._getString("upgrade"),URL:ztopbarObj._trialUpgradeLink,target:"_blank"}):(void 0!==subDetail.manageSubscriptionLink&&(manageSubscriptionLinkIsAdded=!0,settingArray.push({id:"ztb-manageSubscription",label:ztopbarObj._getString("manageSubscription"),URL:subDetail.manageSubscriptionLink,target:"_blank"})),canTryOtherEditions&&settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"}))}if(canTryOtherEditions&&void 0===subDetail.trialInfo&&"free"===subDetail.planType){var link=zjQuery("<a>").attr("class","ztb-anchor"),ztbOtherEditionsFree=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-tryOtherEditions"});ztopbarObj.ztbTextTypeCont.prepend(ztbOtherEditionsFree),link.attr({href:subDetail.tryOtherEditionsLink,target:"_blank"}).appendTo(ztbOtherEditionsFree).text(ztopbarObj._getString("tryOtherEditions"))}settingArray.length&&(0===zjQuery("#ztb-settings-menu .ztb-content ul").length?ztopbarObj._createSettingOption(settingArray):ztopbarObj.addMenuItem(settingArray,"ztb-settings")),subDetail.trialInfo&&ztopbarObj.showTrialInfo(subDetail)}if(data.portalInfo){var portals=data.portalInfo.portals;if(portals&&1!==portals.length){portals.push({id:"ztb-portalsep1",separator:!0});var managePortalsLable=ztopbarObj._getString("managePortals");"mail"===ztopbarObj.product&&data.portalInfo.managePortalsLabel&&(managePortalsLable=data.portalInfo.managePortalsLabel),portals.push({id:"ztb-managePortals",label:managePortalsLable,action:"URL:"+data.portalInfo.managePortalsLink,target:"_blank"}),ztopbarObj.addItem({uitype:"menu",id:"portals",title:ztopbarObj._getString("portals"),menu:portals,textClass:"ztb-text-type",appendTo:ztopbarObj.ztbTextTypeCont})}}if(data.others)for(var i in data.others)ztopbarObj.addItem(data.others[i]);if(data.serviceInfo){var serviceUI=zjQuery("<div>").attr("id","ztb-service-info").html(data.serviceInfo).prependTo(ztbMenusCont);zjQuery("#ztb-tryOtherEditions")[0]||serviceUI.css("border-right-width","1px")}if(data.search){var ztbSearch=zjQuery("<div>").attr({id:"ztb-search","class":"ztb-font-family"}).appendTo(ztopbarObj.ztbContainer),ztbSearchFilter=zjQuery("<div>").attr({id:"ztb-search-filter","class":"ztb-icon-group"}).appendTo(ztbSearch);data.search.hasFilter&&ztbSearchFilter.addClass("ztb-filter-expand").append("<span class = 'ztb-icon-group ztb-search-dd'></span>"),ztbSearch.append("<input type = 'text' id = 'ztb-search-field' class='ztb-font-family' /><span id = 'ztb-search-action' ></span>");var searchField=zjQuery("#ztb-search-field");ztopbarObj._isPlaceholder=void 0===searchField[0].placeholder||null===searchField[0].placeholder,data.search.placeholder&&(ztopbarObj._isPlaceholder&&(searchField.before("<label id='ztb-search-placeholder'>"+data.search.placeholder+"</label>"),zjQuery("#ztb-search-placeholder").css("left",searchField.position().left-2)),ztopbarObj._changePlaceholder(data.search.placeholder)),searchField.bind("focus.ztb",function(){ztbSearch.addClass("ztb-search-focus"),zjQuery("#ztb-search-placeholder").css("display","none")}).bind("blur.ztb",function(){ztbSearch.removeClass("ztb-search-focus"),searchField.val()||zjQuery("#ztb-search-placeholder").css("display","block")})}if(data.placeHolderHTML){var ztbPlaceHolderCont=zjQuery("<div>").attr({id:"ztb-placeholder-container"}).appendTo(ztopbarObj.ztbContainer);ztbPlaceHolderCont.append(data.placeHolderHTML)}if(ztopbarObj._myApps=!1,"zoho"!==ztopbarObj.product){setTimeout(function(){ztopbar.nonZohoApps?"string"==typeof ztopbar.nonZohoApps?getData(ztopbar.nonZohoApps,addNonzohoApps):addNonzohoApps(ztopbar.nonZohoApps):_createSwitchToMenu()},2);var appsShortNameMap={zohocrm:"crm",zohochat:"chat",zohocampaigns:"campaigns",zohosites:"sites",zohosurvey:"survey",zohosupport:"support",zohoassist:"assist",livedesk:"salesiq",virtualoffice:"mail",zohomeeting:"meeting",zohopulse:"connect",zohocontactmanager:"contactmanager",zohopc:"docs",zohoprojects:"projects",zohobugtracker:"bugtracker",zohobooks:"books",zohoinvoice:"invoice",zohopeople:"people",zohorecruit:"recruit",zohocreator:"creator",zohosubscriptions:"subscriptions",zohoreports:"reports",zohovault:"vault",zohosocial:"social",zohowriter:"writer",zohosheet:"sheet",zohoshow:"show",zohoexpense:"expense",zohoshowtime:"showtime",zohoforms:"forms",zohocalendar:"calendar",zohoinventory:"inventory",zohowiki:"wiki",zohomotivator:"motivator",site24x7:"site24x7"},appsContainer=zjQuery("<div>").attr({id:"ztb-apps","class":"ztb-apps ztb-font-family "+ztopbarObj._ieClass}).appendTo(zjQuery("body"));"zoho"!==ztopbarObj._suite&&appsContainer.addClass("ztb-"+ztopbarObj._suite),zjQuery("<div>").attr("class","ztb-apps-grey").appendTo(appsContainer);var allAppsDiv=zjQuery("<div>").attr("id","ztb-all-apps").appendTo(appsContainer),myAppsDiv=zjQuery("<div>").attr("id","ztb-myapps").appendTo(appsContainer),navigationDiv=zjQuery("<div>").attr("id","ztb-myapps-nav").appendTo(appsContainer),slideWindow=zjQuery("<div>").attr("id","ztb-slide-window").appendTo(navigationDiv),gotoMyApps=zjQuery("<div>").attr({id:"ztb-goto-myapps","class":"ztb-go-to-myapps"}).appendTo(navigationDiv),gotoAllApps=zjQuery("<div>").attr("id","ztb-goto-allapps").appendTo(navigationDiv),gotoHome=zjQuery("<div>").attr("id","ztb-gotohome"),checkSupportedApps=ztopbar.supportedApps&&ztopbar.supportedApps.length?!0:!1}else ztopbarObj._createTooltip();return zjQuery("#ztb-menu-container .ztb-item-container").bind("click.ztb",function(e){var targetEle=zjQuery(e.target);targetEle.is("div")||(targetEle=targetEle.parent()),ztopbarObj._toggle(targetEle)}),ztopbarObj._userIdTooltip(),ztopbarObj._onResize(),ztopbarObj}};zTopbar.prototype={_EVENTS:{ITEMONCLICK:"itemclick",TRIALCLOSE:"messagebannerclose",TRIALOPEN:"messagebanneropen",MENUCLOSE:"menuclose",MENUOPEN:"menuopen",POPOVERCLOSE:"popoverclose",POPOVEROPEN:"popoveropen",ONCLOSE:"close",ONOPEN:"open"},_widgetEventPrefix:"ztopbar",showEle:void 0,clickEle:void 0,ztooltip:void 0,userIdTooltip:void 0,_sepPos:0,_init:function(data){this._appProtocol=window.location.protocol;var domainArray=window.location.hostname.split(".");domainArray.length>2&&(domainArray.reverse().pop(),domainArray.reverse()),this._lastOpenedItem=void 0,this._documentEle=zjQuery(document),this._getString="object"!=typeof ztopbar.i18nKeys&&zjQuery.i18n?getI18NString:getString,this._appDomain=domainArray.join("."),this._ieClass="",(-1!==navigator.appVersion.indexOf("MSIE 7.")||-1!==navigator.appVersion.indexOf("MSIE 8."))&&(this._ieClass="ztb-ie-browser"),this._windowWidth=zjQuery(window).width(),this.product=data.product?data.product.split(" ").join("").toLowerCase():"",data.mode=data.underlineUI?data.underlineUI:data.mode,this._isEditor="editor"===data.mode||"writer"===this.product||"sheet"===this.product||"show"===this.product?!0:!1;var productName=this._isEditor?"docs":this.product;this._protocolScheme=this._appProtocol+"//",this._websiteLink=this._checkLink(data.zohoWebsiteLink),this._suiteList=["baihui","fuji","skydesk","medicalmine"],this._suite=ztopbar.suite.toLowerCase(),-1===zjQuery.inArray(this._suite,this._suiteList)&&(this._suite="zoho"),this._subServices=["zoho","accounts","contacts","chat"];var blogLink="",forumLink="",aboutUsLink="",zohoHomeLink="";if("zoho"===this._suite){var _appDomainName=this._appDomain;this._websiteLink=this._checkLink(this._websiteLink&&this._websiteLink.length?this._websiteLink:this._protocolScheme+_appDomainName+"/"),aboutUsLink=this._websiteLink+this.product,blogLink=this._protocolScheme+"blogs."+_appDomainName+"/category/"+productName,forumLink=this._protocolScheme+"forums."+_appDomainName+"/zoho-"+productName,-1!==zjQuery.inArray(this.product,this._subServices)&&(aboutUsLink=this._websiteLink,blogLink=this._protocolScheme+"blogs."+_appDomainName,forumLink=this._protocolScheme+"forums."+_appDomainName),zohoHomeLink=this._protocolScheme+"home."+_appDomainName}var helpMenu=data.helpMenu?data.helpMenu:{};this._homeLink=this._checkLink(data.zohoHomeLink&&data.zohoHomeLink.length?data.zohoHomeLink:zohoHomeLink),this._blogsLink=this._checkLink(helpMenu.blogLink&&helpMenu.blogLink.length?helpMenu.blogLink:blogLink),this._forumsLink=this._checkLink(helpMenu.forumLink&&helpMenu.forumLink.length?helpMenu.forumLink:forumLink),this._accountsLink=this._checkLink(data.myAccountLink&&data.myAccountLink.length?data.myAccountLink:this._protocolScheme+"accounts."+_appDomainName),this._storeLink=this._checkLink(data.myStoreLink&&data.myStoreLink.length?data.myStoreLink:this._protocolScheme+"store."+_appDomainName),this._referralLink=this._checkLink(data.referralURL&&data.referralURL.length?data.referralURL:this._protocolScheme+""+_appDomainName+"/referrals"),this._aboutUsLink=this._checkLink(data.websiteHomePageLink&&data.websiteHomePageLink.length?data.websiteHomePageLink:aboutUsLink);var _rebrandingDefaults={logo:"",zohoAppsMenu:!0,myAccountAccess:!0,displayUserID:!0,hasUserReferrals:!0,forumAccess:!0,blogAccess:!0,myStoreAccess:!0,websiteAccess:!0};this._rebrandingObj=zjQuery.extend({},_rebrandingDefaults,data.rebranding),this._rebrandingObj.zohoAppsMenu=ztopbar.isSwitchToMenuEnabled?this._rebrandingObj.zohoAppsMenu:!1,this._rebrandingObj.displayUserID=ztopbar.displayUserID?this._rebrandingObj.displayUserID:!1,this._rebrandingObj.hasUserReferrals=ztopbar.hasUserReferrals?this._rebrandingObj.hasUserReferrals:!1,this._zohoAppsMenu=this._rebrandingObj.zohoAppsMenu,"zoho"===this.product&&(this._zohoAppsMenu=!1),this._rebrandingObj.hasUserReferralsNew=!0,this._rebrandingObj.myStoreAccess=!1,this._referralStatus=this._rebrandingObj.hasUserReferrals?this._rebrandingObj.hasUserReferrals:!1,this._referralIsNew=this._rebrandingObj.hasUserReferralsNew?this._rebrandingObj.hasUserReferralsNew:!1},_checkLink:function(linkText){return linkText?(linkText=-1!==linkText.substring(linkText.length-2).lastIndexOf("/")?linkText:linkText+"/",-1!==linkText.substring(0,8).indexOf("//")?linkText:this._appProtocol+"//"+linkText):""},item:function(param){return"string"==typeof param&&(this.parentElement="ztb-"+param),this},addItem:function(param){if("object"==typeof param){var appendTo="",iconCls=param.iconClass?param.iconClass:"",tooltip=param.title?param.title:"",removable=void 0!==param.removable?param.removable:!0;if("menu"===param.uitype){var menuId=param.id;appendTo=param.appendTo?param.appendTo:this.ztbOthersTypeCont;var className=param.textClass?param.textClass:"ztb-menu-type",menuObj=zjQuery("<div>").attr({type:"menu",id:"ztb-"+menuId,"class":className,removable:removable}).data({values:param.menu,options:param,itemType:"menu"}).appendTo(appendTo);if(iconCls)zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(menuObj);else if("portals"===param.id){var labelText="";for(var k in param.menu)labelText=""===labelText&&param.menu[k].selected===!0?param.menu[k].label:labelText;labelText=labelText?labelText:param.menu[0].label,zjQuery("<a>").appendTo(menuObj).text(labelText)}tooltip&&menuObj.attr("ztooltip",tooltip).addClass("ztooltip"),this._createMenu(menuObj,param.menu)}else if("popover"===param.uitype){var popoverId=param.id;appendTo=param.appendTo?param.appendTo:this.ztbOthersTypeCont;var popoverObj=zjQuery("<div>").attr({type:"popover",id:"ztb-"+popoverId,"class":"ztb-popover-type",removable:removable}).data({options:param,itemType:"popover"}).appendTo(appendTo);param.popover&&(param.popover.title&&popoverObj.data({label:param.popover.title}),param.popover.html&&popoverObj.data({html:param.popover.html})),tooltip&&popoverObj.attr("ztooltip",tooltip).addClass("ztooltip"),iconCls&&zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(popoverObj),this._createPopover(popoverObj),param.popover&&param.popover.count&&this.item(popoverId).updateCount(param.popover.count)}else if("button"===param.uitype)this._createButton(param);else if("text"===param.uitype){var textObj=zjQuery("<div>").attr({type:"text",id:"ztb-"+param.id,"class":"ztb-text-type",removable:removable}).prependTo(zjQuery("#ztb-textTypeCont")),action=-1!==param.action.indexOf("URL:")?param.action.split("URL:")[1]:param.action;zjQuery("<a>").attr("href",action).appendTo(textObj).text(param.label),textObj.data({options:param,itemType:"text"})}this._initTooltipEvents()}return this},removeItem:function(id){if("string"==typeof id){var ele=void 0;ele=zjQuery(void 0!==zjQuery("#"+id).attr("type")&&void 0!==this.ztbContainer.find("#"+id)[0]?"#"+id:"#ztb-"+id),Boolean(ele.attr("removable"))&&(ele.remove(),zjQuery("#"+ele[0].id+"-"+ele.attr("type")).remove())}},_buildMyApps:function(){var myAppsTable,base=this,myAppsCont=zjQuery("#ztb-myapps"),allAppsCont=zjQuery("#ztb-all-apps"),myAppsListCont=zjQuery("<div>").attr("id","ztb-myapps-list").appendTo(myAppsCont),contCnt=0,selectedPage="",pagenationCnt=0,isMeetingDeleted=!1;this._myAppsData.meeting&&this._myAppsData.assist&&(isMeetingDeleted=!0,delete this._myAppsData.meeting);var myAppslist=this._myAppsData,inUseLabel=this._getString("inuse");for(app in myAppslist){var appInfo=myAppslist[app];appInfo&&appInfo.isMyApp&&(allAppsCont.find(".zicon-apps-"+app).parent().addClass("ztb-opted").append("<div class='ztb-opted-apps ztb-icon-group ztooltip' ztooltip='"+inUseLabel+"'></div>"),contCnt%12===0&&(myAppsTable=zjQuery("<div>").attr({"class":"ztb-myapps-cont",id:"ztb-myapps-cont"+contCnt/12}).appendTo(myAppsListCont),pagenationCnt+=1),appHTML='<div class="ztb-myapps-info"><a class="ztb-myapps-icon" data-zapp="'+app+'" href="'+appInfo.url+'" target="_blank"><div class="zicon-apps-48 zicon-apps-'+app+'"></div></a><a data-zapp="'+app+'" href="'+appInfo.url+'" target="_blank"><span class="ztb-myapps-label">'+this._getString(appInfo.app_name)+"</span></a></div>",myAppsTable.append(appHTML),contCnt+=1)}isMeetingDeleted&&allAppsCont.find(".zicon-apps-meeting").parent().addClass("ztb-opted").append("<div class='ztb-opted-apps ztb-icon-group ztooltip' ztooltip='"+inUseLabel+"'></div>");var nav=zjQuery("#ztb-myapps-nav");if(void 0!==this._homeLink&&this._homeLink.length&&nav.append("<div id='ztb-gotohome'><span class='ztb-icon-group ztb-home-icon'></span><span class='ztb-home-text'>"+this._getString("zohoHome")+"</span></div>"),pagenationCnt>1){var pageNatnNavDivs="";for(i=0;pagenationCnt>i;i++)pageNatnNavDivs+=0===i?"<div id='ztb-pageNav-"+i+"' class='ztb-page-navigation ztb-page-selected'></div>":"<div id='ztb-pageNav-"+i+"' class='ztb-page-navigation'></div>";zjQuery("#ztb-slide-window").append(pageNatnNavDivs),selectedPage=zjQuery("#ztb-slide-window .ztb-page-selected");var leftCont=zjQuery("<div>").attr({"class":"ztb-myapps-arrow-cont ztb-disable",id:"ztb-myapps-arrow-left"}).appendTo(myAppsCont).bind("click.nav",function(){base._ArrowNavigationAction(this,selectedPage)}),rightCont=zjQuery("<div>").attr({"class":"ztb-myapps-arrow-cont",id:"ztb-myapps-arrow-right"}).appendTo(myAppsCont).bind("click.nav",function(){base._ArrowNavigationAction(this,selectedPage)});zjQuery("<div>").attr("class","ztb-myapps-next ztb-myapps-side-navbar ztb-icon-group").appendTo(rightCont),zjQuery("<div>").attr("class","ztb-myapps-prev ztb-myapps-side-navbar ztb-icon-group").appendTo(leftCont)}zjQuery("#ztb-slide-window .ztb-page-navigation").bind("click.pageNav",function(){selectedPage.removeClass("ztb-page-selected").animate({left:-zjQuery(this).width()},200),selectedPage=zjQuery(this).addClass("ztb-page-selected"),base._changeSlidePos(selectedPage)}),zjQuery("#ztb-goto-allapps").click(function(){zjQuery("#ztb-all-apps").css({"margin-top":0,opacity:1}),zjQuery("#ztb-goto-allapps").hide(),zjQuery("#ztb-goto-myapps").show(),zjQuery("#ztb-slide-window").css("display","none"),myAppsCont.css("opacity",0)}),myAppsListCont.find("a").bind("click.apps",function(e){base._closeOpenedItems();var clickedAppName=zjQuery(this).data("zapp");base.data.product===clickedAppName?"writer"===clickedAppName||"sheet"===clickedAppName||"show"===clickedAppName?window.open(zjQuery(this)[0].href,"_blank"):location.reload():window.open(zjQuery(this)[0].href,"_blank"),e.preventDefault(),e.stopPropagation()}).bind("mouseover.apps",function(){zjQuery(this).parent().addClass("ztb-myapps-hover")}).bind("mouseout.apps",function(){zjQuery(this).parent().removeClass("ztb-myapps-hover")}),zjQuery("#ztb-gotohome").bind("click.eachMyapps",function(){base._closeOpenedItems(),window.open(base._homeLink,"_blank")})},_ArrowNavigationAction:function(ele,selectedPage){-1===ele.className.indexOf("ztb-disable")&&-1!==ele.id.indexOf("ztb-myapps-arrow-right")?zjQuery(selectedPage.next()).trigger("click.pageNav"):-1===ele.className.indexOf("ztb-disable")&&-1!==ele.id.indexOf("ztb-myapps-arrow-left")&&zjQuery(selectedPage.prev()).trigger("click.pageNav")},_changeSlidePos:function(selectedPage){if(selectedPage[0]){var rightNavBar=zjQuery("#ztb-myapps-arrow-right"),leftNavBar=zjQuery("#ztb-myapps-arrow-left"),splitedArr=selectedPage[0].id.split("-"),appsCont=zjQuery("#ztb-myapps-list"),idCnt=parseInt(splitedArr[splitedArr.length-1]),childCnt=idCnt>0?idCnt-1:idCnt;0===idCnt?(leftNavBar.addClass("ztb-disable"),rightNavBar.removeClass("ztb-disable")):idCnt===selectedPage.parent().children().length-1?(rightNavBar.addClass("ztb-disable"),leftNavBar.removeClass("ztb-disable")):(leftNavBar.removeClass("ztb-disable"),rightNavBar.removeClass("ztb-disable")),appsCont.css("margin-left",-(zjQuery(appsCont.children()[childCnt]).outerWidth()*idCnt))}},_createButton:function(ele){var removable=void 0!==ele.removable?ele.removable:!0,ID=void 0!==ele.id?ele.id:"",iconCls=ele.iconClass?ele.iconClass:"";ele.target=ele.target?ele.target:"";var appndTo=void 0!==ele.appendTo?ele.appendTo:this.ztbOthersTypeCont,buttonObj=zjQuery("<div>").attr({type:"button",id:"ztb-"+ID,"class":"ztb-button-type",removable:removable}).data({options:ele,itemType:"button"}).appendTo(appndTo);ele.title&&buttonObj.attr("ztooltip",ele.title).addClass("ztooltip"),zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(buttonObj)},_triggerAnAction:function(action,tgt){"string"==typeof action&&-1!==action.indexOf("URL:")||"string"==typeof action&&-1!==action.indexOf("javascript:")?-1!==action.indexOf("URL:")?window.open(action.split("URL:")[1],tgt):-1!==action.indexOf("javascript:")&&(window.location.href=action):"function"==typeof action&&action()},_toggle:function(clickEle,showEle){this.clickEle=clickEle;var dataObj=this.clickEle.data(),_lastOpenedItem=this._lastOpenedItem;if(void 0!==this._lastOpenedItem&&this._closeOpenedItems(),!(void 0===dataObj.itemType||_lastOpenedItem&&_lastOpenedItem[0]===clickEle[0])){if(this.clickEle&&dataObj&&dataObj.options&&"button"===dataObj.options.uitype)return void this._triggerAnAction(dataObj.options.action,dataObj.options.target);this._lastOpenedItem=this.clickEle,this.showEle=showEle?showEle:zjQuery("#"+clickEle[0].id+"-"+this.clickEle.attr("type")),this._lastShownEle=this.showEle;var eleId=this.clickEle[0].id;if(this._triggerEvent(this._EVENTS.ITEMONCLICK),eleId&&-1!=eleId.indexOf("ztb-switch-menu")){var top="fixed"==this.data.position?clickEle.offset().top-zjQuery(window).scrollTop()+this.ztbContainer.height():clickEle.offset().top+this.ztbContainer.height();this.showEle.css("top",top),this.mainCont.hasClass("ztb-fixed")&&showEle.addClass("ztb-fixed")}this.clickEle.addClass("ztb-active"),this.showEle.removeClass("ztb-collapse").addClass("ztb-expand"),("popover"===this.clickEle.attr("type")||"menu"===this.clickEle.attr("type"))&&("popover"===this.clickEle.attr("type")?this._triggerEvent(this._EVENTS.POPOVEROPEN,dataObj.options):"menu"===this.clickEle.attr("type")&&this._triggerEvent(this._EVENTS.MENUOPEN,dataObj.options),this._setPosition(clickEle));var base=this;this._documentEle.unbind("mouseup.document").bind("mouseup.document",function(e){void 0!==base._lastShownEle&&void 0!==base._lastOpenedItem&&zjQuery(e.target).closest("#"+base._lastShownEle[0].id)[0]!==base._lastShownEle[0]&&zjQuery(e.target).closest("#"+base._lastOpenedItem[0].id)[0]!==base._lastOpenedItem[0]&&base._closeOpenedItems()})}},_onResize:function(){this._setDropdownHeight();var base=this,onReTime=void 0,windowObj=zjQuery(window);windowObj.bind("resize.topbar",function(){base._windowWidth=windowObj.width(),clearTimeout(onReTime),onReTime=setTimeout(function(){base._closeOpenedItems(!0)},30)}).bind("keydown.topbar",function(orgEvent){27===orgEvent.keyCode&&(base._closeOpenedItems(),zjQuery("#ztb-profile").hasClass("ztb-expand")&&base._documentEle.trigger("mouseup.doc"))})},_closeOpenedItems:function(fromResize){if(this._lastOpenedItem){var dataObj=this._lastOpenedItem.data();this._lastOpenedItem.removeClass("ztb-active"),this._lastShownEle&&this._lastShownEle.removeClass("ztb-expand").addClass("ztb-collapse"),"popover"===this._lastOpenedItem.attr("type")?this._triggerEvent(this._EVENTS.POPOVERCLOSE,dataObj.options):"menu"===this._lastOpenedItem.attr("type")&&this._triggerEvent(this._EVENTS.MENUCLOSE,dataObj.options),this._lastOpenedItem=void 0,this._lastShownEle=void 0}fromResize&&this._setDropdownHeight(),this._documentEle.unbind("mouseup.document")},_setDropdownHeight:function(){if("fixed"===this.data.position){var menuEle,index,menuObjects=zjQuery(".ztb-dropdown");for(index=0;index<menuObjects.length;index++)menuEle=zjQuery(menuObjects[index]),menuEle.find(".ztb-content").css("max-height",.6*zjQuery(window).height())}},_createPopover:function(clickEle){this.clickEle=clickEle;var popoverEle=zjQuery("#"+this.clickEle[0].id+"-popover");if(void 0!==popoverEle[0])this.showEle=popoverEle;else{var label=clickEle.data("label")?clickEle.data("label"):this.clickEle.attr("ztooltip"),innerHTML=clickEle.data("html")?clickEle.data("html"):"",popover=zjQuery("<div>").attr({id:this.clickEle[0].id+"-popover","class":"ztb-popover ztb-font-family ztb-collapse"}).insertAfter(this.mainCont);zjQuery("<div>").attr("class","ztb-arrow "+this._ieClass).appendTo(popover);var topCont=zjQuery("<div>").attr("class","ztb-label").appendTo(popover);zjQuery("<label>").appendTo(topCont).attr("class","ztb-popover-label").text(label),zjQuery("<span>").attr({ztooltip:this._getString("close"),"class":"ztb-popoverClose ztooltip ztb-icon-group"}).appendTo(topCont),zjQuery("<div>").appendTo(popover).attr({id:this.clickEle[0].id.split("ztb-")[1],"class":"ztb-popover-content"}).html(innerHTML),this.showEle=popover,this.mainCont.hasClass("ztb-fixed")&&popover.addClass("ztb-fixed")}var base=this;zjQuery("#"+this.clickEle[0].id+"-popover .ztb-popoverClose").bind("click.close",function(){base._closeOpenedItems()})},_createMenu:function(clickEle,val){this.clickEle=clickEle;var menuEle=zjQuery("#"+this.clickEle[0].id+"-"+clickEle.attr("type"));if("ztb-help"===clickEle[0].id?val=this._createMenuFormat("ztb-help",val):"ztb-settings"===clickEle[0].id&&(val=this._createMenuFormat("ztb-settings",val)),this.clickEle=clickEle,void 0!==menuEle[0])this.showEle=menuEle;else{var uitype=clickEle.data("uitype")?"ztb-"+clickEle.data("uitype"):"",dd=zjQuery("<div>").attr({id:this.clickEle[0].id+"-menu","class":"ztb-dropdown ztb-font-family ztb-collapse "+uitype}).insertAfter(this.mainCont);zjQuery("<div>").attr("class","ztb-arrow "+this._ieClass).appendTo(dd);var content=zjQuery("<div>").attr("class","ztb-content").appendTo(dd);zjQuery("<ul>").attr("class","ztb-ul").appendTo(content),this.addMenuItem(val),this.mainCont.hasClass("ztb-fixed")&&dd.addClass("ztb-fixed"),this.showEle=dd}},_createSettingOption:function(menuObj){this.ztbSettings.attr({type:"menu",ztooltip:this._getString("settings"),id:"ztb-settings","class":"ztb-menu-type ztooltip"}).data({values:menuObj}).prependTo(this.ztbMenuTypeCont),zjQuery("<span>").attr("class","ztb-icons ztb-icon-group").appendTo(this.ztbSettings),this._createMenu(this.ztbSettings,menuObj)},_createMenuFormat:function(optionID,datas){var menu=[];if("ztb-help"===optionID){var helpAdded=!1,helpLabels={helpLink:this._getString("help"),helpCenterLink:this._getString("helpCenter"),FAQLink:this._getString("faq"),gettingStarted:this._getString("gettingStarted"),tour:this._getString("takeATour")},supportLabels=[this._getString("forums"),this._getString("support"),this._getString("feedback"),this._getString("liveChat")];if(datas.helpLinks){var helpLinks=datas.helpLinks,menusLength=0;for(var link in helpLinks){menusLength+=1;var menuItem={id:link,label:helpLabels[link]};void 0!==helpLinks[link]&&""!==helpLinks[link]&&("string"==typeof helpLinks[link]?-1!==helpLinks[link].indexOf("javascript:")?menuItem.action=helpLinks[link]:(menuItem.action="URL:"+helpLinks[link],menuItem.target="_blank"):"function"==typeof helpLinks[link]&&(menuItem.action=helpLinks[link])),"helpLink"!==link&&"helpCenterLink"!==link||helpAdded?"FAQLink"===link?(menuItem.id="ztb-"+menuItem.id,menu.splice(1,0,menuItem)):"gettingStarted"===link?(menuItem.id="ztb-"+menuItem.id,menu.splice(2,0,menuItem)):"tour"===link&&(menuItem.id="ztb-"+menuItem.id,menu.splice(3,0,menuItem)):(helpAdded=!0,menuItem.id="ztb-"+menuItem.id,menu.splice(0,0,menuItem))}if(void 0!==helpLinks.others)for(i=0;i<helpLinks.others.length;i++)menu.push(helpLinks.others[i]);menusLength>1&&menu.push({id:"ztb-helpsep1",separator:!0})}var otherInfoSepatator=!1;if(void 0!==datas.otherInfo)for(i=0;i<datas.otherInfo.length;i++)menu.push(datas.otherInfo[i]),otherInfoSepatator=!0;if(this._rebrandingObj.websiteAccess&&void 0!==this._aboutUsLink&&this._aboutUsLink.length){var aboutUsI18N="zoho"!==this._suite?ztopbar.suite:this._getString("zoho"),aboutUsLabel=this._getString("about")+" "+aboutUsI18N+" "+this._getString(this.product);zjQuery.inArray(this.product,this._subServices)||(aboutUsLabel=this._getString("about")+" "+this._getString("zoho")),otherInfoSepatator=!0,menu.push({id:"ztb-about",label:aboutUsLabel,action:"URL:"+this._aboutUsLink,target:"_blank"})}this._rebrandingObj.blogAccess&&void 0!==this._blogsLink&&this._blogsLink.length&&(otherInfoSepatator=!0,menu.push({id:"ztb-blogs",label:this._getString("blogs"),action:"URL:"+this._blogsLink,target:"_blank"})),otherInfoSepatator&&(this._rebrandingObj.forumAccess&&void 0!==this._forumsLink&&this._forumsLink.length||void 0!==datas.supportLink||void 0!==datas.feedback||void 0!==datas.liveChat)&&menu.push({id:"ztb-helpsep2",separator:!0}),this._rebrandingObj.forumAccess&&void 0!==this._forumsLink&&this._forumsLink.length&&menu.push({id:"ztb-forums",label:supportLabels[0],action:"URL:"+this._forumsLink,target:"_blank"}),void 0!==datas.supportLink?menu.push({id:"ztb-support",label:supportLabels[1],action:datas.supportLink,target:"_blank"}):void 0!==datas.feedback&&menu.push({id:"ztb-feedback",label:supportLabels[2],action:datas.feedback,target:"_blank"}),void 0!==datas.liveChat&&menu.push({id:"ztb-liveChat",label:supportLabels[3],action:datas.liveChat,target:"_blank"})}else if("ztb-settings"===optionID){for(var others=!1,label="",settingsLabel=String(this._getString("settings")).toLowerCase(),myPreferencesLabel=String(this._getString("myPreferences")).toLowerCase(),adminPanelLabel=String(this._getString("adminPanel")).toLowerCase(),i=0;i<datas.length;i++)label=datas[i].label?datas[i].label.toLowerCase():"","general"===datas[i].type?(menu.splice(0,0,{id:"ztb-settings",label:this._getString("settings"),action:datas[i].action,target:"_blank"}),this._sepPos++):"myPreferences"===datas[i].type?(menu.splice(1,0,{id:"ztb-myPreferences",label:this._getString("myPreferences"),action:datas[i].action,target:"_blank"}),this._sepPos++):"adminPanel"===datas[i].type?(menu.splice(2,0,{id:"ztb-adminPanel",label:this._getString("adminPanel"),action:datas[i].action,target:"_blank"}),this._sepPos++):(label||datas[i].separator)&&label!==settingsLabel&&label!==myPreferencesLabel&&label!==adminPanelLabel&&(menu.push(datas[i]),others=!0);0!==this._sepPos&&others&&menu.splice(this._sepPos,0,{id:"ztb-settingsSep1",separator:!0})}return menu},_setPosition:function(clickEle){this.clickEle=clickEle;var docWidth=this._windowWidth-40,itemArrow=zjQuery(this.showEle[0].childNodes[0]),clickOffset=clickEle.offset(),showEleWidth=this.showEle.width(),heightWithBorder=this.ztbContainer.outerHeight(),topPos="fixed"==this.data.position?clickOffset.top-zjQuery(window).scrollTop()+heightWithBorder:clickOffset.top+heightWithBorder;this.showEle.css({left:clickOffset.left+clickEle.outerWidth()/2-this.showEle.outerWidth()/2,top:topPos});var showOffset=this.showEle.offset();if(itemArrow.css("left",(showEleWidth-16)/2),showOffset.left+showEleWidth>this._windowWidth){var itemLeft=(showOffset.left+this.showEle.width()-docWidth,this.clickEle.offset().left+this.clickEle.outerWidth(!0)-this.showEle.outerWidth(!0));this.showEle.css("left",itemLeft),itemArrow.css("left",this.showEle.outerWidth(!0)-(itemArrow.outerWidth()/2+this.clickEle.outerWidth(!0)/2)-1)}},addMenuItem:function(menuObj,clickEle){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:clickEle?clickEle:this.clickEle[0].id,elementObj=zjQuery("#"+optionID);if("menu"===elementObj.attr("type")&&menuObj){menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],!this.data.settings||"menu"!==this.data.settings.uitype&&this.data.settings.uitype||zjQuery("#ztb-settings:visible")[0]||"ztb-settings"!==optionID||(zjQuery("#ztb-subscriptionText").remove(),zjQuery("#ztb-settings").show(),menuObj.splice(0,0,{separator:!0,id:"ztb-subs1"}),menuObj.splice(1,0,{id:"ztb-manageSubscription",label:this._getString("manageSubscription"),URL:this.data.subscription.manageSubscriptionLink,target:"_blank"}));var Obj=zjQuery("#"+optionID+"-menu > .ztb-content > .ztb-ul");for(i=0;i<menuObj.length;i++){var itemObj=menuObj[i],anchr=void 0,selected=itemObj.selected?"ztb-selected":"",id=itemObj.id?itemObj.id:"",li=zjQuery("<li>").attr({id:id,"class":selected});if(id&&!zjQuery("#"+id,Obj)[0]){var iconClass=itemObj.iconClass?itemObj.iconClass+" ztb-menu-icon ":"",labl=itemObj.label?itemObj.label:"",lnk=itemObj.URL?itemObj.URL:"",targt=itemObj.target?itemObj.target:"",manageSubs=zjQuery("#manageSubscription"),existsEle=itemObj.position?Obj[0].childNodes[itemObj.position]:void 0;if(itemObj.separator)li.addClass("ztb-seperator");else{anchr=zjQuery("<a>").text(labl).appendTo(li).attr({href:lnk,target:targt}).data({menuItem:itemObj});var span=zjQuery("<span>").attr("class",iconClass?iconClass:"");anchr.prepend(span)}if(existsEle)li.insertBefore(existsEle);else if(void 0!==manageSubs[0]&&"ztb-settings"===optionID&&"tryOtherEditions"!==id){var appndTo=manageSubs.prev()[0]?manageSubs.prev():manageSubs;"ztb-settings"===optionID&&this._sepPos&&!zjQuery("#ztb-settingsSep1")[0]&&zjQuery("<li>").attr({id:"ztb-settingsSep1","class":"ztb-seperator"}).insertBefore(appndTo),li.insertBefore(appndTo)}else existsEle||(0===this._sepPos||"ztb-settings"!==optionID||this._sepPos!==Obj.find("li").length||zjQuery("#ztb-settingsSep1")[0]||this._getString(itemObj.id)||itemObj.separator||zjQuery("<li>").attr({id:"ztb-settingsSep1","class":"ztb-seperator"}).appendTo(Obj),li.appendTo(Obj));if(itemObj.action){var act=itemObj.action;"string"==typeof act?-1!==act.indexOf("URL:")?anchr.attr("href",act.split("URL:")[1]):-1!==act.indexOf("javascript:")?(anchr.attr("href",act),anchr.removeAttr("target")):-1!==act.indexOf("mailto:")&&(anchr.attr("href",act),anchr.removeAttr("target")):"function"==typeof act&&(anchr.removeAttr("target").removeAttr("href"),this._actionBind(anchr))}else!anchr||""!==lnk&&void 0!==lnk||(anchr.removeAttr("href"),anchr.removeAttr("target"))}}var base=this;return zjQuery(".ztb-dropdown li").unbind("click.menuItem").bind("click.menuItem",function(){base._closeOpenedItems(),zjQuery(this).closest("#ztb-portals-menu")[0]&&"ztb-managePortals"!=this.id&&zjQuery("#ztb-portals").find("a").text(zjQuery(this).find("a").text())}),this._refreshMenu(optionID),this}},hideMenuItem:function(menuObj){this._hideMenuItem(menuObj,!1)},showMenuItem:function(menuObj){this._hideMenuItem(menuObj,!0)},_hideMenuItem:function(menuObj,status){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var selectedDiv=zjQuery("#"+menuObj[i],"#"+optionID+"-menu");"ztb-seperator"!==selectedDiv.prev().attr("class")||"ztb-seperator"!==selectedDiv.next().attr("class")&&selectedDiv.next()[0]||selectedDiv.prev()[status?show:hide](),selectedDiv[status?"show":"hide"]()}return this._refreshMenu(optionID),this}},removeMenuItem:function(menuObj){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var selectedDiv=zjQuery("#"+menuObj[i],"#"+optionID+"-menu");"ztb-seperator"!==selectedDiv.prev().attr("class")||"ztb-seperator"!==selectedDiv.next().attr("class")&&selectedDiv.next()[0]||selectedDiv.prev().remove(),selectedDiv.remove()}return this._refreshMenu(optionID),this}},updateMenuItem:function(menuObj){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var itemObj=menuObj[i],menuItem=zjQuery("#"+itemObj.id,"#"+optionID+"-menu").find("a");if(menuItem){menuItem.data("menuItem",zjQuery.extend({},menuItem.data("menuItem"),itemObj));var menuIcon=menuItem.find("span");itemObj.label&&(menuItem.text(itemObj.label),menuItem.prepend(menuIcon));var attrObj={};if(itemObj.URL&&(attrObj.href=itemObj.URL),itemObj.target&&(attrObj.target=itemObj.target),void 0!==itemObj.iconClass&&(""===itemObj.iconClass?menuIcon.removeAttr("class"):menuIcon.attr("class",itemObj.iconClass+" ztb-menu-icon ")),itemObj.action){menuItem.unbind("click.ztb");var act=itemObj.action;"string"==typeof act?-1!==act.indexOf("URL:")?attrObj.href=act.split("URL:")[1]:-1!==act.indexOf("javascript:")&&(menuItem.removeAttr("target"),attrObj.href=act):"function"==typeof act&&(menuItem.removeAttr("target"),this._actionBind(menuItem))}menuItem.attr(attrObj)}}return this._refreshMenu(optionID),this}},_actionBind:function(menuItem){menuItem.bind("click.ztb",function(e){var itemAction=zjQuery(this).data("menuItem").action;itemAction&&itemAction(),e.preventDefault()})},updateCount:function(count){var optionID="popover"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id,selElement=zjQuery("#"+optionID);if("popover"===selElement.attr("type"))if(count=parseInt(count),count>0){var countLeft,beforeTooltip=selElement.attr("ztooltip")?selElement.attr("ztooltip"):"";count>99?(countLeft=0,selElement.attr("ztooltip",beforeTooltip+"  ("+count+")"),count="99+"):(countLeft=3,-1!==beforeTooltip.indexOf("(")&&selElement.attr("ztooltip",beforeTooltip.split("(")[0])),setTimeout(function(){var notifyElement=zjQuery("#"+optionID+"-count");notifyElement.length||(notifyElement=zjQuery("<span>").appendTo(selElement).attr({id:optionID+"-count","class":"ztb-notification-alert"})),zjQuery("#"+optionID+"-count").removeClass("ztb-collapse").addClass("ztb-animate"),notifyElement.text(count)},1e3),setTimeout(function(){zjQuery("#"+optionID+"-count").removeClass("ztb-animate")},1700)}else zjQuery("#"+optionID+"-count").addClass("ztb-collapse").removeClass("ztb-animate")},_initRebradingLogo:function(rebrandingLogoSrc){if(this._displayLogo){var ztbLogoSrc="";if(0!==this._ztbLogo.children().length&&this._ztbLogo.children().remove(),rebrandingLogoSrc){var ztbLogoSrc=zjQuery("<img>").attr({src:rebrandingLogoSrc,id:"ztb-logo-rebrand"}).appendTo(this._ztbLogo);ztbLogoSrc.load(function(){ztbLogoSrc.css({"margin-top":Math.ceil(ztbLogoSrc.height()>34?3:(39-ztbLogoSrc.height())/2)})})}else zjQuery("<span>").attr("class","zlogos-22 zlogos-"+this.product).appendTo(this._ztbLogo)}},_changePlaceholder:function(text){return text?void(this._isPlaceholder?zjQuery("#ztb-search-placeholder").text(text):zjQuery("#ztb-search-field").attr("placeholder",text)):this._isPlaceholder?zjQuery("#ztb-search-placeholder").text():zjQuery("#ztb-search-field").attr("placeholder")},_changePortal:function(portalID){if(portalID){var _selectedEle=zjQuery("#"+portalID);_selectedEle&&_selectedEle.closest("#ztb-portals-menu")[0]&&_selectedEle.trigger("click")}},_changeUserInfo:function(userInfo,value){if("object"==typeof userInfo)this.data.userInfo=zjQuery.extend({},this.data.userInfo,userInfo),userInfo.name&&this._setUsername(userInfo.name),userInfo.emailAddress&&this._setEmailAddress(userInfo.emailAddress),userInfo.photo&&this._changeUserPhoto(userInfo.photo),this.data.userInfo=zjQuery.extend({},this.data.userInfo,userInfo);else if("string"==typeof userInfo){if(!value)return this.data.userInfo[userInfo];"name"==userInfo?this._setUsername(value):"emailAddress"==userInfo?this._setEmailAddress(value):"photo"==userInfo&&this._changeUserPhoto(value),this.data.userInfo[userInfo]=value}},_setUsername:function(name){if(name){var _usernameEle=zjQuery("#ztb-user-name");0===_usernameEle.length&&(_usernameEle=zjQuery("<p>").attr("id","ztb-user-name").prependTo(this.profileHeader)),_usernameEle.text(name);var temDiv=zjQuery("<p>").css("font-size",15).attr({id:"ztb-temp-span","class":"ztb-font-family"}).appendTo(zjQuery("body")).text(name),_containerWidth=_usernameEle.width();temDiv.width()>_containerWidth?_usernameEle.attr({ztooltip:name,"class":"ztooltip"}):_usernameEle.removeClass("ztooltip").removeAttr("ztooltip"),temDiv.remove()}},_setEmailAddress:function(emailAddress){if(emailAddress){var _emailEle=zjQuery("#ztb-user-id");0===_emailEle.length&&(_emailEle=zjQuery("<p>").attr("id","ztb-user-id").insertAfter(zjQuery("#ztb-user-name"))),_emailEle.text(emailAddress);var _containerWidth=_emailEle.width(),temDiv=zjQuery("<div>").css("font-size",13).attr({id:"ztb-temp-span","class":"ztb-font-family"}).appendTo(zjQuery("body")).text(emailAddress);temDiv.width()>_containerWidth?_emailEle.attr({ztooltip:emailAddress,"class":"ztooltip"}):_emailEle.removeClass("ztooltip").removeAttr("ztooltip"),temDiv.remove()}},_changeUserPhoto:function(newPhoto){if(newPhoto){zjQuery("#ztb-profile-image-pre").attr("src",newPhoto),zjQuery("#ztb-profile-image").attr("src",newPhoto);var photoLabel=this._getString("change");zjQuery("#ztb-profile-image").next().text(photoLabel)}},_showClearText:function(){zjQuery("#ztb-search-action").addClass("ztb-search-clear ztb-icon-group"),zjQuery("#ztb-search-action").bind("click.clearText",function(){zjQuery("#ztb-search-field").val("")})},_hideClearText:function(){zjQuery("#ztb-search-action").removeClass("ztb-search-clear ztb-icon-group")},innerHTML:function(htmlString){var optionID="popover"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;"popover"===zjQuery("#"+optionID).attr("type")&&zjQuery("#"+optionID+"-popover .ztb-popover-content").append(htmlString)},showTrialInfo:function(subDetail){var trialInfo=subDetail&&subDetail.trialInfo?subDetail.trialInfo:subDetail,base=this;if(trialInfo&&base._trialUpgradeLink){var notifyBar=zjQuery("#ztb-notify-container");if(!notifyBar.length){notifyBar=zjQuery("<div>").attr({"class":"ztb-notify-container ztb-font-family",id:"ztb-notify-container"}),this.mainCont.prepend(notifyBar);var center=zjQuery("<center>").appendTo(notifyBar);zjQuery("<span>").appendTo(center),zjQuery("<button>").addClass("ztb-font-family").appendTo(center),zjQuery("<font>").attr({id:"ztb-will-do-later","class":"ztb-collapse"}).appendTo(center).text(this._getString("willDoLater"));var notifybarClose=zjQuery("<div>").attr({id:"ztb-notifybar-close","class":"ztb-icon-group ztooltip",ztooltip:this._getString("close")}).appendTo(notifyBar);notifybarClose.add(zjQuery("#ztb-will-do-later")).bind("click.notifybar",function(){if(zjQuery("#ztb-upgradeLink").length<1){var ztbOtherEditions=zjQuery("<div>").attr({"class":"ztb-text-type",id:"ztb-upgradeLink",type:"text"}).prependTo(zjQuery("#ztb-textTypeCont"));zjQuery("<a>").attr({"class":"ztb-anchor",href:base._trialUpgradeLink,target:"_blank"}).appendTo(ztbOtherEditions).text(base._getString("upgrade")),zjQuery("#ztb-service-info").css("border-right-width","0px")}else zjQuery("#ztb-upgradeLink").slideDown(100);notifyBar.slideUp(200),setTimeout(function(){notifyBar.addClass("ztb-collapse")},300),base._triggerEvent(base._EVENTS.TRIALCLOSE)}),base._triggerEvent(base._EVENTS.TRIALOPEN),zjQuery("#ztb-tryOtherEditions").hide(),base._initTooltipEvents()}var remaingDays=parseInt(trialInfo.remainingDays),msg=void 0;if(remaingDays>=0&&(msg=this._getString(0===remaingDays?"trialNotifyMessageToday":1===remaingDays?"trialNotifyMessageTomorrow":"trialNotifyMessage"),zjQuery("#ztb-will-do-later").addClass("ztb-collapse"),zjQuery("#ztb-notifybar-close").removeClass("ztb-collapse")),0>remaingDays&&(msg=this._getString("trialNotifyMessageExpired"),zjQuery("#ztb-will-do-later").removeClass("ztb-collapse"),zjQuery("#ztb-notifybar-close").addClass("ztb-collapse")),!msg)return void notifyBar.addClass("ztb-collapse");var label=this._replaceMessage(msg,["<b>"+trialInfo.plan+"</b>",remaingDays]);notifyBar.find("span").html(label),notifyBar.find("button").text(this._getString("upgradeNow")).click(function(){window.open(base._trialUpgradeLink,"_blank")}),notifyBar.hasClass("ztb-collapse")&&(notifyBar.removeClass("ztb-collapse"),notifyBar.slideDown(200),zjQuery("#ztb-upgradeLink").hide())}},hideTrialInfo:function(){var notifyBarClose=zjQuery("#ztb-notifybar-close");notifyBarClose&&(notifyBarClose.trigger("click"),this._documentEle.trigger("mouseup.document"),this._documentEle.trigger("mouseup.doc"))},_replaceMessage:function(msg,args){if("undefined"!=typeof args&&args.length>0)for(var i=0;i<args.length;i++){var regEx=new RegExp("\\{"+i+"\\}","gi");msg=msg.replace(regEx,args[i])}return msg},_getTryNowURL:function(appName){var tryNowURL="";if(this._isAppsInfoMapped&&this._myAppsData){var appInfo=this._myAppsData[appName];if("object"==typeof appInfo)if(!appInfo.isMyApp&&void 0!==appInfo.isMyApp&&appInfo.tryNowURL&&""!==appInfo.tryNowURL){tryNowURL=appInfo.tryNowURL;var queryString=tryNowURL.substring(tryNowURL.indexOf("?")+1);tryNowURL+=queryString!==tryNowURL?"&src=topbar":"?src=topbar"}else appInfo.isMyApp&&appInfo.url&&(tryNowURL=appInfo.url)}return""===tryNowURL&&"site24x7"===appName&&(tryNowURL="//site24x7.com/home/Welcome.do"),""!==tryNowURL?tryNowURL:this._websiteLink?this._websiteLink+appName+"?src=topbar":""},_profileToggle:function(){this._toggleTimeout&&clearTimeout(this._toggleTimeout),this.transitionSupport=void 0!==zjQuery("body").css("transition")?!0:!1;{var profileEle=zjQuery("#ztb-profile");zjQuery("#ztb-profile img")}if(this.isOpen){profileEle.removeClass("ztb-profile-collapse"),-1!==navigator.appVersion.indexOf("MSIE 7.")?profileEle.css({height:"auto"}).addClass("ztb-expand"):(profileEle.css({height:zjQuery("#ztb-accountInfo").outerHeight(!0)+zjQuery("#ztb-profile-header").outerHeight(!0)}),profileEle.addClass("ztb-expand"),this._toggleTimeout&&clearTimeout(this._toggleTimeout),this._toggleTimeout=setTimeout(function(){profileEle.addClass("ztb-expand-timeout")},199)),this.isOpen=!1;var px=0,py=0,base=this;this._documentEle.bind("mouseup.doc",function(e){if(zjQuery(e.target).closest("#ztb-profile")[0]===profileEle[0]){if(px!==e.pageX||py!==e.pageY)return void(base.isOpen=!0);base.isOpen=!1}else base.isOpen=!0;zjQuery("#ztb-change-photo").fadeOut(200),profileEle.addClass("ztb-collapse-timeout ztb-profile-collapse"),base._toggleTimeout&&clearTimeout(base._toggleTimeout),base._toggleTimeout=setTimeout(function(){profileEle.removeClass("ztb-collapse-timeout ztb-expand-timeout")},199),profileEle.css("height",profileEle.data("imageHeight")).removeClass("ztb-expand ztb-expand-timeout"),base._documentEle.unbind("mouseup.doc")}).bind("mousedown",function(e){px=e.pageX,py=e.pageY})}else zjQuery("#ztb-change-photo").css("display","none"),zjQuery("#ztb-accountInfo").fadeIn(100),this._toggleTimeout&&clearTimeout(this._toggleTimeout),profileEle.attr("class","ztb-font-family ztb-profile-collapse ztb-collapse-timeout").css("height",profileEle.data("imageHeight")),this._toggleTimeout=setTimeout(function(){profileEle.removeClass("ztb-collapse-timeout")},199),this.isOpen=!0},_createTooltip:function(){this.ztooltip=zjQuery("<div>").attr({"class":"ztb-ztooltip ztb-font-family"}).html("<span></span><div></div>").appendTo(zjQuery("body")),this._initTooltipEvents()},_initTooltipEvents:function(targetEle){if(this.ztooltip){var ztooltip=this.ztooltip,ztooltipTime=0,fadeOutTime=0;targetEle=targetEle?targetEle:zjQuery(".ztooltip"),targetEle.unbind("mouseenter.ztooltip mouseleave.ztooltip click.ztooltip").bind("mouseenter.ztooltip",function(){if(!zjQuery(this).hasClass("ztb-active")){var currElement=zjQuery(this);ztooltipTime=setTimeout(function(){if(""!=currElement.attr("ztooltip")&&void 0!=currElement.attr("ztooltip")){var body=zjQuery("body"),bodyWidth=body.innerWidth();ztooltip.fadeIn(200).find("div").text(currElement.attr("ztooltip"));var tTop=parseInt(currElement.offset().top+currElement.innerHeight()+6),tLeft=parseInt(currElement.offset().left-(ztooltip.innerWidth()/2-currElement.innerWidth()/2)),ztooltipLeft=parseInt(ztooltip.innerWidth()/2-5);if(1>=tLeft)ztooltipLeft+=tLeft,tLeft=1;else if(tLeft+ztooltip.innerWidth()>bodyWidth){var checkLeft=tLeft+ztooltip.innerWidth()-bodyWidth+1;ztooltipLeft+=checkLeft,tLeft-=checkLeft}ztooltip.css({top:tTop,left:tLeft}),ztooltip.find("span").css("left",ztooltipLeft),fadeOutTime=setTimeout(function(){clearTimeout(ztooltipTime),ztooltip.fadeOut(200)},5e3)}},500)}}).bind("mouseleave.ztooltip",function(){clearTimeout(ztooltipTime),clearTimeout(fadeOutTime),ztooltip.fadeOut()}).bind("click.ztooltip",function(){clearTimeout(ztooltipTime),clearTimeout(fadeOutTime),ztooltip.hide()})}},_userIdTooltip:function(){this.userIdTooltip||(this.userIdTooltip=zjQuery("<div>").attr({id:"ztb-user-id-tooltip","class":"ztb-font-family"}).html("<span></span><span id='ztb-uid-tooltip-arrow'></span><div><p>"+this._getString("userIdTooltipDefinition")+"</p><p>"+this._getString("userIdTooltipDescription")+"</p></div>").appendTo(zjQuery("body")));var userIdTooltip=this.userIdTooltip,userTooltipTime=0,fadeOutTime1=0,body=zjQuery("body");zjQuery("#ztb-zoho-uid-info").bind("mouseenter",function(){var currElement=zjQuery(this);userTooltipTime=setTimeout(function(){var bodyWidth=body.innerWidth();userIdTooltip.show();var tTop=parseInt(currElement.offset().top+currElement.innerHeight()+10),tLeft=parseInt(currElement.offset().left-(userIdTooltip.innerWidth()/2-currElement.innerWidth()/2)),ztooltipLeft=parseInt(userIdTooltip.innerWidth()/2);if(1>=tLeft)ztooltipLeft+=tLeft,tLeft=1;else if(tLeft+userIdTooltip.innerWidth()>bodyWidth){var checkLeft=tLeft+userIdTooltip.innerWidth()-bodyWidth+1;ztooltipLeft+=checkLeft,tLeft-=checkLeft}userIdTooltip.css({top:tTop}),zjQuery(userIdTooltip.find("span")[0]).css("left",ztooltipLeft),zjQuery(userIdTooltip.find("span")[1]).css("left",ztooltipLeft+2)},100)}).bind("mouseout click",function(){clearTimeout(userTooltipTime),clearTimeout(fadeOutTime1),userIdTooltip.fadeOut()}),zjQuery("#ztb-zoho-uid").click(function(){userIdTooltip.fadeOut()})},open:function(){var eleID=this.parentElement?this.parentElement:this.clickEle[0].id,eleObj=zjQuery("#"+eleID);eleObj.hasClass("ztb-active")||"popover"!==eleObj.attr("type")&&"menu"!==eleObj.attr("type")||this._toggle(eleObj)},close:function(){var eleID=this.parentElement?this.parentElement:this.clickEle[0].id,eleObj=zjQuery("#"+eleID);eleObj.hasClass("ztb-active")&&("popover"===eleObj.attr("type")?this._toggle(eleObj):"menu"===eleObj.attr("type")&&this._toggle(eleObj))},_triggerEvent:function(e,ui){this.mainCont.trigger(this._widgetEventPrefix+e,ui)},_refreshMenu:function(optionID){var menuObj=zjQuery("#"+optionID+"-menu"),menuContent=menuObj.find("span.ztb-menu-icon");menuContent.length?menuObj.addClass("ztb-menu-icontext"):menuObj.removeClass("ztb-menu-icontext"),this.showEle=menuObj,this._setPosition(zjQuery("#"+optionID))},setPosition:function(positionToToggle){var curPosition=this.mainCont.css("position");return curPosition!==positionToToggle?("relative"===positionToToggle&&zjQuery(".ztb-fixed").removeClass("ztb-fixed"),this.mainCont.css({position:positionToToggle}),curPosition):void 0},show:function(status){status?(this.mainCont.hide(),this._triggerEvent(this._EVENTS.ONCLOSE)):(this.mainCont.show(),this._triggerEvent(this._EVENTS.ONOPEN))}},ztopbar=function(data){data.properWay=!0,topbarObj=zTopbar(data)},ztopbar.addItem=function(Obj){topbarObj.addItem(Obj)},ztopbar.removeItem=function(ObjID){topbarObj.removeItem(ObjID)},ztopbar.item=function(ObjID){return topbarObj.item(ObjID),topbarObj},ztopbar.hideTrialInfo=function(){topbarObj.hideTrialInfo()},ztopbar.showTrialInfo=function(trialInfo){topbarObj.showTrialInfo(trialInfo)},ztopbar.updateMessages=function(htmlString){topbarObj.item("messages").innerHTML(htmlString)},ztopbar.updateMessagesCount=function(number){topbarObj.item("messages").updateCount(number)},ztopbar.updateNotifications=function(htmlString){topbarObj.item("notifications").innerHTML(htmlString)},ztopbar.updateNotificationsCount=function(number){topbarObj.item("notifications").updateCount(number)},ztopbar.setPosition=function(positionToToggle){topbarObj.setPosition(positionToToggle)},ztopbar.changeLogo=function(src){topbarObj._initRebradingLogo(src)},ztopbar.selectPortal=function(portalID){topbarObj._changePortal(portalID)},ztopbar.userInfo=function(userInfo,value){return topbarObj._changeUserInfo(userInfo,value)},ztopbar.search=function(){return topbarObj},ztopbar.search.placeholder=function(text){return topbarObj._changePlaceholder(text)},ztopbar.search.showClearButton=function(){topbarObj._showClearText()},ztopbar.search.hideClearButton=function(){topbarObj._hideClearText()},ztopbar.open=function(){topbarObj.show(!0)},ztopbar.close=function(){topbarObj.show(!1)}}(),ztopbar.getDefaults=function(){return{getAllAppsJSON:function(){return[{categoryName:"salesAndMarketing",categoryId:"SM",apps:["crm","motivator","campaigns","survey","sites","salesiq","social","contactmanager","forms"],position:1},{categoryName:"businessProcesses",categoryId:"BP",apps:["creator","reports","site24x7"],position:2},{categoryName:"emailAndCollaboration",categoryId:"EC",apps:["mail","chat","connect","docs","projects","bugtracker","meeting","showtime","vault"],position:3},{categoryName:"helpdesksoftware",categoryId:"HD",apps:["support","assist"],position:4},{categoryName:"finance",categoryId:"FN",apps:["books","invoice","subscriptions","expense","inventory"],position:5},{categoryName:"humanresources",categoryId:"HR",apps:["people","recruit"],position:6},{categoryName:"others",categoryId:"OT",apps:[],position:7}]}}}(),ztopbar.suite="Zoho",ztopbar.isSwitchToMenuEnabled=!0,ztopbar.hasUserReferrals=!1,ztopbar.displayUserID=!0,ztopbar.allAppsCategoryListOrder=[[1,2,3],[4,5,6]],function($){$.FCImageLibrary={target:void 0,docsDownloadURL:void 0,imagestype:"Library",selectTab:!0,options:{setSearchKey:void 0,callbackUrl:window.location.origin+FComponents.option("contextPath")+"checkconf.do",addToLibrary:void 0,isRemoteAPIMode:!1,customUploadUrl:void 0,allowCC:!1,publicImagesTypes:void 0,defaultSearchOption:void 0,flickrImageLimit:void 0},beforeInit:function(){var libDialog=$("#imagelibrary"),libDialogWidget=libDialog.parent().dialog("widget"),insertEle=libDialogWidget.find("#insert"),base=this;if(insertEle.button("disable"),$.ZImageLibrary.Public.Flickr.allowCC=base.options.allowCC,$.ZImageAction.customUploadUrl=base.options.customUploadUrl,$.ZImageAction.reqData=base.options.reqData,FComponents.fcGadgetsUrl=libDialog.data("fcgadgetsurl"),libDialog.zimagehandler({onInsert:this.options.onInsert,insertEle:insertEle,deleteEle:$("#delete"),deleteAction:function(){base._deleteImages()},serverUrl:FComponents.fcGadgetsUrl,callbackUrl:base.options.callbackUrl,ticket:void 0,addToLibrary:!base.options.isRemoteAPIMode,uploadAction:function(ele,add_lib,callback,sourceType,addToDoc){base._uploadImage(ele,add_lib,callback,sourceType,addToDoc)},publicImagesTypes:base.options.publicImagesTypes,defaultSearchOption:base.options.defaultSearchOption,flickrImageLimit:base.options.flickrImageLimit}),libDialog.bind("imageselect",function(){insertEle.button("enable")}).bind("imageunselectall",function(){insertEle.button("disable")}).bind("tabselect",function(){insertEle.button("disable")}),this.selectTab=!1,!base.options.isRemoteAPIMode){var licenseMsg=$("<span>").html("<sup>*</sup>"+FCUtil.getI18NString("zimagelist","image.licensemsg")).css({display:"block",color:"#CF4236"}).attr({id:"licenseMsg"}),flickrLicenseMsg=$("<p>").html("<sup>*</sup>"+FCUtil.getI18NString("zimagelist","image.flickrlicensemsg",['<br/><span class="ui-zfc-cc-icon"></span>'])).css({display:"none",color:"#CF4236"}).attr({id:"flickrLicenseMsg"});libDialogWidget.find(".ui-dialog-footer-status").removeClass("ui-widget-content").css({"float":"left","margin-top":"12px","text-align":"left"}).show().append(flickrLicenseMsg).append(licenseMsg)}this._bindEvents()},_deleteImages:function(){$.ZImageAction.deleteImages()},_uploadImage:function(ele,add_lib,callback,sourceType,addToDoc){$.ZImageAction.uploadImage(ele,add_lib,callback,sourceType,addToDoc)},_bindEvents:function(){var library=$("#Library");library.bind("dragover",function(){library.addClass("ui-lib-uploader-dragover")}).bind("dragleave",function(){library.removeClass("ui-lib-uploader-dragover")}).bind("drop",function(){library.removeClass("ui-lib-uploader-dragover")}).bind("keydown",function(ev){if(ev&&ev.target){var id=$(ev.target).attr("id");if("imagesearchinput"===id)return}(46==ev.keyCode||8==ev.keyCode)&&($.ZImageAction.deleteImages(),ev.stopPropagation(),ev.preventDefault())})},init:function(){var tab=$("#imagelibrary"),keyword=this.options.setSearchKey;tab.zimagehandler("setSearchKey",keyword);tab.parent(".ui-dialog-content");tab.ztab("selectTabByType",$.FCImageLibrary.imagestype,this.selectTab),this.selectTab=!0},openDialog:function(targetEle,tabName,fcOptions){$.extend(!0,$.FCImageLibrary.options,fcOptions);var imageDialogUrl=this.options.isRemoteAPIMode?"r_getdialog.do":"getdialog.do",services={WR:1,ST:2,SW:3},servicetype=services[FComponents.option("service")],paramData={dialog_name:"imageLibraryDialog",servicetype:servicetype};this.options.isRemoteAPIMode&&(paramData.isRemoteAPIMode=!0),$.FCImageLibrary.imagestype=tabName;var dialogObj={ajax:{url:FComponents.option("contextPath")+imageDialogUrl,data:paramData},addDefaultData:!1};$.dialogutil.open("library",targetEle,$.FCImageLibrary,void 0,dialogObj)}}}(jQuery);var FCImageLibrary=function($){function _getCallBackURL(){var windowOrigin=window.location.origin;(void 0===windowOrigin||""===windowOrigin)&&(windowOrigin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var contextPath=FComponents.option("contextPath");return void 0!==contextPath&&"/"!==contextPath.substring(0,1)&&(windowOrigin+="/"),windowOrigin+FComponents.option("contextPath")+"checkconf.do"}function closeDialog(){var importDialog=$("#"+_dialogId);$.FCDragDropImage.destroy(),importDialog.length&&($("#imagelibrary").off(),importDialog.off(),_dialogIsOpened=!1,importDialog.parent().length&&importDialog.parent().remove(),importDialog.remove())}var _dialogId="library",_dialogIsOpened=!1,imageLibraryConfig={target:void 0,imagestype:"Library",selectTab:!0,options:{onInsert:void 0,setSearchKey:void 0,callbackUrl:void 0,addToLibrary:void 0,enableGadgets:!0,isRemoteAPIMode:!1,uploadURL:void 0},beforeInit:function(){var libDialog=$("#imagelibrary"),libDialogWidget=libDialog.parent().dialog("widget"),insertEle=libDialogWidget.find("#insert"),base=this;if(insertEle.button("disable"),$.ZImageAction.customUploadUrl=base.options.uploadURL,$.ZImageAction.reqData=base.options.reqData,libDialog.zimagehandler({onInsert:base.options.onInsert,insertEle:insertEle,deleteEle:$("#delete"),deleteAction:function(){base._deleteImages()},serverUrl:base.options.fcGadgetsUrl,callbackUrl:_getCallBackURL(),ticket:void 0,addToLibrary:!base.options.isRemoteAPIMode,uploadAction:function(ele,add_lib,callback,sourceType,addToDoc){base._uploadImage(ele,add_lib,callback,sourceType,addToDoc)}}),libDialog.bind("imageselect",function(){insertEle.button("enable")}).bind("imageunselectall",function(){insertEle.button("disable")}).bind("tabselect",function(){insertEle.button("disable")}),this.selectTab=!1,!base.options.isRemoteAPIMode){var licenseMsg=$("<span>").html("<sup>*</sup>"+$.i18n("show.editor.image.licensemsg")).css({display:"block",color:"#CF4236"});libDialogWidget.find(".ui-dialog-footer-status").removeClass("ui-widget-content").css({"float":"left","margin-top":"12px","text-align":"left"}).show().append(licenseMsg)}this._bindEvents()},_deleteImages:function(){$.ZImageAction.deleteImages()},_uploadImage:function(ele,add_lib,callback,sourceType,addToDoc){$.ZImageAction.uploadImage(ele,add_lib,callback,sourceType,addToDoc)},_bindEvents:function(){var library=$("#Library");library.bind("dragover",function(){library.addClass("ui-lib-uploader-dragover")}).bind("dragleave",function(){library.removeClass("ui-lib-uploader-dragover")}).bind("drop",function(){library.removeClass("ui-lib-uploader-dragover")}).bind("keydown",function(ev){if(ev&&ev.target){var id=$(ev.target).attr("id");if("imagesearchinput"===id)return}(46==ev.keyCode||8==ev.keyCode)&&($.ZImageAction.deleteImages(),ev.stopPropagation(),ev.preventDefault())})},init:function(){var tab=$("#imagelibrary"),keyword=this.options.setSearchKey;tab.zimagehandler("setSearchKey",keyword);tab.parent(".ui-dialog-content");tab.ztab("selectTabByType",$.FCImageLibrary.imagestype,this.selectTab),this.selectTab=!0}};return{docsDownloadURL:void 0,noOfImagesToBeSelected:void 0,open:function(fcOptions){if(!_dialogIsOpened){fcOptions||(fcOptions={}),imageLibraryConfig.options.onInsert=fcOptions.onInsert,imageLibraryConfig.options=$.extend(!0,imageLibraryConfig.options,fcOptions),imageLibraryConfig.options.callbackUrl=_getCallBackURL(),FCImageLibrary.noOfImagesToBeSelected=void 0!=fcOptions.noOfImagesToBeSelected?fcOptions.noOfImagesToBeSelected:FCImageLibrary.noOfImagesToBeSelected,FCImageLibrary.docsDownloadURL=void 0!=fcOptions.docsDownloadURL?fcOptions.docsDownloadURL:FCImageLibrary.docsDownloadURL,imageLibraryConfig.options.setSearchKeyWord=void 0!=fcOptions.defaultSearchKeyword?fcOptions.defaultSearchKeyword:imageLibraryConfig.options.setSearchKeyWord,imageLibraryConfig.options.imagestype=void 0!=fcOptions.insertFrom?fcOptions.insertFrom:imageLibraryConfig.options.imagestype,imageLibraryConfig.options.customUploadUrl=void 0!=fcOptions.uploadURL?fcOptions.uploadURL:imageLibraryConfig.options.customUploadUrl,imageLibraryConfig.options.fcGadgetsUrl=void 0!=fcOptions.gadgetsURL?fcOptions.gadgetsURL:imageLibraryConfig.options.fcGadgetsUrl,imageLibraryConfig.options.enableGadgets=void 0!=fcOptions.enableGadgets?fcOptions.enableGadgets:imageLibraryConfig.options.enableGadgets,imageLibraryConfig.options.reqData=void 0!=fcOptions.customData?fcOptions.customData:imageLibraryConfig.options.reqData,imageLibraryConfig.options.isRemoteAPIMode=void 0!=imageLibraryConfig.options.customUploadUrl?!0:!1,imageLibraryConfig.options.isRemoteAPIMode=void 0!=fcOptions.isRemoteMode?fcOptions.isRemoteMode:imageLibraryConfig.options.isRemoteAPIMode,$.FCImageLibrary.imagestype=imageLibraryConfig.options.imagestype;var dialogEle='<div id="imagelibrary" class="library" ctype="ztab" data=\'{"componentOptions": {"vertical": true}}\'><ul class="menutabs" style="background-color:blue;"><li ttype="uploadFromLocal" data=\'{"libraryOptions": {"imageCategory": "local"}}\'><a href="#fromlocal">'+FCUtil.getI18NString("zimagelibrary","upload.label")+'</a></li><li ttype="uploadFromURL" data=\'{"libraryOptions": {"imageCategory": "url"}}\'><a href="#fromurl">'+FCUtil.getI18NString("zimagelibrary","fromurl.label")+'</a></li><li ttype="custom" class="ui-tabs-separatorline"></li>';imageLibraryConfig.options.isRemoteAPIMode||(dialogEle=dialogEle+'<li ttype="Library" data=\'{"libraryOptions":{"imageCategory": "Library", "authURL": true, "controls": true}}\'><a href="#Library">'+FCUtil.getI18NString("zimagelibrary","mylibrary.label")+"</a></li>"),imageLibraryConfig.options.enableGadgets&&(dialogEle=dialogEle+'<li id="picasatab" ttype="Picasa" data=\'{"libraryOptions": {"imageCategory": "Picasa", "search": true}}\'><a href="#Picasa">'+FCUtil.getI18NString("zimagelibrary","picasa.label")+'</a></li><li id="flickrtab" ttype="Flickr" data=\'{"libraryOptions": {"imageCategory": "Flickr","search": true}}\'><a href="#Flickr">'+FCUtil.getI18NString("zimagelibrary","flickr.label")+'</a></li><li id="websearchtab" ttype="Public" data=\'{"libraryOptions": {"imageCategory": "Public","search": true}}\'><a href="#Public">'+FCUtil.getI18NString("zimagelibrary","websearch.label")+"</a></li>"),dialogEle+='</ul><div id="fromlocal"></div><div id="fromurl"></div><div id="Library" tabindex=0 ></div><div id="Picasa" ></div><div id="Flickr" ></div><div id="Public" ></div></div>',imageDialog=$('<div id="'+_dialogId+'"></div>').appendTo($("body")),imageDialog.append(dialogEle),imageDialog.zdialog({dialogClass:"zimagelibrary-dialog",position:"center",width:980,height:"auto",buttons:[{id:"insert","class":"ui-zbutton-primary",text:FCUtil.getI18NString("zimagelibrary","insert.label"),click:function(){FCImageLibrary.insertImage()},btype:"loader"},{text:FCUtil.getI18NString("zimagelibrary","close.label"),click:"CLOSE"}],associatedObj:imageLibraryConfig,title:FCUtil.getI18NString("zimagelibrary","title.label"),resizable:!1,modal:!0,autoOpen:!0}).on("dialogclose.imagelibrary",function(){closeDialog()}),_dialogIsOpened=!0,$.FCDragDropImage.init(imageLibraryConfig.options.customUploadUrl,imageLibraryConfig.options.reqData)}},insertImage:function(){$.ZImageAction.insertImageFromLibrary()},close:function(){var importDialog=$("#"+_dialogId);importDialog.length&&importDialog.dialog("close")}}}(jQuery);!function($){$.ZImageAction={request:void 0,customUploadUrl:void 0,reqData:void 0,insertImageFromLibrary:function(){$("#libraryzdialog").zdialog("disableButton","insert"),$('<div class="ui-imagediglog-overlay">').appendTo("#imagelibheader"),$("#imagelibrary").zimagehandler("insert"),$("#LibraryImages").zimagelist("deSelectAll")},uploadImage:function(ele,add_lib,callback,sourceType){callback=$.extend(!0,{},callback),void 0===add_lib&&(add_lib="false");var base=this;sourceType=sourceType?sourceType:"document";var data;base.customUploadUrl?data=base.reqData:(data={add_lib:add_lib,sourcetype:sourceType},data[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken()),data||(data={}),data.imagefile=ele;var callbacks={beforeSend:function(){callback.beforeSend&&callback.beforeSend()},progress:function(resp,percentage){callback.updateProgress&&callback.updateProgress(percentage)},success:function(serverResponse){var responseObj=serverResponse;if("object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse)),("success"===responseObj.request||"partial"===responseObj.request)&&callback.success){var imageInfo=responseObj.IMAGES;return void(imageInfo instanceof Array?callback.success(imageInfo,ele):callback.success([imageInfo],ele))}base.customUploadUrl&&callback.success&&(responseObj instanceof Array?callback.success(responseObj,ele):callback.success([responseObj],ele))},fail:function(resp){callback.fail&&callback.fail(),base.imageErrorResp(resp)}};this._supportedFormats=$("#imagelibrary").zimagehandler("getSupportedFormats"),this._maxAllowedSize=10485760,this._currAttachmentSize=0;var invalidSizeMessage=FCUtil.getI18NString("zimagelibrary","invalidsizemessage.label",[this._bytesToSize(this._maxAllowedSize)]),invalidFormat=!0;if("undefined"!=typeof FileReader)for(var targetELe=ele[0].files,i=0;i<targetELe.length;++i)file=targetELe[i],fileSize=file.size,mimeType=file.type,this._currAttachmentSize+=fileSize,invalidFormat&&(invalidFormat=base._checkExtension(file.name));var invalidSize=this._currAttachmentSize>this._maxAllowedSize?!0:!1;if(invalidSize||!invalidFormat)invalidFormat||(invalidSizeMessage=FCUtil.getI18NString("zimagelibrary","invalidformat.label")+"<br/> <br/>"+FCUtil.getI18NString("zimagelibrary","supportedfileformats.label",[this._supportedFormats])),this._clearFile(ele),ZComponents.showMessageDialog({type:"alert",secondary:invalidSizeMessage,icon:"ui-zalert-error"});else{var url=this.customUploadUrl?base.customUploadUrl:FComponents.option("contextPath")+"fcuploadimage.do";$.ajaxUpload(url,data,callbacks,"text")}},_clearFile:function(ele){ele.wrap("<form>").closest("form").get(0).reset(),ele.unwrap()},_checkExtension:function(fileName){var extArr=this._supportedFormats.split(","),index=fileName.lastIndexOf("."),ext=fileName.substr(index+1).toLowerCase();return $.inArray(ext,extArr)<0?!1:!0},_bytesToSize:function(bytes){var sizes=["bytes","KB","MB","GB","TB"];if(0==bytes)return bytes+""+sizes[0];var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.ceil(bytes/Math.pow(1024,i)*100)/100+" "+sizes[i]},deleteImages:function(){var imageIds=[],imageCategory=$("#imagelibrary").zimagehandler("getSelectedImageCategory"),imagesInfo=$("#"+imageCategory+"Images").zimagelist("getSelectedImages"),deleted=!1;if(!$.ZImageAction.request){if(imagesInfo.length){$.each(imagesInfo,function(i,imageInfo){var imageId=imageInfo.RESOURCE_ID;imageIds.push(imageId)});var data={imageId:imageIds};data[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken(),$.ZImageAction.request=$.ajax({type:"post",url:FComponents.option("contextPath")+"fcdeleteimage.do",data:data,traditional:!0,success:function(serverResponse){$.ZImageAction.request=void 0;var responseObj=serverResponse;"object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse)),$("#imagelibrary").zimagehandler("removeSelectedImages",{imageIds:imageIds}),deleted=!0},fail:function(){$.ZImageAction.request=void 0}})}return deleted}},imageErrorResp:function(resp){resp=resp.replace(/'/g,'"');var respText=JSON.parse(resp);respText&&respText.errorMsg&&alert(respText.errorMsg)}}}(jQuery),function($){var zimagehandler={_imageLibrary:void 0,_imageLibraryContainer:void 0,_startIndex:0,_imageCategory:void 0,_header:void 0,_urlInfo:void 0,_supportedFormats:"jpg,png,gif,jpeg,bmp",_imagesType:"Google",options:{count:20,multiselect:!0,imagelist:void 0,pagination:!0,selectedCount:1,thumbMaxHeight:160},widgetEventPrefix:"image",_EVENTS:{ONINSERT:"insert",ONDELETE:"delete",ONSELECT:"select",ONUNSELECT:"unselectall"},_create:function(){this._initEvents()},_initEvents:function(){var base=this;this._createLoader(),this.options.defaultSearchOption&&(this._imagesType=this.options.defaultSearchOption),$(this.element).on("tabselect."+this.widgetName,function(ev,ui){base._selectedCategory=ui.relatedPaneId,base._selectedTab=ui.tab,base._selectedOptions=ui.tab.metadata(),base._imageLibrary=ui.relatedPane,$(base._imageLibraryContainer).empty(),base._imageCategory=base._selectedOptions.libraryOptions.imageCategory,base._isInsertFromWeb="Public"===base._imageCategory||"Picasa"===base._imageCategory||"Flickr"===base._imageCategory||"url"===base._imageCategory?!0:!1,base._imageCategory="Public"==base._imageCategory?base._imageCategory+base._imagesType:base._imageCategory;var containerId="Public"==base._selectedCategory?"PublicGoogle":base._imageCategory;base._imageLibraryContainer=$("#"+containerId+"ImagesContainer",base._imageLibrary),base._header=$("#imagelibheader",base._imageLibrary),base._imageLibrary.css({"float":"left",width:"100%"}),base._imageLibraryContainer.length||(base._imageLibraryContainer=base._createLibraryContainer()),"url"==base._imageCategory&&(base._urlInfo=void 0);var uploadTabs="local"==base._imageCategory||"url"==base._imageCategory;base._imageLibraryContainer.empty(),base._header.length||uploadTabs||(base._header=base._createHeader().insertBefore(base._imageLibraryContainer).hide()),base._header.show();var search=base._header.find(".ui-lib-search");if(search.length&&search.find(".ui-lib-search-input").val(base._getString("search.label")),$.ZImageLibrary.Public.Flickr.allowCC){var container=$("#imagelibrary").parent().dialog("widget");$("#licenseMsg",container).show(),$("#flickrLicenseMsg",container).hide()}base._keyword=void 0,uploadTabs?(base._loader.hide(),"local"==base._imageCategory?base._showUploadContent():base._showURLUploadContent()):base.getImages(1)})},_createLoader:function(){this._loader=$("<div>").addClass("ui-icon-loader-big ui-lib-loader-pos").hide().appendTo(this.element)},getSelectedImageCategory:function(){return this._imageCategory},_createHeader:function(){var headerDiv=$("<div>").attr("id","imagelibheader").addClass("ui-lib-header");this._createSearchEle().appendTo(headerDiv);var authURL=$.ZImageLibrary[this._selectedCategory].authURL;authURL&&this._createInfoDiv().appendTo(headerDiv);var controls=this._selectedOptions.libraryOptions.controls;return controls&&(this._controlDiv=this._createControls(),this._controlDiv.appendTo(headerDiv)),headerDiv},_createInfoDiv:function(){var infoDiv=$("<div>").addClass("ui-lib-userinfo"),base=this,authURL=$.ZImageLibrary[base._imageCategory].authURL;if(authURL&&"true"!=authURL.toString()){var userPhoto=($("<span>").addClass("ui-lib-username").appendTo(infoDiv),$("<img>").addClass("ui-lib-userphoto").appendTo(infoDiv)),switchuserMenu=$("#"+this._imageCategory+"switchuserMenu");switchuserMenu.length||(switchuserMenu=$.ui.zmenu.createMenu(this._imageCategory+"switchuserMenu",[{id:"switchuser",label:this._getString("signinasadifferentuser.label")}],{type:"text_only"})),switchuserMenu.on("menuitemclicked",function(){base._switchAccount(authURL)}),switchuserMenu.attr("position","end_after_end"),userPhoto.attr("popup",this._imageCategory+"switchuserMenu")}return infoDiv},_getInternetExplorerVersion:function(){var rv=-1;if("Microsoft Internet Explorer"==navigator.appName){var ua=navigator.userAgent,re=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=re.exec(ua)&&(rv=parseInt(RegExp.$1))}return rv},_updateAuthorNameAndPhoto:function(user){$("#"+this._imageCategory+"searchtype");if("public"!=this._imagesType[this._imageCategory]){var username=this._header.find(".ui-lib-userinfo .ui-lib-username"),userphoto=this._header.find(".ui-lib-userinfo .ui-lib-userphoto");username.text(user.name),userphoto.attr("src",user.photo)}this._header.show()},_createSearchEle:function(){var searchDiv=$("<div>").addClass("ui-insimage-search"),searchInput=$("<input>").addClass("ui-insimage-search-input ui-corner-left").attr("placeholder",this._getString("search.label")).attr("id","imagesearchinput"),searchString=$("<span>").addClass("ui-insimage-search-icon ui-icon ui-components-icon ui-icon-search");searchInput.addClass("ui-icon-public-search-input").removeClass("ui-corner-left");var eleId="Public"==this._selectedCategory?"searchtypebtnPublicGoogle":"searchtypebtn"+this._imageCategory,button=$("<div>").addClass("ui-insimage-from").attr({id:eleId}),iconClass="ui-social-color-icon ui-color-icon-zgoogle";if("PublicGoogle"!=this._imageCategory&&("Library"===this._imageCategory?(button.text(this._getString(this._imageCategory.toLowerCase()+".label")),iconClass="ui-button-icon-primary ui-icon ui-components-toolbar-icon ui-icon-z"+this._imageCategory.toLowerCase()):iconClass="ui-social-color-icon ui-color-icon-z"+this._imageCategory.toLowerCase(),button.css({cursor:"default","text-align":"left"})),"Public"==this._selectedCategory){var imageType=this._imagesType?this._imagesType.toLowerCase():"google";iconClass="ui-social-color-icon ui-color-icon-z"+imageType,button.attr("popup","publicSearchTypeMenu")}return button.attr("data",'{"icons": {"primary": "'+iconClass+'"}, "text": true}').zbutton(),button.appendTo(searchDiv),searchInput.appendTo(searchDiv),searchString.appendTo(searchDiv),"Public"==this._selectedCategory&&(searchInput.addClass("ui-icon-public-search-input").removeClass("ui-corner-left"),this._createSearchTypeMenu()),this._bindSearchEvents(searchDiv),searchDiv},_bindSearchEvents:function(searchEle){{var searchInput=searchEle.find("input"),base=this;searchInput.val()}searchInput.on("keydown",function(ev){if(ev.keyCode==$.ui.keyCode.ENTER){var text=searchInput.val();base._keyword=text,base._isSearchEntered=!0,text&&(base._curentImagesList=base.getImagesList(),base._imageLibraryContainer.empty(),base.getImages(1,void 0,!0))}}).on("focus",function(){var imagelist=$("#"+base._imageCategory+"Images");imagelist.zimagelist("deSelectAll"),base._keyword||searchInput.val("")}),searchInput.on("keyup",function(){var text=searchInput.val();if(!text&&base._isSearchEntered){base._keyword=text,base._isSearchEntered=!1;var isPublic=-1!=base._imageCategory.indexOf("Public");isPublic||(base._imageLibraryContainer.empty(),base._buildImages(base._curentImagesList,void 0,!1))}}),searchEle.find("span.ui-insimage-search-icon").on("click",function(){base._keyword=searchInput.val(),base._isSearchEntered=!0,base._imageLibraryContainer.empty(),base.getImages(1,void 0,!0)})},_createSearchTypeMenu:function(){var base=this,publicOptions=["Google","Picasa","Flickr"];this.options.publicImagesTypes&&(publicOptions=this.options.publicImagesTypes);var items=[];$.each(publicOptions,function(i,opt){var item={id:opt.toLowerCase()+"_public",inputtype:"radio",name:"searchType",data:'{"op": "'+opt+'"}',html:{content:'<span style="display:block" class="ui-social-color-icon ui-color-icon-z'+opt.toLowerCase()+'"></span>',replaceWithText:!0}};base._imagesType===opt&&(item.checked=!0),items.push(item)});var base=this;return this._searchMenu=$("#publicSearchTypeMenu"),this._searchMenu.length&&this._searchMenu.remove(),this._searchMenu=$.ui.zmenu.createMenu("publicSearchTypeMenu",items).attr("relativeto","parent"),this._searchMenu.on("menuitemclicked",function(ev,ui){base._imageLibraryContainer.empty(),(""==base._keyword||"undefined"==typeof base._keyword)&&(base._keyword="Flickr"==ui.menuitem.metadata().op?".":void 0);var button=(ui.menuitem.find(".ui-zmenu-text").text(),$("#searchtypebtnPublicGoogle"));base._imagesType=ui.menuitem.metadata().op;var iconClass="z"+base._imagesType.toLowerCase();if(button.button("option","icons",{primary:"ui-social-color-icon ui-color-icon-"+iconClass,secondary:button.button("option","icons").secondary}),button.parent().find(".ui-lib-search-input"),base._imageCategory=base._selectedCategory+ui.menuitem.metadata().op,$.ZImageLibrary.Public.Flickr.allowCC){var container=$("#imagelibrary").parent().dialog("widget");$("#licenseMsg",container).show(),$("#flickrLicenseMsg",container).hide()}base.getImages(1)}),this._searchMenu},_createLibraryContainer:function(){return $("<div>").attr("id",this._imageCategory+"ImagesContainer").addClass("ui-lib-image").appendTo(this._imageLibrary)},getImages:function(startIndex,limit,fromSearch){this._startIndex=startIndex;var base=this,sortOrder=base.options.sortOrder;if(base._selectedOptions.libraryOptions.imagelist){var list=base._selectedOptions.libraryOptions.imagelist;this._buildImages(list,startIndex,fromSearch)}else{var isPublic=-1!=base._imageCategory.indexOf("Public"),imageCategoryFn=isPublic?$.ZImageLibrary[base._selectedOptions.libraryOptions.imageCategory][base._imagesType]:$.ZImageLibrary[base._imageCategory],imageCategory=isPublic?base._selectedOptions.libraryOptions.imageCategory+base._imagesType:base._imageCategory;base._loader.show(),isPublic&&!base._keyword&&(base._keyword=this.options.publicSearchKeyword,base._imageLibrary.find(".ui-icon-public-search-input").val(base._keyword));var count=limit?limit:base.options.count;if($.ZImageLibrary.Public.Flickr.allowCC&&"PublicFlickr"===base._imageCategory){var licenseTypes=$.ZImageLibrary.Public.Flickr.licenseTypes,licenseIndex=$.ZImageLibrary.Public.Flickr.licenseIndex;licenseIndex=void 0===licenseIndex||licenseIndex>=licenseTypes.length-1?0:licenseIndex+1,$.ZImageLibrary.Public.Flickr.licenseIndex=licenseIndex;var currentLicenseType=licenseTypes[licenseIndex],flickrURL=$.ZImageLibrary.Public.Flickr.licenseURL;$.ZImageLibrary.Public.Flickr.URL=flickrURL.replace("{0}",currentLicenseType),count=base.options.flickrImageLimit?base.options.flickrImageLimit:count}var imgCategory=base._imageCategory;imageCategoryFn.load(base,startIndex,count,base._keyword,sortOrder,function(baseObj,resp){baseObj._loader.hide();var list="string"==typeof resp?JSON.parse(resp):resp;(!list||list.Error)&&(list={IMAGES:[],TOTALCOUNT:0}),-1!=imageCategory.indexOf("Google")?list.TOTALCOUNT=64:"Picasa"===base._imageCategory&&(list.TOTALCOUNT=list.IMAGES&&list.IMAGES.length),base._TOTALCOUNT=list.TOTALCOUNT,"local"!=base._imageCategory&&imgCategory==base._imageCategory&&baseObj._buildImages(list,startIndex,fromSearch)})}},_switchAccount:function(authUrl){this._createIframeAndLoadContent(authUrl)},_createIframeAndLoadContent:function(authUrl){var base=this,options=this._selectedOptions.libraryOptions;this._imageLibraryContainer.empty(),base._loader.hide(),base._header.hide();var url=this.options.serverUrl+"/"+authUrl+"serURL="+this.options.callbackUrl+"&border=no",iframe=$("<iframe>").attr({id:options.imageCategory+"authContent",src:url});iframe.appendTo(this._imageLibraryContainer),iframe.load(function(){var contentwindow=iframe[0].contentWindow;try{contentwindow.loadImages=function(){base.getImages(1)},$(contentwindow.document).trigger("ready")}catch(e){}})},_buildImages:function(list,startIndex,fromSearch){var base=this;if(list.IMAGES){if(list.IMAGES.length>0&&list.IMAGES[0]&&("public"!=base._imagesType[base._imageCategory]||!options.PUBLIC_URL)){var user={};user.name=list.IMAGES[0].AUTHOR_NAME?list.IMAGES[0].AUTHOR_NAME:list.USER_NAME,user.photo=list.USER_PHOTO,base._updateAuthorNameAndPhoto(user)}base._header.show(),base._buildContainer(list,startIndex,fromSearch)}else{var authURL=$.ZImageLibrary[base._imageCategory].authURL;authURL&&base._createIframeAndLoadContent(authURL)}},_showUploadContent:function(){var base=this;this._imageLibraryContainer.empty(),base._loader.hide();var uploadDiv=$("<div>").addClass("ui-lib-uploader-div"),uploadLabel=$.i18n("zimagelist","chooseanimagetoupload.label"),uploadBtn=$("<input/>").attr({type:"file",label:uploadLabel,name:"imagefile",id:"imagefile",multiple:"true",accept:"image/jpg,image/png,image/jpeg,image/gif,image/bmp"}),dragDrop=$("<h3>").text($.i18n("zimagelist","dragdropimages.label")),optionEle=$("<h5>").text($.i18n("zimagelist","or.label")),uploadContent=$("<div>").addClass("ui-lib-uploader-content").append(dragDrop).append(optionEle).append(uploadBtn).appendTo(uploadDiv);base._uploadContent=uploadContent;var ieVersion=this._getInternetExplorerVersion();if((-1===ieVersion||-1!==ieVersion&&ieVersion>9)&&uploadBtn.zbutton(),uploadBtn.on("change",function(){var ele=base._imageLibraryContainer.find("#imagefile"),add_lib=base.options.addToLibrary&&base._addToLib[0].checked?"true":"false",callback={beforeSend:function(){uploadBtn.zbutton("disable"),uploadBtn.closest("label").addClass("ui-state-disabled"),base.showProgressBar()},success:function(resp){var imageInfo="string"==typeof resp?JSON.parse(resp):resp;uploadBtn.val(""),uploadBtn.zbutton("enable"),uploadBtn.closest("label").removeClass("ui-state-disabled"),"local"==base._imageCategory?base.insert(imageInfo,add_lib):base.getImages(1)},updateProgress:function(per){base.updateUploadProgressbar(per)},fail:function(){uploadBtn.val(""),uploadBtn.zbutton("enable"),uploadBtn.closest("label").removeClass("ui-state-disabled")}};base._uploadFiles(ele,add_lib,callback,void 0,"false",!0)}),this.options.addToLibrary){var addToLib=$("<div>").addClass("ui-lib-addToLib-container"),check=$("<input>").attr("type","checkbox").addClass("ui-lib-addToLib-check");check[0].checked=!0,check.appendTo(addToLib),check.zstatebutton({label:$.i18n("zimagelist","addtolibrary.label")}),addToLib.appendTo(uploadContent),base._addToLib=check,addToLib.hide()}base.uploadProgressbar=$("<div>").addClass("ui-lib-upload-progressbar").appendTo(uploadDiv).hide(),base.uploadProgressbar.zprogressbar({type:"determinate"}),uploadDiv.appendTo(this._imageLibraryContainer)},_uploadFiles:function(ele,add_lib,callback,undefined,addToDoc,fromTab){if(ele&&ele.get(0)&&ele.get(0).files&&parseInt(ele.get(0).files.length)<=FCImageLibrary.noOfImagesToBeSelected)this.options.uploadAction(ele,add_lib,callback,undefined,addToDoc),fromTab&&ele.parent().removeAttr("title");else{var errorOptions={autoCloseDelay:5e3};$("#zimagelist-error").remove();var errorDiv=$("<div>").attr({"class":"zimagelist-error",id:"zimagelist-error"});errorDiv.appendTo("#"+this._imageCategory+"ImagesContainer");var msg=FCUtil.getI18NString("zimagelist","maximumfilecountreached.label",[FCImageLibrary.noOfImagesToBeSelected]);FCUtil.showError(msg,$("#zimagelist-error"),"#zimagelist-error",errorOptions,"prependTo")}},showProgressBar:function(){"local"==this._imageCategory&&(this._uploadContent.hide(),this.uploadProgressbar.show())},updateUploadProgressbar:function(per){this.uploadProgressbar.zprogressbar("updateProgress",per)},_showURLUploadContent:function(){var base=this;this._imageLibraryContainer.empty();var uploadDiv=$("<div>").addClass("ui-lib-uploader-div"),urlUploadLabel=$("<div>").addClass("ui-lib-urlupload-label");urlUploadLabel.text($.i18n("zimagelist","pasteanimageurl.label")),urlUploadLabel.appendTo(uploadDiv);var urlUploadInput=$("<input>").addClass("ui-lib-urlupload-input");urlUploadInput.appendTo(uploadDiv),urlUploadInput.on("keyup",function(ev){base._triggerEvent(base._EVENTS.ONUNSELECT),base._checkAndPreviewURLImage(ev,!1)}).on("paste",function(ev){base._triggerEvent(base._EVENTS.ONUNSELECT),base._checkAndPreviewURLImage(ev,!0)});var previewArea=$("<div>").addClass("ui-lib-urlupload-previewContainer");previewArea.appendTo(uploadDiv).hide();var previewImage=($("<span>").appendTo(previewArea),$("<img>").attr("src","").addClass("ui-lib-urlupload-preview"));previewImage.appendTo(previewArea).css({position:"relative"});var previewMsg=$("<div>").addClass("ui-lib-urlupload-preview-msg").text($.i18n("zimagelist","previewmessage.label"));previewMsg.appendTo(uploadDiv);var errorMsg=$("<div>").addClass("ui-lib-urlupload-preview-error-msg").text($.i18n("zimagelist","imagenotfound.label")),ul=$("<ul>").append($("<li>").text($.i18n("zimagelist","checkurladdress.label"))).append($("<li>").text($.i18n("zimagelist","checkimageispublic.label")));ul.appendTo(errorMsg),errorMsg.hide().appendTo(uploadDiv),uploadDiv.appendTo(this._imageLibraryContainer),base._previewArea=previewArea,base._previewImage=previewImage,base._previewMsg=previewMsg,base._errorMsg=errorMsg,base._urlInput=urlUploadInput,urlUploadInput.focus()},getImageURL:function(){if("url"==this._imageCategory){var url=this._urlInput.val();if(url){var imageName="Image",sptURL=url.split(":")[0];return("http"==sptURL||"https"==sptURL)&&(imageName=url.match(/.*\/([^/]+)\.([^?]+)/i)[1]),[{IMAGE_NAME:imageName,IMAGE_URL:url}]}}return[]},_checkAndPreviewURLImage:function(ev,fromPaste){var base=this,url=$(ev.target).val();if(fromPaste&&ev.originalEvent){var pastedText=void 0;ev.originalEvent.clipboardData&&ev.originalEvent.clipboardData.getData?pastedText=ev.originalEvent.clipboardData.getData("Text"):ev.originalEvent.clipboardData&&ev.originalEvent.clipboardData.getData&&(pastedText=ev.originalEvent.clipboardData.getData("text/plain")),url=pastedText}if(url.trim().length){var base=this;this._checkImage(url,function(imageSrc,state,dim){if(base._loader.hide(),"success"==state){base._previewMsg.hide(),base._errorMsg.hide();var imageDim=base.findImageDim(dim.width,dim.height,{width:base._previewArea.width(),height:base._previewArea.height()});base._previewImage.attr("src",imageSrc).css({width:imageDim.width,height:imageDim.height}).show(),base._previewArea.show(),base._urlInfo={IMAGE_HEIGHT:dim.height,IMAGE_NAME:"",IMAGE_URL:imageSrc,IMAGE_WIDTH:dim.width,THUMBNAIL_IMAGE_URL:""},base._triggerEvent(base._EVENTS.ONSELECT)}else base._previewArea.hide(),base._previewMsg.hide(),base._errorMsg.show(),base._triggerEvent(base._EVENTS.ONUNSELECT)})}else base._errorMsg.hide(),base._previewMsg.show(),base._previewArea.hide(),base._triggerEvent(base._EVENTS.ONUNSELECT)},_checkImage:function(url,callback,timeout){timeout=timeout||2e3;var timer,timedOut=!1;clearTimeout(timer);var img=new Image;img.onerror=img.onabort=function(){timedOut||(clearTimeout(timer),callback(url,"error"))},img.onload=function(){timedOut||(clearTimeout(timer),callback(url,"success",{width:this.width,height:this.height}))},img.src=url,this._previewMsg.hide(),this._previewArea.hide(),this._errorMsg.hide(),this._loader.show()},updateImageProgress:function(textEle,percentage,uploadingSpan){0!==percentage&&(text=percentage+" %"),textEle.text(text);var imageDiv=$("#addImageDiv"),top=imageDiv.height()/2-textEle.height()/2,left=imageDiv.width()/2-textEle.width()/2;textEle.css({top:top+"px",left:left+"px"});var spanWidth=percentage/100*$("#addImageDiv").width();uploadingSpan.width(spanWidth)},findImageDim:function(iw,ih,obj){var newIw,newIh,extra,sw=obj.width,sh=obj.height;iw>sw&&ih>sh?iw>ih?(newIw=sw,newIh=newIw/iw*ih):(newIh=sh,newIw=newIh/ih*iw):iw>sw?(newIw=sw,newIh=newIw/iw*ih):ih>sh?(newIh=sh,newIw=newIh/ih*iw):(newIh=ih,newIw=iw),newIh>sh&&(extra=newIh/(newIh-sh),newIw-=newIw/extra,newIh-=newIh/extra),newIw>sw&&(extra=newIw/(newIw-sw),newIw-=newIw/extra,newIh-=newIh/extra);var picLeft=sw/2-newIw/2,picTop=sh/2-newIh/2;return this.placeHolderData&&this.placeHolderData.left&&(picLeft+=this.placeHolderData.left,picTop+=this.placeHolderData.top),{width:newIw,height:newIh,left:picLeft,top:picTop}},_createControls:function(){var base=this,div=$("<div>").attr("id","ui-zil-header-right"),sortDiv=($("<button>").data({type:"icon_only",text:!1}).attr({id:"deleteEle",title:$.i18n("zimagelist","delete.label"),"class":"ui-delete-button"}).css({visibility:"hidden"}).appendTo(div).button({icons:{primary:"ui-components-toolbar-icon ui-icon-ztrash"}}).on("click",function(){base.options.deleteAction()}),$("<div>").attr("id","ui-zil-header-right-inner"));sortDiv.appendTo(div);var sortCombo=$("<select></select>").attr("id","sorttype");sortCombo.appendTo(sortDiv);var sortTextSpan=$("<span>").text(this._getString("sortBy.label")).css({"float":"left",padding:"4px 4px",color:"#898989"});sortTextSpan.insertBefore(sortCombo),this._createSortTypeMenu(sortCombo),this.uploadLabel=$.i18n("zimagelist","upload.label");var uploadBtn=$("<input/>").attr({type:"file",name:"imagefile",id:"imagefile",label:this.uploadLabel,multiple:"true",accept:"image/jpg,image/png,image/jpeg,image/gif,image/bmp"}).appendTo(div).hide(),displayUploadingStatus=$("<span>").css({position:"absolute",top:"80px",left:"60px"}).hide(),displayUploadingSpan=$("<span>").css({height:"3px",background:"#4ea501",width:"0px",top:"108px",position:"absolute",left:"0px"});return uploadBtn.on("change",function(){var filePath=uploadBtn.val();if(filePath){$("#addImagesBtn").hide();var addImageDiv=($.i18n("zimagelist","uploading.label"),$("#addImageDiv"));displayUploadingStatus.appendTo(addImageDiv),displayUploadingSpan.appendTo(addImageDiv),displayUploadingStatus.show(),displayUploadingSpan.show();var callback={success:function(imageInfo){if(base.updateImageProgress(displayUploadingStatus,100,displayUploadingSpan),$.isArray(imageInfo)&&imageInfo.length)for(var i=0;i<imageInfo.length;i++)base.addImage(imageInfo[i]);else base.addImage(imageInfo);$("#addImagesBtn").show(),displayUploadingStatus.hide(),displayUploadingSpan.hide()},fail:function(){$("#addImagesBtn").show(),displayUploadingStatus.hide(),displayUploadingSpan.hide()},updateProgress:function(per){base.updateImageProgress(displayUploadingStatus,per,displayUploadingSpan)}};base._uploadFiles(uploadBtn,"true",callback,void 0,"false",!1)}}),div},_createSortTypeMenu:function(sortCombo){var base=this,order=["nameasc","namedesc","oldest","newest"];$.each(order,function(val,text){var label=base._getString(text);sortCombo.append($("<option></option>").val(order[val]).text(label))}),sortCombo.css({width:"120px",height:"40px","float":"left"}),sortCombo.zcombo({retainFocus:!1,dropDownMenuHeight:300,type:"text_only"}),sortCombo.zcombo("setSelectedIndex","3");var dropDownMenu=sortCombo.zcombo("getDropDown");dropDownMenu.attr("position","end_after_end");var sortOp={nameasc:{orderby:"docorder",order:"ascending"},namedesc:{orderby:"docorder",order:"descending"},oldest:{orderby:"dateorder",order:"ascending"},newest:{orderby:"dateorder",order:"descending"}};sortCombo.bind("combochange",function(ev,ui){base.options.sortOrder=sortOp[ui.value],base.sortImages()})},sortImages:function(){this._imageLibraryContainer.empty();var searchInputEle=$("#imagesearchinput","#Library");searchInputEle.val(""),this._keyword="",this.getImages(1)},_createDummyImageContainer:function(){var dummyCont=$("<div>").addClass("ui-lib-image-loader-container"),loaderIcon=$("<span>").addClass("ui-lib-loader ui-lib-image-loader");loaderIcon.appendTo(dummyCont);var containerParent=$("#"+this._imageCategory+"Images").find("ul");return dummyCont.insertBefore(containerParent.find("li:first")),dummyCont},addImage:function(info){$("#"+this._imageCategory+"Images").length?($("#"+this._imageCategory+"Images").zimagelist("addImage",info),this._header.show()):(this._buildContainer({IMAGES:[info]},1),this.getImages(1))},removeSelectedImages:function(deletedData){var imagelist=$("#"+this._imageCategory+"Images"),imagesBeforeLen=imagelist.find("ul").children().length;imagelist.zimagelist("removeSelectedImages",deletedData);var deletedImagesCount=deletedData?deletedData.imageIds.length:0,imagesAfterLen=imagesBeforeLen-deletedImagesCount,controls=this._selectedOptions.libraryOptions.controls;controls&&this._controlDiv.find("#deleteEle").css({visibility:"hidden"}),this.getImages(imagesAfterLen,deletedImagesCount);var images=imagelist.zimagelist("getImagesInfo");$.isEmptyObject(images)&&(this._header.hide(),this._showUploadContent())},_constructImageInfo:function(list,startIndex){for(var images=[],i=startIndex;startIndex+10>i;i++){var imageinfo=list.IMAGES[i-1];imageinfo&&images.push(imageinfo)}return images},_buildContainer:function(list,index,fromSearch){var tcount=parseInt(list.TOTALCOUNT);tcount=!tcount&&this.options.imagelist?list.IMAGES.length:tcount,1===index&&this._selectedOptions.libraryOptions.controls&&this._controlDiv.find("#deleteEle").css({visibility:"hidden"});var imagelist=$("#"+this._imageCategory+"Images");imagelist.length?this._keyword&&fromSearch?(this._imageLibraryContainer.empty(),this._initImageList(imagelist,list)):imagelist.zimagelist("updateImagelist",list):(this._imageLibraryContainer.empty(),imagelist=$("<div>").attr("id",this._imageCategory+"Images").appendTo(this._imageLibraryContainer).addClass("ui-lib-imagecontainer"),this._initImageList(imagelist,list)),tcount||"Library"!=this._imageCategory||(this._header.hide(),this._showUploadContent())},_initImageList:function(ele,list){var base=this,controls=base._selectedOptions.libraryOptions.controls,tcount=list.TOTALCOUNT>200&&-1!=this._imageCategory.indexOf("Public")?200:list.TOTALCOUNT;ele.zimagelist({imagelist:list,imageCategory:this._imageCategory,multiselect:this.options.multiselect,count:this.options.count,thumbnailMaxHeight:this.options.thumbMaxHeight,deleteAction:"Library"==this._imageCategory?this.options.deleteAction:void 0}).on("imagelistimageinsert",function(){base.insert()}).on("imagelistselect",function(){ele.zimagelist("getSelectedImages").length>base.options.selectedCount?(controls&&base._controlDiv.find("#deleteEle").css({visibility:"visible"}),ele.zimagelist("removeAllCloseButtons")):controls&&base._controlDiv.find("#deleteEle").css({visibility:"hidden"});var images=ele.zimagelist("getSelectedImages");base._triggerEvent(base._EVENTS.ONSELECT,images)}).on("imagelistunselectall",function(){controls&&base._controlDiv.find("#deleteEle").css({visibility:"hidden"});var images=ele.zimagelist("getSelectedImages");base._triggerEvent(base._EVENTS.ONUNSELECT,images)}),base._selectedOptions.libraryOptions.imagelist||ele.on("scroll",function(){if(ele[0].scrollHeight-ele.scrollTop()<=ele.height()){var index=ele.find("ul").children().length+1;"Library"===base._imageCategory&&(index-=1),tcount>=index&&base.getImages(index)}})},_initPagination:function(tcount,page){tcount=tcount>200?200:tcount;var base=this,paginationHolder=this.element.find(".ui-lib-pagination");!paginationHolder.length&&tcount?(paginationHolder=$("<div>").addClass("ui-lib-pagination").insertAfter(base._imageLibrary),paginationHolder.append($("<span>").addClass("ui-lib-pagestring").text(this._getString("pageno.label"))),paginationDiv=$("<div>").attr("id",this._imageCategory+"pagination").appendTo(paginationHolder),paginationDiv.zpagination({totalItems:tcount,itemsPerPage:this.options.count})):paginationHolder.find(".ui-pagination").zpagination("updateTotalItems",tcount,page),base._pagination=paginationHolder},_triggerEvent:function(event,info){var ui={info:info};return this._trigger(event,event,ui)},isAddToLib:function(){return this.options.addToLibrary&&this._addToLib[0].checked?"true":"false"},insert:function(list,add_lib){list&&list.IMAGES&&(list=list.IMAGES);var images=list?list:$("#"+this._imageCategory+"Images").zimagelist("getSelectedImages");"url"==this._imageCategory&&(images=[],images.push(this._urlInfo));var imageObj={info:images,insertFrom:this._imageCategory,isInsertFromWeb:this._isInsertFromWeb,addedtolib:add_lib};this.options.onInsert&&this.options.onInsert(imageObj),$("#imagelibrary").trigger("imageinsert",imageObj)},deleteImage:function(){var images=$("#"+this._imageCategory+"Images").zimagelist("getSelectedImages"),deleted=!1;this.options.deleteAction&&(deleted=this.options.deleteAction(images)),deleted&&($("#"+this._imageCategory+"Images").zimagelist("removeSelectedImages"),this._triggerEvent(this._EVENTS.ONDELETE,images))},getImagesList:function(){var imagesList=$("#"+this._imageCategory+"Images").zimagelist("getImagesList");return imagesList.TOTALCOUNT=this._TOTALCOUNT,imagesList},getCurrentImageList:function(){return this._curentImagesList},getSupportedFormats:function(){return this._supportedFormats},setSearchKey:function(keyword){this.options.publicSearchKeyword=keyword},doAction:function(method){return $("#"+this._imageCategory+"Images").zimagelist(method)},_getString:function(key,stringArray,module){return FCUtil.getI18NString(module?module:"zimagelist",key,stringArray?stringArray:void 0,this.options.keys)}};$.widget("ui.zimagehandler",zimagehandler)}(jQuery),function($){$.ZImageLibrary={request:void 0,contextPath:"",setContextPath:function(contextPath){this.contextPath=contextPath?contextPath:""},Library:{URL:"getlibraryimages.do",authURL:"true",search:!0,load:function(base,startIndex,limit,keyword,sortOrder,callback){var time=(new Date).getTime(),params={pn:"Library",sIndex:startIndex,maxresult:limit,DATE:time};keyword&&(params.search=keyword),params[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken(),sortOrder&&sortOrder.orderby&&(params.orderby=sortOrder.orderby,"ascending"===sortOrder.order&&(params.asc=!0)),$.ZImageLibrary.getImages(base,this.URL,params,callback)}},Picasa:{URL:"zphotos.do?mode=picasa&category=getOwnPhotos",authURL:"picasa?",search:!0,load:function(base,startIndex,limit,keyword,sortOrder,callback){var params={pn:"Picasa",startindex:Math.ceil(startIndex/limit),maxresult:limit};keyword&&(params.search=keyword),$.ZImageLibrary.getImages(base,this.URL,params,callback)}},Flickr:{URL:"zphotos.do?mode=flickr&category=getOwnPhotos",authURL:"flickr?",search:!0,load:function(base,startIndex,limit,keyword,sortOrder,callback){var params={pn:"Flickr",startindex:Math.ceil(startIndex/limit),maxresult:limit};keyword&&(params.search=keyword),$.ZImageLibrary.getImages(base,this.URL,params,callback)}},Public:{Picasa:{URL:"zpublicphotos.do?mode=picasa&category=getNonUserPublicPhotos",load:function(base,startIndex,limit,keyword,sortOrder,callback){var params={pn:"PublicPicasa",startindex:startIndex,maxresult:limit};params.search=keyword?keyword:"Flowers",$.ZImageLibrary.getImages(base,this.URL,params,callback)}},Flickr:{allowCC:!1,licenseTypes:[4,5,6],licenseURL:"zphotos.do?mode=flickr&category=getLicensePhotos&license={0}",URL:"zpublicphotos.do?mode=flickr&category=getNonUserPublicPhotos",load:function(base,startIndex,limit,keyword,sortOrder,callback){var params={pn:"PublicFlickr",startindex:startIndex,maxresult:limit};params.search=keyword?keyword:"Flowers",$.ZImageLibrary.getImages(base,this.URL,params,callback)}},Google:{URL:"zpublicphotos.do?mode=google&category=getPhotos",load:function(base,startIndex,limit,keyword,sortOrder,callback){var params={pn:"PublicGoogle",startindex:startIndex};params.search=keyword?keyword:"Flowers",$.ZImageLibrary.getImages(base,this.URL,params,callback)}}},getImages:function(baseObj,url,params,callback){$.ZImageLibrary.request&&$.ZImageLibrary.request.abort(),$.ZImageLibrary.request=$.ajax({type:"GET",url:FComponents.option("contextPath")+url,data:params,success:function(resp){(resp||""!=resp)&&(resp="string"==typeof resp?JSON.parse(resp):resp,$.FCImageLibrary.docsDownloadURL=resp.docsDownloadURL,FCImageLibrary.docsDownloadURL=resp.docsDownloadURL,callback(baseObj,resp))}})},updateContextPath:function(resp){$.ZImageLibrary.contextPath&&resp.IMAGES&&$.each(resp.IMAGES,function(i,val){val.THUMBNAIL_IMAGE_URL&&(val.THUMBNAIL_IMAGE_URL=$.ZImageLibrary.contextPath+val.THUMBNAIL_IMAGE_URL)})}}}(jQuery),function($){var zimagelist={_imagesInfo:{},_imageLibrary:void 0,_imageLibraryContainer:void 0,_startIndex:0,widgetEventPrefix:"imagelist",_EVENTS:{ONINSERT:"imageinsert",ONSELECT:"select",ONUNSELECT:"unselect",ONSELECTALL:"selectall",ONUNSELECTALL:"unselectall"},_create:function(){this.options=$.extend({},$.ui.zimagelist.defaults,this.options);var base=this,isMac=-1!=navigator.userAgent.toLowerCase().indexOf("mac");$(document).on("keydown",function(ev){var keyPattern=isMac?ev.metaKey||ev.shiftKey:ev.ctrlKey||ev.shiftKey;keyPattern&&(base._ctrlKey=!0)}).on("keyup",function(){base._ctrlKey=!1}),this.element.on("click",function(ev){$(ev.target).hasClass("ui-lib-img")||$(ev.target).closest(".zimagelist__options").length||base.deSelectAll()}),this._loadImages()},_loadImages:function(){var base=this,images=this.options.imagelist.IMAGES,imgCategory=this.options.imageCategory;if(base._imagesInfo={},base._setImageIndex=0,images&&images.length>0){var imagesContainer=$("<ul>");if(this._imagesULContainer=imagesContainer,"Library"==imgCategory){var addImage=$("<li>").attr("id","addImageContainer").append($("<div>").attr("id","addImageDiv")).append($("<p>").text(this._getString("addpicture.label")));addImage.appendTo(imagesContainer)}if($(images).each(function(i,info){if(!(i>=base.options.count)||base.options.imageList){var li=base._createContainerAndLoadImage(info,i);imagesContainer.append(li),base._imagesInfo[i]=info,base._setImageIndex++}}),imagesContainer.appendTo(this.element),"Library"==imgCategory){var imageDiv=$("#addImageDiv"),spanEle=$("<span>").addClass("ui-zfc-icon-plus-thick ui-zfc-icon").attr({id:"addImagesBtn",title:this._getString("addpicture.label")});spanEle.on("click",function(){$("#imagelibheader #imagefile").trigger("click")}),imageDiv.append(spanEle)}}else this._createNoImagesText();base._constructImagesList()},_createNoImagesText:function(){var span=$("<span>").addClass("ui-lib-noimage").text(this._getString("noimagesavailable.label"));span.appendTo(this.element)},_createContainerAndLoadImage:function(imageInfo,i,addImage){imageInfo.IMAGE_NAME=this.unEscapeSingleQuote(imageInfo.IMAGE_NAME?imageInfo.IMAGE_NAME:imageInfo.imgName);{var img=$("<img>").addClass("ui-lib-img").attr("title",imageInfo.IMAGE_NAME),src=imageInfo.src?imageInfo.src:imageInfo.IMAGE_URL,thumb=imageInfo.THUMBNAIL_IMAGE_URL?imageInfo.THUMBNAIL_IMAGE_URL:imageInfo.MEDIUM_IMAGE_URL;imageInfo.IMAGE_NAME?imageInfo.IMAGE_NAME:imageInfo.imgName}img.attr("src",thumb?thumb:src),imageInfo.clipartClass&&(img=$("<span>").css({display:"inline-block"}),img.addClass(imageInfo.clipartClass));var li=$("<li>").attr({id:this.options.imageCategory+"image"+i,"data-rid":imageInfo.RESOURCE_ID,"class":"ui-corner-all"}).data("infoIndex",i).append($('<div class="zimagelist__image">').css({height:this.options.thumbnailMaxHeight}).append($("<span>").addClass("ui-lib-image-align-span")).append(img)).append($("<p>")),inputEle=$("<input>").attr("type","checkbox").attr("id",i);addImage&&(this.deSelectAll(),inputEle.attr("checked",!0),img.addClass("ui-state-active"),this._triggerEvent(this._EVENTS.ONSELECT,imageInfo));var imageText=imageInfo.IMAGE_NAME?imageInfo.IMAGE_NAME.split(".")[0]:"";li.append($("<span>").addClass("ui-lib-image-label").append(inputEle).append($("<label>").text(imageText)));var para=li.find("p");return para.text(imageText.length<13?imageText:imageText.slice(0,13).concat("....")),this._bindEvents(li),li},createAndPositionCloseElement:function(parentEle){var optionsArea=$('<div class="zimagelist__options"></div>');if($.FCImageLibrary.docsDownloadURL&&void 0!==$.FCImageLibrary.docsDownloadURL&&void 0!==parentEle.data("rid")){var docsDownloadURL=$.FCImageLibrary.docsDownloadURL.replace("{0}",parentEle.data("rid"));$('<a target="_blank" href="'+docsDownloadURL+'"><span class="ui-icon ui-fcomponents-icon ui-lib-image-download"></span></a>').appendTo(optionsArea)}var closebtn=$("<span>").addClass("ui-icon ui-fcomponents-icon ui-lib-image-close").appendTo(optionsArea);optionsArea.appendTo(parentEle),this.positionClosebutton(parentEle);var base=this;closebtn.on("click",function(){parentEle.data("position",!0),base.deSelectAll(),parentEle.find("img").trigger("click"),base.options.deleteAction()})},positionClosebutton:function(elems){elems=elems&&elems.length?elems:this.element.find("ul li"),elems.each(function(i,ele){var closebtn=$(ele).find(".zimagelist__options"),relativeEle=$(ele).find("img"),parentEle=relativeEle.parent(),tp=relativeEle.offset().top-parentEle.offset().top-12,right=parentEle.offset().left+parentEle.outerWidth(!0)-(relativeEle.offset().left+relativeEle.outerWidth(!0))+5;closebtn.css({top:tp+"px",right:right+"px"})})},_bindEvents:function(li){var base=this,img=li.find("img");img.hover(function(){return base._isDisabled(li)||li.hasClass("ui-state-active")?!1:void img.addClass("ui-state-hover")},function(){return base._isDisabled(li)?!1:(img.removeClass("ui-state-hover"),void li.find("div").removeClass("ui-state-hover"))}).on("click dblclick",function(ev){if(base._isDisabled(li))return!1;var ctrl="click"==ev.type?!base._ctrlKey:base._ctrlKey;if((ctrl||!base.options.multiselect)&&(li.parent().find("li img").removeClass("ui-state-active"),li.parent().find("div").removeClass("ui-state-active"),li.parent().find("input").prop("checked",!1),li.parent().find(".zimagelist__options").fadeOut("slow").remove()),!$(ev.target).parent().is("label")&&!$(ev.target).is("input")){var action=!li.find("input").is(":checked");action="click"!=ev.type?!0:action,li.find("input").prop("checked",action)}if(img.hasClass("ui-state-active")&&"click"==ev.type)img.removeClass("ui-state-active"),li.find(".zimagelist__options").fadeOut("fast");else if(li.find("input").prop("checked")){img.addClass("ui-state-active");var index=li.data("infoIndex");li.find(".zimagelist__options").length?li.find(".zimagelist__options").fadeIn("fast"):"click"==ev.type&&base.options.deleteAction&&base.createAndPositionCloseElement(li),base._triggerEvent(base._EVENTS["click"!=ev.type?"ONINSERT":"ONSELECT"],base._imagesInfo[index])}if(void 0!==FCImageLibrary.noOfImagesToBeSelected){var imagesSelected=base._imagesULContainer.find("input:checked");if(imagesSelected.length>FCImageLibrary.noOfImagesToBeSelected){var firstImage=$(imagesSelected[0]).parent().parent();firstImage.find("img").removeClass("ui-state-active"),firstImage.find("div").removeClass("ui-state-active"),firstImage.find("input").removeAttr("checked"),firstImage.find(".zimagelist__options").fadeOut("slow").remove()}}var isCCImages=$.ZImageLibrary.Public.Flickr.allowCC;if(isCCImages&&"PublicFlickr"==base.options.imageCategory){var container=$("#imagelibrary").parent().dialog("widget");$.isEmptyObject(base.getSelectedImages())?($("#licenseMsg",container).show(),$("#flickrLicenseMsg",container).hide()):($("#licenseMsg",container).hide(),$("#flickrLicenseMsg",container).show())}})},_selectImages:function(elems){var base=this;$(elems).each(function(i,ele){$(ele).attr("checked",!0),base._ctrl=!0,$(ele).closest("li").find("img").trigger("click")})},getImageDim:function(url){var img=$("<img src="+url+' style="display:none;">');$("body").append(img);var dim={width:img.width(),height:img.height()};return img.remove(),dim},getImagesInfo:function(){return this._imagesInfo},_constructImagesList:function(){var list={};return list.IMAGES=[],$.each(this._imagesInfo,function(i,info){list.IMAGES.push(info)}),this._imagesList=list,list},updateImagesList:function(info,addFirst){var length=this._imagesList.IMAGES.length;this._imagesList&&length&&(addFirst?this._imagesList.IMAGES.splice(0,0,info):this._imagesList.IMAGES.splice(length,0,info))},deleteImagesList:function(deletedData){var base=this;$.each(deletedData.imageIds,function(i,imageId){base.deleteList(imageId)})},deleteList:function(imageId){var base=this,images=base._imagesList?base._imagesList.IMAGES:void 0;images&&$.each(images,function(i,info){return imageId===info.RESOURCE_ID?(base._imagesList.IMAGES.splice(i,1),!1):void 0})},getImagesList:function(){return this._imagesList},_getInfoLength:function(info){var count=0;for(i in info)count++;return $.isEmptyObject(info)&&(count=0),count},updateImagelist:function(list){var base=this,images=list.IMAGES,imagesContainer=this.element.find("ul");$(images).each(function(i,info){if(!(i>=base.options.count)||base.options.imageList){var li=base._createContainerAndLoadImage(info,base._setImageIndex);imagesContainer.append(li),base._imagesInfo[base._setImageIndex]=info,base.updateImagesList(info),base._setImageIndex++}})},addImage:function(info){var base=this,id=base._setImageIndex,firstEle=this.element.find("ul").children("li:first");this._imagesInfo[""+id]=info,this.updateImagesList(info,!0),info instanceof Array&&(info=info[0]);var img=this._createContainerAndLoadImage(info,id,!0);firstEle.length?img.insertAfter(firstEle):this.element.find("ul").append(img),base._setImageIndex++},_triggerEvent:function(event,info){var ui={info:info};return this._trigger(event,event,ui)},getSelectedImages:function(){var base=this,selectedImages=this.element.find("input:checked"),info=[];return $(selectedImages).each(function(i,ele){var index=parseInt($(ele).attr("id")),imageInfo=base._imagesInfo[index];imageInfo&&info.push(imageInfo)}),info},selectAll:function(){var checkboxes=this.element.find("input[type=checkbox]");$(checkboxes).each(function(i,ele){$(ele).attr("checked",!0),$(ele).closest("li img").addClass("ui-state-active")}),this._triggerEvent(this._EVENTS.ONSELECTALL,this._imagesInfo)},deSelectAll:function(){var checkboxes=this.element.find("input[type=checkbox]");$(checkboxes).each(function(i,ele){$(ele).attr("checked",!1),$(ele).closest("li").find("img").removeClass("ui-state-active"),$(ele).closest("li").find(".zimagelist__options").hide()}),this._triggerEvent(this._EVENTS.ONUNSELECTALL,this._imagesInfo)},removeAllCloseButtons:function(){this.element.find(".zimagelist__options").remove()},removeSelectedImages:function(deletedData){var selectedImages=this.element.find("input:checked"),base=this,index=void 0,prevEle=$(selectedImages[0]).closest("li").prev().index();$(selectedImages).each(function(i,ele){var li=$(ele).closest("li");delete base._imagesInfo[li.data("infoIndex")],index=li.index(),li.fadeOut(200,function(){li.remove()}),$("body").find(".ui-ztooltip").remove()}),base.deleteImagesList(deletedData),setTimeout(function(){var imgSelected=base._selectNextImage(prevEle+1);2===imgSelected&&(imgSelected=base._selectNextImage(prevEle-1),2===imgSelected&&(imgSelected=base._selectNextImage(1)))},650)},_selectNextImage:function(index){var elems=this.element.find("ul > li");if(elems.length>0){var nextEle=$($(elems[index])&&$(elems[index]).length?elems[index]:elems[index-1]);return nextEle?(nextEle.find("img").trigger("click"),1):2}return 0},removeImage:function(id){var image="string"==typeof id?this.element.find("#"+id):$(id);image.length&&image.closest("li").remove()},removeImages:function(ids){$(ids).each(function(i,id){this.removeImage(id)})},refresh:function(){this.getImages(this._startIndex)},disableSelected:function(){var selectedImages=this.element.find("input:checked");$(selectedImages).each(function(i,ele){$(ele).closest("li").attr("disabled",!0).addClass("ui-state-disabled")})},enableSelected:function(){var selectedImages=this.element.find("input:checked");$(selectedImages).each(function(i,ele){$(ele).closest("li").removeAttr("disabled").removeClass("ui-state-disabled")})},_isDisabled:function(li){var disabled=li.attr("disabled");return disabled?!0:!1},_getString:function(key,stringArray,module){return FCUtil.getI18NString(module?module:"zimagelist",key,stringArray?stringArray:void 0,this.options.keys)},unEscapeSingleQuote:function(str){return str&&(str=str.replace(/&#39;/g,"'")),str}};$.widget("ui.zimagelist",zimagelist),$.ui.zimagelist.defaults={noOfImagesToBeSelected:void 0,count:10,multiselect:!1,imagelist:void 0,keys:{"noimagesavailable.label":"No Images Available"},deleteAction:void 0,thumbnailMaxHeight:160}}(jQuery);var ZFileExplorer=function($){var breadcrumb=void 0,selectCategory="",intialFolContainWdth=1,defaultConfig={keys:{"readonly.label":"Read Only","savein.label":"Location:","nofoldersfound.label":"No Folders Found","newfolderbutton.label":"New Folder","newfoldername.label":"Untitled Folder","folderalert.label":"A folder with this name already exists. Please choose a different name.","permissionerrorfolder.label":"Cannot create a folder. Your permission has been changed.","unknownerrorfolder.label":"Unable to create folder due to an unknown error.","myfolders.label":"My Folders","sharedfolders.label":"Shared with Me"},fileId:void 0,canCreateFolder:!0},_dialogAlreadyOpened=!1,documentData={folderId:void 0,myFolderId:void 0,parentId:void 0,myFolderTree:void 0,sharedWithMe:void 0,currentPath:void 0,recentFolders:void 0,isOwner:void 0},zfileExplorer={widgetEventPrefix:"zfileexplorer",_EVENTS:{ONSELECT:"select",ONAFTERINIT:"afterinit"},_init:function(options){intialFolContainWdth=1,this.options=$.extend({},defaultConfig,options),this._createMainContainer()},_createMainContainer:function(){this._category={myFolder:{id:"ui-folder-myfolder",label:this._getString("myfolders.label"),iconClass:"zsaveas zsaveas-folder"},sharedFolder:{id:"ui-folder-sharedfolder",label:this._getString("sharedfolders.label"),iconClass:"zsaveas zsaveas-shared-withme"}};var baseObj=this,appendTo=this.options.renderTo?"#"+this.options.renderTo:"body";this._fileexplorer=$("<div>").attr({id:"ui-zfileexplorer","class":"ui-zfileexplorer"}).appendTo(appendTo),this._createSaveInContainer(),this._createFolderContainer();var callbacks={progress:function(){},success:function(responseObj){"success"===responseObj.request&&(documentData=$.extend({},documentData,responseObj),baseObj.options.docsURL=documentData.docsURL,baseObj._initFolderListing(documentData))},fail:function(){}};this._getDocumentDetails(callbacks),this.options.onInit?this.options.onInit():this._triggerEvent(this._EVENTS.ONINIT);var keydownEvent=!1;this._fileexplorer.click(function(orgEvent){$(orgEvent.target).closest("#ui-zfileexplorer-location").length||($("#ui-zfileexplorer-location").off("keydown"),keydownEvent=!1,baseObj._recentlyClicked.removeClass("ui-zfileexplorer-selected"))}),$("#ui-zfileexplorer-location").click(function(){$("#ui-zfileexplorer-location").attr("tabindex",0),keydownEvent||(keydownEvent=!0,baseObj._bindKeyboradEvents(),$("#ui-zfileexplorer-location").focus())})},_initFolderListing:function(documentData){this._folderSearch(),this._tooltipEllipsis(),this._currentSelectedField=$("#ui-folder-myfolder"),documentData.isOwner?(this._currentSelectedField.trigger("click"),this._containerFol=$("#ui-zfileexplorer-myFolder")):documentData.inWorkspace?($("#ui-folder-workspaces").trigger("click"),this._containerFol=$("#ui-zfileexplorer-workspaces")):($("#ui-folder-sharedfolder").trigger("click"),this._containerFol=$("#ui-zfileexplorer-sharedFolder")),this._currentFilePath(),this.options.afterInit?this.options.afterInit(documentData):this._triggerEvent(this._EVENTS.ONAFTERINIT)},_bindKeyboradEvents:function(){var baseObj=this;$("#ui-zfileexplorer-location").off("keydown").keydown(function(e){var tempID,tempSel,code=e.charCode||e.keyCode,scrollVal1=$("#ui-folder-myfolder").offset().top,scrollVal2=$("#ui-zfileexplorer-location").outerHeight();switch(baseObj._currentSelectedField=baseObj._recentlyClicked,code){case $.ui.keyCode.LEFT:if(tempID=baseObj._currentSelectedField.parent().parent().parent().attr("id"),tempID&&"ui-zfileexplorer-searchLists-ul"!=tempID&&"ui-zfileexplorer-location"!=tempID){baseObj._currentSelectedField=$("ui-zfileexplorer-myFolder-ul"===tempID?"#ui-folder-myfolder":"ui-zfileexplorer-sharedFolder-ul"===tempID?"#ui-folder-sharedfolder":"ui-zfileexplorer-workspaces-ul"===tempID?"#ui-folder-workspaces":"#ui-zfolder-"+tempID.substring(tempID.indexOf("-")+1)+"-li.ui-zfileexplorer-select"),tempSel=baseObj._currentSelectedField;var scrollLimit=scrollVal1+scrollVal2,temp=tempSel.parent().parent();if(tempSel.offset().top+tempSel.outerHeight()>=scrollLimit){var sval1=tempSel.offset().top-tempSel.parent().children().first().offset().top,sval2=scrollLimit-tempSel.parent().children().first().offset().top;$("#ui-zfileexplorer-breadcrumb").children().length&&(sval1+=$("#ui-zfileexplorer-breadcrumb").outerHeight()),temp.animate({scrollTop:temp.scrollTop()+sval1-sval2+24},100)}else if(tempSel.offset().top<=scrollVal1){var sval1=tempSel.offset().top;temp.animate({scrollTop:temp.scrollTop()-scrollVal1+sval1},100)}baseObj._currentSelectedField.trigger("click")}break;case $.ui.keyCode.UP:if(baseObj._currentSelectedField.prev().is("li")){if(tempSel=baseObj._currentSelectedField.prev(),tempSel.hasClass("ui-zfileexplorer-file"))for(;tempSel.hasClass("ui-zfileexplorer-file")||tempSel.hasClass("ui-readonlyfolder");)tempSel=tempSel.prev();var scrollLimit=scrollVal1+scrollVal2;if(tempSel.is("li"))if(tempSel.offset().top<=scrollVal1){var temp=tempSel.parent().parent(),sval1=tempSel.offset().top;temp.animate({scrollTop:temp.scrollTop()-scrollVal1+sval1},100)}else if(tempSel.offset().top+tempSel.outerHeight()>=scrollLimit){var temp=tempSel.parent().parent(),sval1=tempSel.offset().top-baseObj._currentSelectedField.offset().top,sval2=scrollLimit-baseObj._currentSelectedField.offset().top;temp.animate({scrollTop:temp.scrollTop()+sval1-sval2+24},100)}tempSel.trigger("click")}e.preventDefault();break;case $.ui.keyCode.RIGHT:if("ui-folder-myfolder"===baseObj._currentSelectedField.attr("id")?baseObj._currentSelectedField=$("#ui-zfileexplorer-myFolder-ul").children().children().children().first():"ui-folder-sharedfolder"===baseObj._currentSelectedField.attr("id")?baseObj._currentSelectedField=$("#ui-zfileexplorer-sharedFolder-ul").children().children().children().first():"ui-folder-workspaces"===baseObj._currentSelectedField.attr("id")?baseObj._currentSelectedField=$("#ui-zfileexplorer-workspaces-ul").children().children().children().first():(tempID=baseObj._currentSelectedField.attr("id"),tempID=$("#ui-"+tempID.substring(11,tempID.length-3)),tempID.children().has("li").length&&(baseObj._currentSelectedField=tempID.children().children().children().first())),tempSel=baseObj._currentSelectedField,tempSel.hasClass("ui-zfileexplorer-file"))for(;tempSel.hasClass("ui-zfileexplorer-file")||tempSel.hasClass("ui-readonlyfolder");)tempSel=tempSel.next();var scrollLimit=scrollVal1+scrollVal2,temp=tempSel.parent().parent();if(tempSel.is("li")&&tempSel.offset().top+tempSel.outerHeight()>=scrollLimit){var sval1=tempSel.offset().top-tempSel.parent().children().first().offset().top,sval2=scrollLimit-tempSel.parent().children().first().offset().top;temp.animate({scrollTop:temp.scrollTop()+sval1-sval2+24},100)}else if(tempSel.is("li")&&tempSel.offset().top<=scrollVal1){var sval1=tempSel.offset().top;temp.animate({scrollTop:temp.scrollTop()-scrollVal1+sval1},100)}tempSel!==baseObj._recentlyClicked&&tempSel.trigger("click");break;case $.ui.keyCode.DOWN:if(baseObj._currentSelectedField.next().is("li")){if(tempSel=baseObj._currentSelectedField.next(),tempSel.hasClass("ui-zfileexplorer-file"))for(;tempSel.hasClass("ui-zfileexplorer-file")||tempSel.hasClass("ui-readonlyfolder");)tempSel=tempSel.next();var scrollLimit=scrollVal1+scrollVal2;if(tempSel.is("li"))if(tempSel.offset().top+tempSel.outerHeight()>=scrollLimit){var temp=tempSel.parent().parent(),sval1=tempSel.offset().top-baseObj._currentSelectedField.offset().top,sval2=scrollLimit-baseObj._currentSelectedField.offset().top;$("#ui-zfileexplorer-breadcrumb").children().length&&(sval1+=$("#ui-zfileexplorer-breadcrumb").outerHeight()),temp.animate({scrollTop:temp.scrollTop()+sval1-sval2+24},100)}else if(tempSel.offset().top<=scrollVal1){var temp=tempSel.parent().parent(),sval1=tempSel.offset().top;temp.animate({scrollTop:temp.scrollTop()-scrollVal1+sval1},100)}tempSel.trigger("click")}e.preventDefault();break;case $.ui.keyCode.TAB:baseObj._recentlyClicked.removeClass("ui-zfileexplorer-selected")}})},_getDocumentDetails:function(callbacks,folderId){var reqData={rid:this.options.fileId,folderId:folderId,action:"rescInfo"};FCUtil.ajaxUtil("getdocstree.do","GET",reqData,callbacks)},_getWorkspaceFolders:function(workspaceId,folderId,liElement,liObj){var reqData={rid:this.options.fileId,workspaceId:workspaceId,action:"wsfolders"};null!==folderId&&void 0!==folderId&&""!==folderId&&(reqData.folderId=folderId,reqData.action="wssubfolders",workspaceId=folderId);var baseObj=this,callbacks={progress:function(){},success:function(responseObj){baseObj._createFolderTree(responseObj.myWorkspace,workspaceId,!1,"ws-folders"),baseObj._displayFolderList(liElement,liObj)},fail:function(){}};FCUtil.ajaxUtil("getdocstree.do","GET",reqData,callbacks)},_getSharedFolders:function(folderId,userId,resourcetype,liElement,liObj){var reqData={rid:this.options.fileId,folderId:folderId,action:"folderList"};void 0!==userId&&(reqData.sharedBy=userId);var baseObj=this,callbacks={progress:function(){},success:function(responseObj){"success"===responseObj.request&&(void 0!==userId&&responseObj.folderTree&&responseObj.folderTree.length?baseObj._createFolderTree(responseObj.folderTree,folderId,!1,resourcetype):responseObj.folderTree&&responseObj.folderTree.length&&baseObj._createFolderTree(responseObj.folderTree,folderId,!1,resourcetype)),clearTimeout(this._clearTimeout),setTimeout(function(){$("#ui-zfileexplorer-bar-anim-effect").show()},50),this._clearTimeout=setTimeout(function(){baseObj._displayFolderList(liElement,liObj)},200)},fail:function(){}};FCUtil.ajaxUtil("getdocstree.do","GET",reqData,callbacks)},_getUsersSharedFolders:function(userId,liElement,liObj){var reqData={rid:this.options.fileId,sharedBy:userId,action:"sharedFolders"},baseObj=this,callbacks={progress:function(){},success:function(responseObj){"success"===responseObj.request&&(baseObj._createFolderTree(responseObj.folderTree,userId,!1,"shared-folders"),$("#ui-"+responseObj.sharedBy).remove()),clearTimeout(this._clearTimeout),setTimeout(function(){$("#ui-zfileexplorer-bar-anim-effect").show()},50),this._clearTimeout=setTimeout(function(){baseObj._displayFolderList(liElement,liObj)},100)},fail:function(){}};FCUtil.ajaxUtil("getdocstree.do","GET",reqData,callbacks)},_currentFilePath:function(){intialFolContainWdth=1;var currentFolderPath=documentData.currentPathFolderInfo;for(var folderDetail in currentFolderPath)this._createFolderTree(currentFolderPath[folderDetail],folderDetail,!1,void 0,!0);currentFolderPath=documentData.currentPathFolderArray;for(var i=0;i<currentFolderPath.length;i++)documentData.isOwner||0!==i||$("#ui-zfolder-"+currentFolderPath[i]+"-li").data("zflist",!0),$("#ui-zfolder-"+currentFolderPath[i]+"-li").trigger("click"),$("#ui-zfolder-"+currentFolderPath[i]+"-li").data("zftree",!1);this._containerFol.width(181*(currentFolderPath.length+1)),this._zscrollList(),intialFolContainWdth=0,$("#ui-zfileexplorer-folder-content").zscroll("scrollX",5e3)},_createSaveInContainer:function(){{var baseObj=this,saveInContainer=$("<div>").attr("class","ui-zfileexplorer-tools"),searchBoxContainer=$("<div>").attr({"class":"ui-zfileexplorer-searchbox-cont",id:"ui-zfileexplorer-searchbox-cont"}).appendTo(saveInContainer),searchBox=$("<div>").attr("class","ui-zfileexplorer-searchbox").appendTo(searchBoxContainer),searchSubmitBtn=$("<span>").attr({id:"ui-zfileexplorer-search-icon","class":"zsaveas zsaveas-search"}).appendTo(searchBox),searchTextBox=$("<input>").attr({id:"ui-zfileexplorer-search",type:"text"}).appendTo(searchBox),saveInFolder=($("<span>").attr({id:"ui-zfileexplorer-searchclose","class":"ui-zfileexplorer-searchclose"}).appendTo(searchBox),$("<div>").attr("class","ui-zfileexplorer-fieldname").text(this._getString("savein.label")).appendTo(saveInContainer),$("<div>").attr("class","ui-zfileexplorer-fieldinput").appendTo(saveInContainer)),recentFoldersDiv=(documentData.recentFolders,$("<div>").attr("class","ui-zfileexplorer-recentfolders").appendTo(saveInFolder));$("<span>").attr({"class":"ui-zfileexplorer-list-icon zsaveas zsaveas-folder"}).appendTo(recentFoldersDiv),$("<div>").attr({id:"ui-zfileexplorer-recent-folders-loader","class":"ui-zfileexplorer-recent-folders-loader"}).appendTo(recentFoldersDiv)}this._recentFoldersName=$("<input>").attr({id:"ui-zfileexplorer-recentFolderName","class":"ui-zfileexplorer-recentFolderName",type:"text",disabled:!0}).appendTo(recentFoldersDiv);var newFolder=$("<div>").attr({id:"ui-zfileexplorer-newfolder"}).appendTo(saveInFolder);this._newFolderBtn=$("<button>").attr({id:"ui-zfileexplorer-btn-newfolder","class":"ui-zbutton-secondary ui-zfileexplorer-btn-newfolder"}).text(this._getString("newfolderbutton.label")).appendTo(newFolder),this._newFolderBtn.zbutton(),saveInContainer.appendTo(this._fileexplorer),this._newFolderBtn.on("click",function(){if(baseObj._selectedFolderElement){baseObj._newFolderBtn.button("disable"),$("#ui-zfileexplorer-folderContainer").addClass("ui-zfileexplorer-folcont-cursor"),searchTextBox.disable(),searchSubmitBtn.addClass("ui-zfileexplorer-searchicon-opacity");var liHTML=(document.createElement("div"),'<li id="ui-zsa-newfolder" class="ui-zsa-newfolder"><a><span id="ui-zsa-newfolder-icon" class="ui-zfileexplorer-list-icon zsaveas zsaveas-folder"></span> <input id="ui-zsa-newfolder-field" class="ui-zsa-newfolder-field" type="text" value="'+baseObj._getString("newfoldername.label")+'"> </a></li>');baseObj._selectedFolderElement.children().children().append(liHTML),baseObj._zscrollList(),baseObj._scrollDownList(),baseObj._initCreateFolderEvents()}})},_initCreateFolderEvents:function(){var baseObj=this;this._nameCheckInProgress=!1,$(".ui-dialog-titlebar-close").mousedown(function(){$("#ui-zsa-newfolder").remove(),baseObj._nameCheckInProgress=!0}),$("#ui-zsa-newfolder-field").focus().select().off("keydown focusout").on("keydown focusout",function(orgEvent){{var elementObj=$(this);orgEvent.keyCode}if($("#ui-zsa-newfolder-field").css({"border-color":"#bbb"}),27===orgEvent.keyCode&&(baseObj._newFolderBtn.button("enable"),$("#ui-zsa-newfolder-field").unbind(),$("#ui-zfileexplorer-location").focus(),baseObj._selectedFolderElement.children().children()[0].removeChild($("#ui-zsa-newfolder")[0]),orgEvent.stopPropagation(),baseObj._recentlyClicked.trigger("click"),baseObj._triggerOnSelect(!0)),!baseObj._nameCheckInProgress&&(13===orgEvent.keyCode||"focusout"===orgEvent.type)){var folderName=elementObj.val().trim(),canCreateFolder=!0;0===folderName.length?($("#ui-zsa-newfolder-field").removeAttr("style"),canCreateFolder=!1,baseObj._scrollDownList("newfolder"),$("#ui-zsa-newfolder-field").css({"border-color":"#e5443d",animation:"ui-zfe-shake .2s ease-in-out"}),$("#ui-zsa-newfolder-field").select()):(baseObj._selectedFolderElement.children().children().find("li.ui-folder,.ui-readonlyfolder").each(function(){folderName.toLowerCase()===$(this).text().toLowerCase()&&(canCreateFolder=!1)}),canCreateFolder?(baseObj._scrollDownList("newfolder"),$("#ui-zsa-newfolder").addClass("ui-zsa-newfolder-creation"),$("#ui-zsa-newfolder-icon").removeClass("zsaveas zsaveas-folder").addClass("ui-zfc-loader-circle zc-primary"),$("#ui-zsa-newfolder-field").attr("readonly",!0),baseObj._createFolder(folderName)):(baseObj._scrollDownList("newfolder"),baseObj._nameCheckInProgress=!0,baseObj._scrollDownList("newfolder"),ZComponents.showMessageDialog({type:"alert",secondary:baseObj._getString("folderalert.label"),icon:"ui-zalert-error",onClose:function(args){args.isCancel||(baseObj._nameCheckInProgress=!1,$("#ui-zsa-newfolder-field").focus().select())}}))),orgEvent.stopPropagation(),orgEvent.preventDefault()}}).on("click",function(orgEvent){orgEvent.stopPropagation()})},_createFolderContainer:function(){var baseObj=this,folderContainer=$("<div>").attr("id","ui-zfileexplorer-folderContainer"),header=$("<div>").attr("class","ui-zfileexplorer-collapse").appendTo(folderContainer),folderPane=$("<div>").attr("class","ui-zfileexplorer-content").appendTo(header),folderLocation=$("<div>").attr({"class":"ui-zfileexplorer-location",id:"ui-zfileexplorer-location"}).appendTo(folderPane),favsPane=$("<div>").attr("class","ui-zfileexplorer-favorites").appendTo(folderLocation),favsList=$("<ul>").appendTo(favsPane),folderContentPane=$("<div>").attr({"class":"ui-zfileexplorer-folder-content",id:"ui-zfileexplorer-folder-content"}).appendTo(folderLocation);folderContentPane.append($("<span>").attr({"class":"ui-zfc-loader-circle",id:"ui-zfileexplorer-loader"}).css({"margin-left":"50%"})),folderContainer.appendTo(this._fileexplorer);var categoryHTML="",listHTML="";for(var x in this._category)categoryHTML+="<li id="+this._category[x].id+' data-category="ui-zfileexplorer-'+x+'"><a><span class=" ui-zfileexplorer-list-icon '+this._category[x].iconClass+'"></span> <span class="ui-zfileexplorer-folder_name">'+this._category[x].label+"</span> </a></li>",listHTML+='<div id="ui-zfileexplorer-'+x+'"></div>';listHTML+='<div id="ui-zfileexplorer-searchLists"></div>',favsList.append(categoryHTML),this._fragment=document.createDocumentFragment(),folderContentPane.append(listHTML),folderContentPane.zscroll();var parentId;this._selectedWorkspaceId=void 0,this._selectedUserId=void 0,$(document).on("click.zsa","#ui-zfileexplorer-location li",function(){var liElement=$(this);if(!(baseObj._selectedFolderElement&&"ui-zsa-newfolder"===baseObj._selectedFolderElement.children().find("#ui-zsa-newfolder").attr("id")||liElement.hasClass("ui-zfileexplorer-breadcrumb-li"))){if(liElement.hasClass("ui-zfileexplorer-file"))return void $("#ui-zsa-docname").val(liElement.text());liElement.addClass("ui-zfileexplorer-selected ui-zfileexplorer-select"),baseObj._recentlyClicked&&liElement[0]!=baseObj._recentlyClicked[0]&&baseObj._recentlyClicked.removeClass("ui-zfileexplorer-selected"),baseObj._removeSlection(liElement,liElement.data()),baseObj._recentFolderList(liElement),baseObj._recentlyClicked=liElement,($("#ui-zfileexplorer-search").val()||baseObj._searchResult)&&(baseObj._xhr&&baseObj._xhr.abort(),"ui-folder-myfolder"===liElement.attr("id")?(baseObj._searchResultInterpretation(),$("#ui-zfileexplorer-myFolder").empty()):"ui-folder-sharedfolder"===liElement.attr("id")?(baseObj._searchResultInterpretation(),$("#ui-zfileexplorer-sharedFolder").empty()):"ui-folder-workspaces"===liElement.attr("id")?(baseObj._searchResultInterpretation(),$("#ui-zfileexplorer-workspaces").empty()):"ui-zfileexplorer-searchLists-ul"===liElement.parent().parent().parent().attr("id")&&($("#ui-zfileexplorer-workspaces").empty(),$("#ui-zfileexplorer-myFolder").empty(),$("#ui-zfileexplorer-sharedFolder").empty()));var liObj=liElement.data();if(0===intialFolContainWdth)if(this._clearTimeout="",liObj.isuser){if(baseObj._selectedUserId=liObj.zfid,!liObj.zflist)return baseObj._loaderForFoldersDis(liElement),baseObj._getUsersSharedFolders(liObj.zfid,liElement,liObj),void liElement.data("zflist",!0)}else{if(liObj.zftree&&("ws"===liObj.resourcetype||"ws-folders"===liObj.resourcetype)){liElement.data("zftree",!1),parentId=liObj.zfid;var wsFolderId=void 0;return"ws"===liObj.resourcetype?baseObj._selectedWorkspaceId=liObj.zfid:wsFolderId=liObj.zfid,void baseObj._getWorkspaceFolders(baseObj._selectedWorkspaceId,wsFolderId,liElement,liObj)}if(liObj.zftree&&!liObj.isuser&&!liObj.zflist)return"shared-folders"===liObj.resourcetype||"shared-subfolders"===liObj.resourcetype?(void 0===baseObj._selectedUserId&&(baseObj._selectedUserId=liObj.zsharedby),baseObj._loaderForFoldersDis(liElement),baseObj._getSharedFolders(liObj.zfid,baseObj._selectedUserId,"shared-subfolders",liElement,liObj)):(baseObj._loaderForFoldersDis(liElement),baseObj._getSharedFolders(liObj.zfid,void 0,void 0,liElement,liObj)),void liElement.data("zftree",!1)}var newCategory=liObj.category;"ui-zfileexplorer-myFolder"===newCategory?(0===$("#ui-zfileexplorer-myFolder:visible").length&&$("#ui-zfileexplorer-myFolder").show(),parentId="zfileexplorer-myFolder-ul",selectedFodlerID=documentData.myFolderId,baseObj._createFolderTree(documentData.myFolderTree,parentId,!0),baseObj._displayFolderList(liElement,liObj)):"ui-zfileexplorer-sharedFolder"===newCategory?(0===$("#ui-zfileexplorer-sharedFolder:visible").length&&$("#ui-zfileexplorer-sharedFolder").show(),parentId="zfileexplorer-sharedFolder-ul",baseObj._createFolderTree(documentData.sharedWithMe,parentId,!1,"shared-users"),baseObj._displayFolderList(liElement,liObj)):"ui-zfileexplorer-workspaces"===newCategory?(0===$("#ui-zfileexplorer-workspaces:visible").length&&$("#ui-zfileexplorer-workspaces").show(),parentId="zfileexplorer-workspaces-ul",baseObj._createFolderTree(documentData.myWorkspace,parentId,!1,"ws"),baseObj._displayFolderList(liElement,liObj)):baseObj._displayFolderList(liElement,liObj)}})},_loaderForFoldersDis:function(container){mainContainer=container.parent().parent().parent().parent().attr("id"),$("#"+mainContainer).append($("<div>").attr({id:"ui-loader-div","class":"ui-zfileexplorer-folder"})),$("#ui-loader-div").append($("<span>").attr({id:"ui-zfileexplorer-loading-bar","class":"ui-zfileexplorer-loading-bar"})),$("#ui-loader-div").append($("<span>").attr({id:"ui-zfileexplorer-bar-anim-effect","class":"ui-zfileexplorer-bar-anim-effect"})),$("#ui-zfileexplorer-loading-bar").append($("<span>").attr({id:"ui-zfileexplorer-loading-bar-effect","class":"ui-zfileexplorer-loading-bar-effect"})),0===intialFolContainWdth&&$("#"+selectCategory).width(181*$("#"+selectCategory).children(":visible").length),this._zscrollList()},_removeSlection:function(liElement,liObj){var newCategory=liObj.category;if($("#ui-zfileexplorer-loader").remove(),newCategory)$("#"+selectCategory).html(""),selectCategory=newCategory,liElement.parent().children().removeClass("ui-zfileexplorer-select");else{parentId=liObj.zfid,selectedFodlerID=parentId;var liIndex=liElement.index(),newParentEle=$("#"+liElement.parent().parent().parent().attr("id")+" ul");if(newParentEle.find("li:lt("+liIndex+")")&&newParentEle.find("li:lt("+liIndex+")").data("flag",0).removeClass("ui-zfileexplorer-select"),newParentEle.find("li:gt("+liIndex+")")&&newParentEle.find("li:gt("+liIndex+")").data("flag",0).removeClass("ui-zfileexplorer-select"),1===liObj.flag||void 0===parentId)return;var parentIndex=liElement.parent().parent().parent().index();$("#"+selectCategory).children(":gt("+parentIndex+")").hide(),$("#"+selectCategory).children(":gt("+parentIndex+")").children().children().children().removeClass("ui-zfileexplorer-select"),parentId="ui-"+parentId}},_displayFolderList:function(liElement,liObj,parentId){var selectedFodlerID,baseObj=this,newCategory=liObj.category,liElementContainer=liElement.parent().parent().parent();if(newCategory)switch($("#"+selectCategory).html(""),selectCategory=newCategory,liElement.parent().children().removeClass("ui-zfileexplorer-select"),liElement.addClass("ui-zfileexplorer-select"),selectCategory){case"ui-zfileexplorer-myFolder":parentId=selectCategory+"-ul";break;case"ui-zfileexplorer-sharedFolder":parentId=selectCategory+"-ul";break;case"ui-zfileexplorer-workspaces":parentId=selectCategory+"-ul";break;case"ui-zfileexplorer-sharedWorkspace":parentId=selectCategory+"-ul"}else{parentId=liObj.zfid,selectedFodlerID=parentId;var liIndex=liElement.index(),newParentEle=$("#"+liElementContainer.attr("id")+" ul");if(newParentEle.find("li:lt("+liIndex+")")&&newParentEle.find("li:lt("+liIndex+")").data("flag",0).removeClass("ui-zfileexplorer-select"),newParentEle.find("li:gt("+liIndex+")")&&newParentEle.find("li:gt("+liIndex+")").data("flag",0).removeClass("ui-zfileexplorer-select"),1===liObj.flag||void 0===parentId)return;var parentIndex=liElementContainer.index();$("#"+selectCategory).children(":gt("+parentIndex+")").hide(),$("#"+selectCategory).children(":gt("+parentIndex+")").children().children().children().removeClass("ui-zfileexplorer-select"),parentId="ui-"+parentId}if("ui-zfileexplorer-searchLists-ul"===baseObj._recentlyClicked.parent().parent().parent().attr("id")&&(selectCategory="ui-zfileexplorer-searchLists"),$("#"+parentId).length)parentIndex>$("#"+parentId).index()?($("#"+parentId).insertAfter(liElementContainer),$("#"+parentId).show()):$("#"+parentId).show();else if($("#ui-loader-div").remove(),null!==baseObj._fragment.querySelector("#"+parentId))$("#"+selectCategory).append($(baseObj._fragment.querySelector("#"+parentId))),$("#"+selectCategory).children().zscroll();else{var new_div=$("<div>").attr({"class":"ui-zfileexplorer-folder",id:parentId}).appendTo($("#"+selectCategory)).append("<ul></ul>");$("#"+selectCategory).append(new_div),$("#"+selectCategory).children().zscroll()}"ui-zfileexplorer-searchLists"===selectCategory?($("#ui-zfileexplorer-searchLists").children().css({height:218}),$("#ui-zfileexplorer-searchLists").children().zscroll("refresh"),$(".ui-zscroll-horizontal").css({bottom:22}),baseObj._breadcrumbList()):($(".ui-zscroll-horizontal").css({bottom:1}),baseObj._removeBreadcrumb()),0===intialFolContainWdth&&($("#"+selectCategory).width(181*$("#"+selectCategory).children(":visible").length),baseObj._zscrollList());var folderWritePermission;"ui-zfileexplorer-sharedFolder-ul"===parentId||"ui-zfileexplorer-sharedFolder-ul"===liElementContainer.attr("id")||"ui-zfileexplorer-workspaces-ul"===parentId||liElement.data().readonly===!0?(baseObj._newFolderBtn.button("disable"),folderWritePermission=!1):(folderWritePermission=!0,baseObj._selectedFolderElement=$("#"+parentId),baseObj._newFolderBtn.button("enable"),$("#ui-zfileexplorer-search").enable(),$("#ui-zfileexplorer-search-icon").removeClass("ui-zfileexplorer-searchicon-opacity"),$("#ui-zfileexplorer-folderContainer").removeClass("ui-zfileexplorer-folcont-cursor")),this._triggerOnSelect(folderWritePermission,selectedFodlerID)},_zscrollList:function(){var folderContainerInner=$("#ui-zfileexplorer-folder-content").children(".ui-zscroll-child"),scroll_val=folderContainerInner[0].scrollWidth;scroll_val>480&&folderContainerInner.animate({scrollLeft:scroll_val},500),$("#ui-zfileexplorer-folder-content").zscroll("refresh")},_scrollDownList:function(value){var tempSel;tempSel="newfolder"===value?$("#ui-zsa-newfolder"):this._recentlyClicked;var scrollHeight=$("#ui-zfileexplorer-location").outerHeight(),scrollLimit=$("#ui-folder-myfolder").offset().top+scrollHeight,temp=tempSel.parent().parent();if(tempSel.offset().top+tempSel.outerHeight()>=scrollLimit){var sval1=tempSel.offset().top-tempSel.parent().children().first().offset().top,sval2=scrollLimit-tempSel.parent().children().first().offset().top;temp.animate({scrollTop:temp.scrollTop()+sval1-sval2+24},100)}else if(tempSel.offset().top<=scrollLimit-scrollHeight){var sval1=tempSel.offset().top;temp.animate({scrollTop:temp.scrollTop()-(scrollLimit-scrollHeight)+sval1},100)}},_breadcrumbList:function(){var baseObj=this,_curTime=(new Date).getTime();$.ajax({url:baseObj.options.docsURL+"api/v2/files/tree?type=breadcrumbs&resId="+baseObj._recentlyClicked.data().zfid+"&mode=gettreeobjects&currentview=search&_t="+_curTime,headers:{"X-ZCSRF-TOKEN":"zpcr="+FCUtil.getCSRFCookie("zpcc")}}).done(function(responseObj){var remainingPath,len=responseObj.dataobj.length,breadcrumbLen=0,breadcrumbLen1=0;breadcrumb?breadcrumb.children().remove():breadcrumb=$("<div>").attr({id:"ui-zfileexplorer-breadcrumb","class":"ui-zfileexplorer-breadcrumb"}).appendTo($("#ui-zfileexplorer-folder-content")).hide().fadeIn(100),breadcrumb.append("<ul></ul>");var breadcrumbHTML="";for(0===responseObj.dataobj[0].scope?breadcrumbHTML+='<li id="ui-zfileexplorer-breadcrumb-li" class="ui-zfileexplorer-breadcrumb-li"><a><span class=" ui-zfileexplorer-list-icon zsaveas zsaveas-folder"></span> <span class="ui-zfileexplorer-breadcrumb_folder_name">My Folders</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span> </a></li>':(breadcrumbHTML+='<li id="ui-zfileexplorer-breadcrumb-li" class="ui-zfileexplorer-breadcrumb-li"><a><span class=" ui-zfileexplorer-list-icon zsaveas zsaveas-shared-withme"></span> <span class="ui-zfileexplorer-breadcrumb_folder_name">Shared with Me</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span> </a></li>',breadcrumbHTML+='<li id="ui-zfileexplorer-breadcrumb-li" class="ui-zfileexplorer-breadcrumb-li"><a><span class=" ui-zfileexplorer-list-icon zsaveas zsaveas-user"></span> <span class="ui-zfileexplorer-breadcrumb_folder_name">'+responseObj.dataobj[0].created_user_name+'</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span> </a></li>'),i=len-1;i>=0;i--)breadcrumbHTML+=0===i?'<li id="ui-zfileexplorer-breadcrumb-li" class="ui-zfileexplorer-breadcrumb-li"><a><span class=" ui-zfileexplorer-list-icon zsaveas zsaveas-folder"></span> <span class="ui-zfileexplorer-breadcrumb_folder_name">'+responseObj.dataobj[i].enc_res_name+"</span> </a></li>":'<li id="ui-zfileexplorer-breadcrumb-li" class="ui-zfileexplorer-breadcrumb-li"><a><span class=" ui-zfileexplorer-list-icon zsaveas zsaveas-folder"></span> <span class="ui-zfileexplorer-breadcrumb_folder_name">'+responseObj.dataobj[i].enc_res_name+'</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span> </a></li>';breadcrumb.children().append(breadcrumbHTML);var breadEle=breadcrumb.children().children();if(breadEle.each(function(){breadcrumbLen+=$(this).width()}),breadcrumbLen>=514){var showPath=$("<span>").attr({id:"ui-breadcrumb-showPath","class":"ui-breadcrumb-showPath",popup:"showpath"}).hide();showPath.append('<span class="ui-icon ui-components-icon ui-icon-triangle-1-s"></span>'),$("#showpath").children()&&$("#showpath").remove(),remainingPath=$("<ul>").attr({id:"showpath","class":"ui-breadcrumb-menulist",position:"end_after_end",data:"{'componentOptions':{'height':'148','positionAlterable':false}}"}).css("display","none").appendTo("body"),breadcrumb.append(showPath),breadEle.each(function(){breadcrumbLen>=514&&($(this).find(".ui-zfileexplorer-breadcrumb_folder_name").width()>60&&($(this).find(".ui-zfileexplorer-breadcrumb_folder_name").css("width",60).addClass("breadcrumb-shrink-expand breadcrumb-blur-effect"),breadcrumbLen-=$(this).find(".ui-zfileexplorer-breadcrumb_folder_name").width()-60),breadcrumbLen1+=$(this).width(),breadcrumbLen1>=514&&(showPath.show(),remainingPath.append('<li data=\'{"label":"'+$(this).text()+'","icon": "zsaveas zsaveas-folder"}\'></li>'),$(this).remove()))}),breadEle.mouseenter(function(){var el,width,clone;el=$(this).find(".ui-zfileexplorer-breadcrumb_folder_name"),el.hasClass("breadcrumb-blur-effect")&&el.removeClass("breadcrumb-blur-effect"),clone=el.clone(),clone.css({width:"auto"}).appendTo("body"),width=clone.width(),clone.remove(),$(this).find(".breadcrumb-shrink-expand").animate({width:width},100)}).mouseleave(function(){$(this).find(".breadcrumb-shrink-expand").addClass("breadcrumb-blur-effect"),$(this).find(".breadcrumb-shrink-expand").animate({width:60},200)})}})},_removeBreadcrumb:function(){breadcrumb&&($(".ui-zfileexplorer-breadcrumb").remove(),breadcrumb=void 0)},_recentFolderList:function(selctedEle){$("#ui-zfileexplorer-recent-folders-loader").remove(),this._recentFoldersName.val(selctedEle.children().children().text())},_folderSearch:function(){var base=this;this._xhr,$("#ui-zfileexplorer-search").keyup(function(ev){var searchVal=$("#ui-zfileexplorer-search").val();if(searchVal&&searchVal.length>=3||searchVal&&13===ev.keyCode){var code=ev.charCode||ev.keyCode,notAllowedKeys=[9,16,17,18,20,32,37,38,39,40,91,93];if(-1!=$.inArray(code,notAllowedKeys))return;$("#ui-zfileexplorer-searchclose").hasClass("zsaveas-search-close")&&$("#ui-zfileexplorer-searchclose").removeClass("zsaveas zsaveas-search-close"),$("#ui-zfileexplorer-searchclose").addClass("ui-zfc-loader-circle"),base._newFolderBtn.button("disable");var parentId="zfileexplorer-searchLists-ul";base._recentlyClicked.closest("#ui-zfileexplorer-myFolder").length||base._recentlyClicked.is("#ui-folder-myfolder")?($("#ui-zfileexplorer-myFolder").hide(),$("#ui-folder-myfolder").removeClass("ui-zfileexplorer-selected ui-zfileexplorer-select")):base._recentlyClicked.closest("#ui-zfileexplorer-sharedFolder").length||base._recentlyClicked.is("#ui-folder-sharedfolder")?($("#ui-zfileexplorer-sharedFolder").hide(),$("#ui-folder-sharedfolder").removeClass("ui-zfileexplorer-selected ui-zfileexplorer-select")):(base._recentlyClicked.closest("#ui-zfileexplorer-workspaces").length||base._recentlyClicked.is("#ui-folder-workspaces"))&&($("#ui-zfileexplorer-workspaces").hide(),$("#ui-folder-workspaces").removeClass("ui-zfileexplorer-selected ui-zfileexplorer-select")),base._xhr&&base._xhr.abort(),base._xhr=$.ajax({url:base.options.docsURL+"api/v2/files/search?action=search&searchtype=alllocation&category=folders&start=0&limit=50&sortorder=asc&orderby=name&crossdomain=true&searchquery="+searchVal+"*",headers:{"X-ZCSRF-TOKEN":"zpcr="+FCUtil.getCSRFCookie("zpcc")}}).done(function(responseObj){responseObj&&responseObj.dataobj.length>0?($("#ui-zfileexplorer-searchclose").removeClass("ui-zfc-loader-circle").addClass("zsaveas zsaveas-search-close"),$("#ui-zfileexplorer-searchLists").children().length&&($("#ui-zfileexplorer-searchLists").empty(),$("#ui-zfileexplorer-searchLists").css({width:181}),base._removeBreadcrumb()),base._createFolderTree(responseObj.dataobj,parentId),base._searchResult=$(base._fragment.querySelector("#ui-"+parentId)),$("#ui-zfileexplorer-searchLists").append(base._searchResult),$("#ui-zfileexplorer-searchLists").children().zscroll(),base._zscrollList()):($("#ui-zfileexplorer-searchclose").removeClass("ui-zfc-loader-circle").addClass("zsaveas zsaveas-search-close"),$("#ui-zfileexplorer-searchLists").empty(),noResult=$("<label>").attr({"class":"ui-zfileexplorer-noresults"}).text(base._getString("nofoldersfound.label")),$("#ui-zfileexplorer-searchLists").append(noResult),base._removeBreadcrumb())}),base._triggerOnSelect(!1)}else base._xhr&&base._xhr.abort(),8===ev.keyCode&&searchVal.length<=0&&($("#ui-zfileexplorer-search").select(),base._searchResultInterpretation())}),$("#ui-zfileexplorer-searchclose").click(function(ev){$("#ui-zfileexplorer-searchclose").hasClass("zsaveas-search-close")&&($("#ui-zfileexplorer-search").select(),base._searchResultInterpretation(),ev.stopPropagation())})},_searchResultInterpretation:function(){var base=this;$("#ui-zfileexplorer-searchLists").empty(),base._recentlyClicked.closest("#ui-zfileexplorer-myFolder").length||base._recentlyClicked.is("#ui-folder-myfolder")?($("#ui-zfileexplorer-myFolder").show(),$("#ui-folder-myfolder").addClass("ui-zfileexplorer-select")):base._recentlyClicked.closest("#ui-zfileexplorer-sharedFolder").length||base._recentlyClicked.is("#ui-folder-sharedfolder")?($("#ui-zfileexplorer-sharedFolder").show(),$("#ui-folder-sharedfolder").addClass("ui-zfileexplorer-select")):base._recentlyClicked.closest("#ui-zfileexplorer-workspaces").length||base._recentlyClicked.is("#ui-folder-workspaces")?($("#ui-zfileexplorer-workspaces").show(),$("#ui-folder-workspaces").addClass("ui-zfileexplorer-select")):($("#ui-folder-myfolder").trigger("click"),$("#ui-folder-myfolder").removeClass("ui-zfileexplorer-selected"),$("#ui-zfileexplorer-search").select()),base._zscrollList(),$("#ui-zfileexplorer-searchclose").removeClass("ui-zfc-loader-circle zsaveas zsaveas-search-close"),$("#ui-zfileexplorer-search").val(""),base._recentlyClicked.is("#ui-folder-sharedfolder")||base._recentlyClicked.parent().parent().parent().is("#ui-zfileexplorer-sharedFolder-ul")||base._recentlyClicked.is("#ui-folder-workspaces")||base._recentlyClicked.data().readonly===!0||(base._triggerOnSelect(!0),base._newFolderBtn.button("enable"))},_createFolderTree:function(folderTree,parentId,isMyFolder,resourcetype){var folderCls,treeHTML="",checkTree=!1,isTree=!1,folderName="",folderId="",fileHTML="";if(void 0!==folderTree){for(var i=0;i<folderTree.length;i++)folderId=folderTree[i].id||folderTree[i].resource_id||folderTree[i].res_id,folderName=folderTree[i].encattr_res_name||folderTree[i].encodedName||folderTree[i].name,checkTree=folderTree[i].sub_folder&&folderTree[i].sub_folder.length>0?!0:!1,1===folderTree[i].scope&&(resourcetype="shared-folders"),folderTree[i].readOnly||1===folderTree[i].permission?(folderCls="ui-readonlyfolder",folderTree[i].readOnly=!0):folderCls="ui-folder","zfileexplorer-sharedFolder-ul"===parentId?(checkTree=!1,treeHTML+='<li id="ui-zfolder-'+folderId+'-li" data-zftree="true" data-zflist="false" data-isuser="true" data-zfid="'+folderId+'">',treeHTML+='<a><span class="ui-zfileexplorer-list-icon zsaveas zsaveas-user"></span><span class="ui-zfileexplorer-folder_name">'+folderTree[i].encodedFullName+'</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span></a></li>'):"zfileexplorer-workspaces-ul"===parentId?(checkTree=!1,treeHTML+='<li id="ui-zfolder-'+folderId+'-li" data-resourcetype="'+resourcetype+'" data-zftree="true" data-zflist="false" data-zfid="'+folderId+'" data-readonly="'+folderTree[i].readOnly+'">',treeHTML+='<a><span class="ui-zfileexplorer-list-icon zsaveas zsaveas-workspace"></span><span class="ui-zfileexplorer-folder_name">'+folderName+'</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span></a></li>'):folderTree[i].extension?(checkTree=!1,fileHTML+='<li id="ui-zfolder-'+folderId+'-li" class="ui-zfileexplorer-file" data-resourcetype="'+resourcetype+'" data-zftree="'+isTree+'" data-zflist="false" data-zfid="'+folderId+'" data-zext="'+folderTree[i].extension+'">',fileHTML+='<a><span class="ui-zfileexplorer-list-icon zsaveas zsaveas-file-'+folderTree[i].extension+'"></span><span class="ui-zfileexplorer-folder_name">'+folderName+"</span></a></li>"):(isTree=Boolean(!isMyFolder||folderTree[i].IS_TREE),treeHTML+='<li id="ui-zfolder-'+folderId+'-li" class="'+folderCls+'" data-resourcetype="'+resourcetype+'" data-zftree="'+isTree+'" data-zflist="false" data-zsharedby="'+folderTree[i].space_id+'" data-zfid="'+folderId+'" data-readonly="'+folderTree[i].readOnly+'">',treeHTML+='<a><span class="ui-zfileexplorer-list-icon zsaveas zsaveas-folder"></span><span class="ui-zfileexplorer-folder_name">'+folderName+'</span><span class="ui-zfileexplorer-icon-right zsaveas zsaveas-expand-arrow"></span></a></li>'),checkTree&&this._createFolderTree(folderTree[i].sub_folder,folderId,isMyFolder,resourcetype);var newList=document.createElement("div");newList.className="ui-zfileexplorer-folder",newList.id="ui-"+parentId,null!==this._fragment.querySelector("#ui-"+parentId)&&this._fragment.removeChild(this._fragment.querySelector("#ui-"+parentId)),newList.innerHTML="<ul>"+treeHTML+fileHTML+"</ul>",this._fragment.appendChild(newList)}},_createFolder:function(folderName,folderId){if(""!==folderName.trim()&&!this._requestStatus){var actionType="createfolder",reqData={rid:this.options.fileId,action:actionType,folderId:documentData.myFolderId===selectedFodlerID||void 0===selectedFodlerID||""===selectedFodlerID?"-1":selectedFodlerID,folderName:folderName,rid:this.options.fileId},baseObj=this,callbacks={progress:function(){baseObj._requestStatus=!0,baseObj._toggleLoader(!0,"progress",actionType,{folderId:folderId})},success:function(responseObj){if("success"===responseObj.request){baseObj._selectedFolderElement.children().children()[0].removeChild($("#ui-zsa-newfolder")[0]),baseObj._toggleLoader(!1,"success",actionType,{folderId:responseObj.folderId});var currentPath="#ui-zfolder-"+responseObj.folderId+"-li";"-1"===responseObj.folderId?(documentData.myFolderTree=responseObj.folderTree,$("#ui-zfileexplorer-myFolder-ul").remove(),currentPath="#ui-folder-myfolder"):$("#ui-"+responseObj.folderId).remove(),responseObj.folderTree&&responseObj.folderTree.length&&(baseObj._createFolderTree(responseObj.folderTree,responseObj.folderId),$(currentPath).trigger("click"),$("#ui-zfolder-"+responseObj.newFolderId+"-li").trigger("click"),baseObj._scrollDownList())}else"FolderNameAlreadyExist"===responseObj.message?(setTimeout(function(){$("#ui-zsa-newfolder-field").removeAttr("readonly"),$("#ui-zsa-newfolder").removeClass("ui-zsa-newfolder-creation"),$("#ui-zsa-newfolder-icon").removeClass("ui-zfc-loader-circle zc-primary").addClass("zsaveas zsaveas-folder")},1),baseObj._newFolderErrStatus=!0,baseObj._toggleLoader(!1,"error",actionType,{folderId:folderId}),ZComponents.showMessageDialog({type:"alert",secondary:baseObj._getString("folderalert.label"),icon:"ui-zalert-error",onClose:function(args){args.isCancel||baseObj._initCreateFolderEvents()}})):(baseObj._toggleLoader(!1,"status",actionType,{folderId:folderId}),$("#ui-fc-server-error")&&$("#ui-fc-server-error").remove(),baseObj._triggerOnError("Permission_Denied"===responseObj.message?baseObj._getString("permissionerrorfolder.label"):baseObj._getString("unknownerrorfolder.label")),setTimeout(function(){$("#ui-zsa-newfolder-field").removeAttr("readonly"),$("#ui-zsa-newfolder").removeClass("ui-zsa-newfolder-creation"),$("#ui-zsa-newfolder-icon").removeClass("ui-zfc-loader-circle zc-primary").addClass("zsaveas zsaveas-folder")},1));baseObj._requestStatus=!1},fail:function(){baseObj._requestStatus=!1,baseObj._toggleLoader(!1,"fail",actionType,{folderId:folderId})}};FCUtil.ajaxUtil("documentupdate.do","POST",reqData,callbacks)}},_tooltipEllipsis:function(){var baseObj=this;$(document).off("mouseover.zsa").on("mouseover.zsa","#ui-zfileexplorer-location li",function(){var ele=$(this).children().find(".ui-zfileexplorer-folder_name"),element=ele.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo("body");element.width()>ele.width()?$(this).hasClass("ui-readonlyfolder")?ele.attr({title:ele.text()+" ( "+baseObj._getString("readonly.label")+" )"}):ele.attr("title",ele.text()):$(this).hasClass("ui-readonlyfolder")&&ele.attr("title",baseObj._getString("readonly.label")),element.remove()})},_triggerOnSelect:function(folderWritePermission,selectedFodlerID){this.options.onSelect?((documentData.myFolderId===selectedFodlerID||"ui-zfileexplorer-myFolder"===this._recentlyClicked.data("category"))&&(selectedFodlerID="-1"),this.options.onSelect({parentId:documentData.parentId,selectedFodlerID:selectedFodlerID,folderWritePermission:folderWritePermission,selectedFolderElement:this._selectedFolderElement,recentlyClicked:this._recentlyClicked})):this._triggerEvent(this._EVENTS.ONSELECT)},_triggerOnError:function(errorMsg){this.options.onError?this.options.onError({errorMsg:errorMsg}):this._triggerEvent(this._EVENTS.ONSELECT)},_toggleLoader:function(){},_getString:function(key,module,stringArray){return FCUtil.getI18NString(module?module:"zfileexplorer",key,stringArray,this.options.keys)},_triggerEvent:function(orgEvent,_eventParams){var eventParams={action:this._action,fileId:this.options.fileId};_eventParams&&(eventParams=$.extend(eventParams,_eventParams)),$("body").trigger("zfileexplorer"+orgEvent,eventParams)},_close:function(){_dialogAlreadyOpened=!1,$(document).off("click.zsa mouseover.zsa"),$("#ui-zfileexplorer-recent-folders,#ui-zfileexplorer-file-format,#ui-zsa-newfolder").remove(),this._fileexplorer.remove()}};return{open:function(options){_dialogAlreadyOpened||zfileExplorer._init(options)},close:function(){zfileExplorer._close()},handleScroll:function(){zfileExplorer._scrollDownList()},handleSearchResult:function(){zfileExplorer._searchResultInterpretation()}}}(window.jQuery),ZMoveTo=function($){var defaultConfig={keys:{"title.label":"Move To","movefilealert1.label":"Cannot move the file to the selected location because already there is another file with the same name.","movefilealert2.label":"Cannot move the file because the source and destination location are same.","permissionerrormove.label":"Cannot move in this folder. Your permission has been changed.","unknownerrormove.label":"Unable to move due to an unknown error.","movesuccessful.label":"File moved successfully.","move.label":"Move","moving.label":"Moving"},fileId:void 0,extension:void 0,allowDuplicateName:!1,fileName:"",dialogTitle:""},_dialogAlreadyOpened=!1,documentData={extension:void 0,folderId:void 0,myFolderId:void 0,parentId:void 0,myFolderTree:void 0,sharedWithMe:void 0,currentPath:void 0,recentFolders:void 0,isOwner:void 0},zmoveto={widgetEventPrefix:"zmoveto",_EVENTS:{ONOPEN:"open",ONFINISH:"done",ONCLOSE:"close"},_init:function(options){this.options=$.extend({},defaultConfig,options),documentData.documentName=this.options.fileName,documentData.extension=this.options.extension,this._createDialog()},_createDialog:function(){var baseObj=this,dialogLeft=(window.innerWidth-760)/2,dialogTop=(window.innerHeight-270)/7;this._movetoDialog=$("<div>").attr({id:"ui-zmoveto-dialog"}).appendTo("body"),this._movetoDialog.on("dialogopen",function(){_dialogAlreadyOpened=!0}).on("dialogclose",function(){baseObj._close()}).zdialog({dialogClass:"ui-zfc-dialog ui-zmoveto-dialog",modal:!0,autoOpen:!1,hideOnClose:!1,position:[dialogLeft,dialogTop],width:750,buttons:[{text:baseObj._getString("move.label"),click:function(){var canMoveFile=!0;if(baseObj.options.allowDuplicateName===!1&&baseObj._selectedFolderElement.children().children().find("li.ui-zfileexplorer-file").each(function(){return $(this).text().toLowerCase().trim()===documentData.documentName.toLowerCase().trim()&&$(this).data().zext===documentData.extension?(canMoveFile=!1,!1):void 0}),canMoveFile){FCUtil.showProgressDialog(baseObj._getString("moving.label")+"...",baseObj._dialogBase),baseObj._moveDocument(),baseObj._dialogBase.hide();var moveBtn=$("#ui-zmoveto-movebutton");moveBtn.children(".ui-button-text").text(baseObj._getString("moving.label")),moveBtn.addClass("ui-button-text-icon-primary").disable(),moveBtn.children().first().hasClass("ui-zfc-loader-circle")||moveBtn.prepend($("<span>").attr({"class":"ui-button-icon-primary ui-icon ui-zfc-loader-circle"}))}else{var errorMsg;errorMsg=baseObj._getString(baseObj._recentlyClicked.attr("id")==="ui-zfolder-"+baseObj._currentFolderLoc+"-li"?"movefilealert2.label":"movefilealert1.label"),ZComponents.showMessageDialog({secondary:errorMsg,onClose:function(args){args.isCancel||setTimeout(function(){$("#ui-zmoveto-movebutton").focus()},200)}})}},id:"ui-zmoveto-movebutton","class":"ui-zbutton-primary"},{text:FCUtil.getString("cancel"),click:function(){zmoveto._closeDialog()},id:"ui-zmoveto-closebutton","class":"ui-zbutton-secondary"}],title:""===this.options.dialogTitle||void 0===this.options.dialogTitle?baseObj._getString("title.label"):this.options.dialogTitle,resizable:!1}),this._dialogBase=this._movetoDialog.parent(),this._movetoDialog.zdialog("open",[dialogLeft,dialogTop]),$("#ui-zmoveto-movebutton").disable(),ZFileExplorer.open({fileId:this.options.fileId,renderTo:"ui-zmoveto-dialog",onInit:function(){baseObj._movetoDialog.zdialog("updateTabIndex"),$("#ui-zfileexplorer-newfolder").on("click",function(){$("#ui-zmoveto-movebutton").disable()}),$("#ui-zmoveto-closebutton").mousedown(function(){$("#ui-zsa-newfolder").remove()})},afterInit:function(docObj){(void 0===documentData.extension||""===documentData.extension.trim())&&(documentData.extension=docObj.extension)},onSelect:function(data){baseObj._selectedFodlerID=data.selectedFodlerID,baseObj._recentlyClicked=data.recentlyClicked,baseObj._currentFolderLoc=data.parentId,baseObj._selectedFolderElement=data.selectedFolderElement,baseObj._folderWritePermission=data.folderWritePermission,baseObj._folderWritePermission===!0&&void 0!==baseObj._selectedFodlerID?$("#ui-zmoveto-movebutton").enable():$("#ui-zmoveto-movebutton").disable()},onError:function(data){baseObj._serverError(data.errorMsg)}});var keydownEvent=!1;this._movetoDialog.click(function(orgEvent){$(orgEvent.target).closest("#ui-zfileexplorer-location").length||($("#ui-zfileexplorer-location").off("keydown"),keydownEvent=!1,baseObj._bindTabkeyEvents(),baseObj._recentlyClicked.removeClass("ui-zfileexplorer-selected"))}),$("#ui-zfileexplorer-location").click(function(){$("#ui-zfileexplorer-location").attr("tabindex",0),keydownEvent||(keydownEvent=!0,baseObj._bindTabkeyEvents(),$("#ui-zfileexplorer-location").focus())}),this._dialogBase.on("contextmenu",function(orgEvent){return"text"!==orgEvent.target.type?!1:void 0})},_bindTabkeyEvents:function(){var baseObj=this;this._dialogBase.off("keydown.move").on("keydown.move",function(e){var code=e.charCode||e.keyCode;if(9===code){var currentFocusedEle=$(".ui-zmoveto-dialog").find(":focus"),currentFocusedEleId=currentFocusedEle.attr("id");e.shiftKey?"ui-zfileexplorer-btn-newfolder"!==currentFocusedEleId||$("#ui-zfileexplorer-searchLists").children().length&&!$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults")&&!baseObj._recentlyClicked.closest("#ui-zfileexplorer-searchLists").is("#ui-zfileexplorer-searchLists")?"ui-zfileexplorer-search"===currentFocusedEleId&&$("#ui-zfileexplorer-btn-newfolder").hasClass("ui-state-disabled")&&(!$("#ui-zfileexplorer-searchLists").children().length||$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zmoveto-noresult_found")?(ZFileExplorer.handleSearchResult(),baseObj._recentlyClicked.trigger("click")):$("#ui-zfileexplorer-searchLists > div > div > ul > li:first").trigger("click"),$("#ui-zfileexplorer-location").focus(),ZFileExplorer.handleScroll()):((!$("#ui-zfileexplorer-searchLists").children().length||$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults"))&&ZFileExplorer.handleSearchResult(),$("#ui-zfileexplorer-location").focus(),baseObj._recentlyClicked.trigger("click"),ZFileExplorer.handleScroll()):("ui-zmoveto-movebutton"===currentFocusedEleId||"ui-zmoveto-closebutton"===currentFocusedEleId&&$("#ui-zmoveto-movebutton").hasClass("ui-state-disabled"))&&(!$("#ui-zfileexplorer-searchLists").children().length||$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults")||baseObj._recentlyClicked.closest("#ui-zfileexplorer-searchLists").is("#ui-zfileexplorer-searchLists"))?((!$("#ui-zfileexplorer-searchLists").children().length||$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults"))&&ZFileExplorer.handleSearchResult(),$("#ui-zfileexplorer-location").focus(),baseObj._recentlyClicked.trigger("click"),ZFileExplorer.handleScroll()):"ui-zmoveto-closebutton"===currentFocusedEleId&&$("#ui-zfileexplorer-searchLists").children().length&&$("#ui-zmoveto-movebutton").hasClass("ui-state-disabled")&&($("#ui-zfileexplorer-location").focus(),$("#ui-zfileexplorer-searchLists > div > div > ul > li:first").trigger("click"),ZFileExplorer.handleScroll())}})},_moveDocument:function(orgEvent){var actionType="move",folderId=documentData.myFolderId===this._selectedFodlerID||void 0===this._selectedFodlerID||""===this._selectedFodlerID?"-1":this._selectedFodlerID,reqData={action:actionType,rid:this.options.fileId,folderId:folderId};if(!this._requestStatus){this._requestTime=new Date;var baseObj=this,callbacks={progress:function(){baseObj._requestStatus=!0,baseObj._triggerEvent(baseObj._EVENTS.ONSUBMIT,orgEvent,{folderId:folderId})},success:function(responseObj){"success"===responseObj.request?baseObj._handleAJAXRequest(void 0,function(){baseObj._closeDialog(),baseObj.options.onSuccess&&baseObj.options.onSuccess({fileId:responseObj.newResourceId});var moveSuccessMsg=$('<div id="ui-zmoveto-success" class="ui-zmoveto-success"><div class="zc-server-error"><span id="zc-server-error-close" title="'+FCUtil.getString("close")+'" class="ui-zfc-icon ui-icon-closethick"></span><div class="zc-server-error-msg">'+baseObj._getString("movesuccessful.label")+" </div> </div> </div>").appendTo("body");moveSuccessMsg.css({left:(window.innerWidth-moveSuccessMsg.outerWidth())/2,display:"block"}),setTimeout(function(){moveSuccessMsg.remove()},2e3)}):baseObj._copyFail(responseObj.message),baseObj._requestStatus=!1},fail:function(){baseObj._copyFail()}};FCUtil.ajaxUtil("documentupdate.do","POST",reqData,callbacks)}},_serverError:function(msg){var errorOptions={autoCloseDelay:5e3};FCUtil.showError(msg,this._dialogBase,"#ui-zmoveto-dialog",errorOptions,"prependTo")},_handleAJAXRequest:function(msgType,callback){var currentTime=new Date,timeRemainingToShowError=parseInt(currentTime-this._requestTime);timeRemainingToShowError=timeRemainingToShowError>1e3?0:1e3-timeRemainingToShowError,setTimeout(function(){callback&&callback(msgType),FCUtil.removeProgressDialog()},timeRemainingToShowError)},_copyFail:function(msgType){var baseObj=this;this._handleAJAXRequest(msgType,function(msgType){FCUtil.removeProgressDialog(),baseObj._dialogBase.show();var msg=baseObj._getString("unknownerrormove.label");"ACCESS_DENIED"===msgType?msg=baseObj._getString("permissionerrormove.label"):"File_Name_Already_Exist"===msgType?msg=baseObj._getString("movefilealert1.label"):"Src_AND_Dest_Same"===msgType&&(msg=baseObj._getString("movefilealert2.label")),baseObj._dialogBase.show(),baseObj._requestStatus=!1;var moveBtn=$("#ui-zmoveto-movebutton");moveBtn.children(".ui-button-text").text(baseObj._getString("move.label")),moveBtn.removeClass("ui-button-text-icon-primary").enable(),moveBtn.children().first().remove(),baseObj._serverError(msg)})},_getString:function(key,module,stringArray){return FCUtil.getI18NString(module?module:"zmoveto",key,stringArray,this.options.keys)},_triggerEvent:function(orgEvent,_eventParams){var eventParams={action:this._action,fileId:this.options.fileId};_eventParams&&(eventParams=$.extend(eventParams,_eventParams)),$("body").trigger("zmoveto"+orgEvent,eventParams)},_closeDialog:function(){this._movetoDialog.zdialog("close")},_close:function(){this._movetoDialog.zdialog("destroy"),_dialogAlreadyOpened=!1,this._triggerEvent(this._EVENTS.ONCLOSE),$(document).off("click.zsa mouseover.zsa"),ZFileExplorer.close(),this._movetoDialog.remove(),$("#ui-zmoveto-recent-folders,#ui-zmoveto-file-format").remove()}};return{open:function(options){_dialogAlreadyOpened||zmoveto._init(options)},close:function(){zmoveto._closeDialog()}}}(window.jQuery),ZSaveAs=function($){var defaultConfig={keys:{"title.label":"Save As","saving.label":"Saving","chosefolderloc.label":"Chose Folder Location","filename.label":"File Name:","filealert.label":"A file with this name already exists. Please choose a different name.","save.label":"Save","fileformat.label":"Format:","unknownerrorsave.label":"Unable to save due to an unknown error.","permissionerrorsave.label":"Cannot save in this folder. Your permission has been changed."},fileId:void 0,extension:void 0,fileName:"",allowDuplicateName:!1,dialogTitle:""},_dialogAlreadyOpened=!1,documentData={extension:void 0,folderId:void 0,myFolderId:void 0,parentId:void 0,myFolderTree:void 0,sharedWithMe:void 0,currentPath:void 0,recentFolders:void 0,isOwner:void 0},zsaveas={widgetEventPrefix:"zsaveas",_EVENTS:{ONOPEN:"open",ONFINISH:"done",ONCLOSE:"close"},_init:function(options){this.options=$.extend({},documentData,defaultConfig,options),documentData.documentName=this.options.fileName,documentData.extension=this.options.extension||this.options.fileExtension,this._createDialog()},_createDialog:function(){var baseObj=this;this._isDefaultExtn=!1,this._dialogWrapperWidth=442,this._dialogWidth=430;var dialogLeft=(window.innerWidth-this._dialogDefaultWidth)/2,dialogTop=(window.innerHeight-270)/7;this._saveasDialog=$("<div>").attr({id:"ui-zsaveas-dialog"}).appendTo("body"),this._saveasDialog.on("dialogopen",function(){_dialogAlreadyOpened=!0}).on("dialogclose",function(){baseObj._close()}).zdialog({dialogClass:"ui-zfc-dialog ui-zsaveas-dialog",modal:!0,autoOpen:!1,hideOnClose:!1,position:[dialogLeft,dialogTop],width:baseObj._dialogWidth,buttons:[{text:baseObj._getString("save.label"),click:function(){var documntName=$("#ui-zsa-docname").val().trim(),canCreateFile=!0;if(baseObj.options.allowDuplicateName===!1&&baseObj._selectedFolderElement.children().children().find("li.ui-zfileexplorer-file").each(function(){return $(this).text().toLowerCase().trim()===documntName.toLowerCase().trim()&&$(this).data().zext===baseObj._fileExtention?(canCreateFile=!1,!1):void 0}),canCreateFile){FCUtil.showProgressDialog(baseObj._getString("saving.label")+"...",baseObj._dialogBase),baseObj._copyDocument(),baseObj._dialogBase.hide();var saveBtn=$("#ui-zsaveas-savebutton");saveBtn.children(".ui-button-text").text(baseObj._getString("saving.label")),saveBtn.addClass("ui-button-text-icon-primary").disable(),saveBtn.children().first().hasClass("ui-zfc-loader-circle")||saveBtn.prepend($("<span>").attr({"class":"ui-button-icon-primary ui-icon ui-zfc-loader-circle"}))}else ZComponents.showMessageDialog({type:"alert",secondary:baseObj._getString("filealert.label"),icon:"ui-zalert-error",onClose:function(args){args.isCancel||setTimeout(function(){$("#ui-zsa-docname").focus()},200)}})},id:"ui-zsaveas-savebutton","class":"ui-zbutton-primary"},{text:FCUtil.getString("cancel"),click:function(){zsaveas._closeDialog()},id:"ui-zsaveas-closebutton","class":"ui-zbutton-secondary"}],title:""===this.options.dialogTitle||void 0===this.options.dialogTitle?baseObj._getString("title.label"):this.options.dialogTitle,resizable:!1}),this._dialogBase=this._saveasDialog.parent(),this._createFileNameContainer(),this._saveasDialog.zdialog("open",[dialogLeft,dialogTop]);var fileNameContainer=this._saveasDialog.find(".ui-zsaveas-filenamecontainer"),fileName=this._saveasDialog.find(".ui-zsaveas-fieldname");fileName.width()>90&&(this._dialogWrapperWidth+=50,this._dialogWidth=480,fileName.addClass("ui-zsaveas-fieldname-large"),this._dialogBase.width(this._dialogWidth).addClass("ui-zsaveas-large"),dialogLeft=(window.innerWidth-this._dialogWrapperWidth)/2,this._saveasDialog.zdialog("open",[dialogLeft,dialogTop])),fileNameContainer.removeClass("ui-zsaveas-collapse"),$("#ui-zsaveas-savebutton").disable(),ZFileExplorer.open({fileId:this.options.fileId,renderTo:"ui-zsaveas-dialog",onInit:function(){$("#ui-zfileexplorer-folderContainer").css("display","none"),$("#ui-zfileexplorer .ui-zfileexplorer-searchbox-cont").hide(),$("#ui-zfileexplorer-newfolder").hide(),baseObj._createExpandCollapseBtn(),baseObj._createFormatContainer(),baseObj._saveasDialog.zdialog("updateTabIndex"),$("#ui-zfileexplorer-newfolder").on("click",function(){$("#ui-zsaveas-savebutton").disable()}),$("#ui-zsaveas-closebutton").mousedown(function(){$("#ui-zsa-newfolder").remove()})},afterInit:function(docObj){(void 0===baseObj._fileExtention||""===baseObj._fileExtention.trim())&&(baseObj._isDefaultExtn=!0,baseObj._fileExtention=docObj.extension)},onSelect:function(data){baseObj._selectedFodlerID=data.selectedFodlerID,baseObj._recentlyClicked=data.recentlyClicked,baseObj._selectedFolderElement=data.selectedFolderElement,baseObj._folderWritePermission=data.folderWritePermission,baseObj._folderWritePermission===!0&&void 0!==baseObj._selectedFodlerID?$("#ui-zsaveas-savebutton").enable():$("#ui-zsaveas-savebutton").disable()},onError:function(data){baseObj._serverError(data.errorMsg)}});var keydownEvent=!1;this._saveasDialog.click(function(orgEvent){$(orgEvent.target).closest("#ui-zfileexplorer-location").length||($("#ui-zfileexplorer-location").off("keydown"),keydownEvent=!1,baseObj._bindTabkeyEvents(),baseObj._recentlyClicked.removeClass("ui-zfileexplorer-selected"))}),$("#ui-zfileexplorer-location").click(function(){$("#ui-zfileexplorer-location").attr("tabindex",0),keydownEvent||(keydownEvent=!0,baseObj._bindTabkeyEvents(),$("#ui-zfileexplorer-location").focus())}),this._dialogBase.on("contextmenu",function(orgEvent){return"text"!==orgEvent.target.type?!1:void 0})},_bindTabkeyEvents:function(){var baseObj=this;$("#ui-zsaveas-dialog").off("keydown").keydown(function(e){var code=e.charCode||e.keyCode;if(9===code){var currentFocusedEle=$("#ui-zsaveas-dialog").find(":focus"),currentFocusedEleId=currentFocusedEle.attr("id");"ui-zsaveas-formatsPane"!==currentFocusedEle.parent().attr("class")||$("#ui-zfileexplorer-searchLists").children().length&&!$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults")&&!baseObj._recentlyClicked.closest("#ui-zfileexplorer-searchLists").is("#ui-zfileexplorer-searchLists")?"ui-zsaveas-formatsPane"===currentFocusedEle.parent().attr("class")&&$("#ui-zfileexplorer-searchLists").children().length?($("#ui-zfileexplorer-location").focus(),$("#ui-zfileexplorer-searchLists > div > div > ul > li:first").trigger("click"),ZFileExplorer.handleScroll()):e.shiftKey&&("ui-zfileexplorer-btn-newfolder"!==currentFocusedEleId||$("#ui-zfileexplorer-searchLists").children().length&&!baseObj._recentlyClicked.closest("#ui-zfileexplorer-searchLists").is("#ui-zfileexplorer-searchLists")?"ui-zsaveas-expandCollapse"===currentFocusedEleId&&!$("#ui-zfileexplorer-searchLists").children().length&&$("#ui-zfileexplorer-btn-newfolder").hasClass("ui-state-disabled")?($("#ui-zfileexplorer-location").focus(),baseObj._recentlyClicked.trigger("click"),ZFileExplorer.handleScroll()):"ui-zsaveas-expandCollapse"===currentFocusedEleId&&$("#ui-zfileexplorer-searchLists").children().length&&$("#ui-zfileexplorer-btn-newfolder").hasClass("ui-state-disabled")&&($("#ui-zfileexplorer-location").focus(),$("#ui-zfileexplorer-searchLists > div > div > ul > li:first").trigger("click"),ZFileExplorer.handleScroll()):($("#ui-zfileexplorer-location").focus(),baseObj._recentlyClicked.trigger("click"),ZFileExplorer.handleScroll())):((!$("#ui-zfileexplorer-searchLists").children().length||$("#ui-zfileexplorer-searchLists").children().hasClass("ui-zfileexplorer-noresults"))&&ZFileExplorer.handleSearchResult(),$("#ui-zfileexplorer-location").focus(),baseObj._recentlyClicked.trigger("click"),ZFileExplorer.handleScroll())}})},_createFileNameContainer:function(){var fileNameContainer=$("<div>").attr("class","ui-zsaveas-filenamecontainer ui-zsaveas-collapse"),fileNameField=($("<div>").attr("class","ui-zsaveas-fieldname").text(this._getString("filename.label")).appendTo(fileNameContainer),$("<div>").attr("class","ui-zsaveas-fieldinput").appendTo(fileNameContainer)),fileNameTextBox=$("<input>").attr({id:"ui-zsa-docname","class":"ui-zsa-docname",type:"text",value:documentData.documentName,tabindex:1}).appendTo(fileNameField),fileFormat=this.options.otherFileFormats;if(fileFormat&&fileFormat.length&&void 0!=documentData.extension){var docExtn=$("<span>").attr({id:"ui-saveas-extn","class":"ui-saveas-extn"}).appendTo(fileNameField);void 0!=documentData.extension&&"zwriter"!==documentData.extension&&"zsheet"!==documentData.extension&&"zslide"!==documentData.extension&&docExtn.text("."+documentData.extension),docExtn.mouseup(function(){fileNameTextBox.focus()}),fileNameTextBox.focus(function(){docExtn.addClass("ui-saveas-extn-focus")}).blur(function(){docExtn.removeClass("ui-saveas-extn-focus")})}else fileNameTextBox.addClass("ui-zsa-docname-no-format");var savebutton=$("#ui-zsaveas-savebutton");fileNameContainer.appendTo(this._saveasDialog),setTimeout(function(){fileNameTextBox.select()},1);var baseObj=this;fileNameTextBox.keyup(function(orgEvent){baseObj._recentlyClicked.is("#ui-folder-sharedfolder")||baseObj._recentlyClicked.parent().parent().parent().is("#ui-zfileexplorer-sharedFolder-ul")||baseObj._recentlyClicked.is("#ui-folder-workspaces")||$("#ui-zfileexplorer-searchLists").children().length||baseObj._recentlyClicked.data().readonly===!0||(13===orgEvent.keyCode&&fileNameTextBox.val().trim().length>0?savebutton.trigger("click"):savebutton.button(fileNameTextBox.val().trim().length>0?"enable":"disable"))})},_createFormatContainer:function(){var fileFormat=this.options.otherFileFormats;if(this._fileExtention=documentData.extension,fileFormat&&fileFormat.length){var formatContainer=$("<div>").attr("id","ui-zsaveas-format"),formatsPane=($("<div>").attr({"class":"ui-zsaveas-fieldname"}).text(this._getString("fileformat.label")).appendTo(formatContainer),$("<div>").attr({"class":"ui-zsaveas-formatsPane"}).appendTo(formatContainer)),formatsOptions=$("<select>").attr({id:"ui-zsaveas-formatsBtn"}).appendTo(formatsPane);formatContainer.appendTo(this._saveasDialog).hide();for(var i=0;i<fileFormat.length;i++)if(fileFormat[i].mtype){$("<option>").attr("mtype","separator").appendTo(formatsOptions)}else if(fileFormat[i].fileExtension===this._fileExtention){$("<option>").attr({data:"{'icon': '"+fileFormat[i].iconClass+"'}",value:fileFormat[i].fileExtension,selected:"selected"}).text(fileFormat[i].format).appendTo(formatsOptions)}else{$("<option>").attr({data:"{'icon': '"+fileFormat[i].iconClass+"'}",value:fileFormat[i].fileExtension}).text(fileFormat[i].format).appendTo(formatsOptions)}var baseObj=this;formatsOptions.zcombo({type:"icon_text",retainFocus:!0,editable:!1}).on("combochange",function(orgEvent,ui){baseObj._fileExtention=ui.value,$("#ui-saveas-extn").text("zwriter"===ui.value||"zsheet"===ui.value||"zslide"===ui.value?"":"."+ui.value)})}},_createExpandCollapseBtn:function(){{var baseObj=this;$("#ui-zfileexplorer .ui-zfileexplorer-fieldinput")}this._expandBtn=$("<button>").attr({id:"ui-zsaveas-expandCollapse","class":"ui-zbutton-secondary",data:"{'icons': {'primary': 'zsaveas zsaveas-down-arrow' },'text': false}",title:this._getString("chosefolderloc.label")}).text(this._getString("chosefolderloc.label")).insertBefore($("#ui-zfileexplorer-newfolder")),this._expandBtn.zbutton(),this._expandBtn.on("click",function(){baseObj._transition(),ZFileExplorer.handleScroll()})},_copyDocument:function(orgEvent){var docname=$("#ui-zsa-docname").val();docname=""===docname||this._selectedFodlerID===docname?this.options.documentName:docname;var actionType="deepcopy",folderId=documentData.myFolderId===this._selectedFodlerID||void 0===this._selectedFodlerID||""===this._selectedFodlerID?"-1":this._selectedFodlerID,reqData={action:actionType,rid:this.options.fileId,folderId:folderId,fileextn:this._fileExtention,docname:docname};if((this._isDefaultExtn||void 0===this._fileExtention||""===this._fileExtention.trim())&&(reqData.action="copy",delete reqData.fileextn),!this._requestStatus){this._requestTime=new Date;var baseObj=this,callbacks={progress:function(){baseObj._requestStatus=!0,baseObj._triggerEvent(baseObj._EVENTS.ONSUBMIT,orgEvent,{folderId:folderId,fileHTMLName:docname})},success:function(responseObj){"success"===responseObj.request?baseObj._handleAJAXRequest(responseObj,function(responseObj){baseObj._closeDialog(),baseObj.options.onSuccess&&baseObj.options.onSuccess({fileId:responseObj.newResourceId})}):baseObj._copyFail(responseObj.message),baseObj._requestStatus=!1},fail:function(){baseObj._copyFail()}};FCUtil.ajaxUtil("documentupdate.do","POST",reqData,callbacks)}},_serverError:function(msg){var errorOptions={autoCloseDelay:5e3};FCUtil.showError(msg,this._dialogBase,"#ui-zsaveas-dialog",errorOptions,"prependTo")},_handleAJAXRequest:function(responseObj,callback){var currentTime=new Date,timeRemainingToShowError=parseInt(currentTime-this._requestTime);timeRemainingToShowError=timeRemainingToShowError>1e3?0:1e3-timeRemainingToShowError,setTimeout(function(){FCUtil.removeProgressDialog(),callback&&callback(responseObj)},timeRemainingToShowError)},_copyFail:function(msgType){var baseObj=this;this._handleAJAXRequest(msgType,function(){baseObj._dialogBase.show();var msg=baseObj._getString("unknownerrorsave.label");"Permission_Denied"===msgType?msg=baseObj._getString("permissionerrorsave.label"):"File_Name_Already_Exist"===msgType&&(msg=baseObj._getString("filealert.label")),baseObj._dialogBase.show(),baseObj._requestStatus=!1;var saveBtn=$("#ui-zsaveas-savebutton");saveBtn.children(".ui-button-text").text(baseObj._getString("save.label")),saveBtn.removeClass("ui-button-text-icon-primary").enable(),saveBtn.children().first().remove(),baseObj._serverError(msg)})},_getString:function(key,module,stringArray){return FCUtil.getI18NString(module?module:"zsaveas",key,stringArray,this.options.keys)},_triggerEvent:function(orgEvent,_eventParams){var eventParams={action:this._action,fileId:this.options.fileId};_eventParams&&(eventParams=$.extend(eventParams,_eventParams)),$("body").trigger("zsaveas"+orgEvent,eventParams)},_transition:function(){$("#ui-zfileexplorer-folderContainer").is(":visible")?(this._dialogBase.animate({"margin-left":"+=133",width:this._dialogWidth}),$("#ui-zfileexplorer-folderContainer").slideUp(400),$("#ui-zsaveas-format").slideUp(400),$("#ui-zfileexplorer").children(".ui-zfileexplorer-tools").animate({top:0}),$("#ui-zfileexplorer-newfolder, .ui-zfileexplorer-searchbox-cont").fadeOut(100),$("#ui-zsaveas-format").fadeOut(200),this._expandBtn.find(".ui-icon").removeClass("zsaveas zsaveas-up-arrow").addClass("zsaveas zsaveas-down-arrow")):($("#ui-zfileexplorer").children(".ui-zfileexplorer-tools").animate({top:-6}),$("#ui-zfileexplorer-folderContainer").slideDown(400),$("#ui-zsaveas-format").slideDown(400),this._dialogBase.animate({"margin-left":"-=133",width:760}),$("#ui-zfileexplorer-newfolder, .ui-zfileexplorer-searchbox-cont").delay(200).fadeIn(200),this._expandBtn.find(".ui-icon").removeClass("zsaveas zsaveas-down-arrow").addClass("zsaveas zsaveas-up-arrow"),$(".ui-zfileexplorer-folder-content").zscroll("scrollX",5e3))},_closeDialog:function(){this._saveasDialog.zdialog("close")},_close:function(){this._saveasDialog.zdialog("destroy"),_dialogAlreadyOpened=!1,this._triggerEvent(this._EVENTS.ONCLOSE),$(document).off("click.zsa mouseover.zsa"),this._saveasDialog.remove(),ZFileExplorer.close(),$("#ui-zsaveas-recent-folders,#ui-zsaveas-file-format").remove()}};return{open:function(options){_dialogAlreadyOpened||zsaveas._init(options)},close:function(){zsaveas._closeDialog()}}}(window.jQuery);!function($){$.widget("ui.dragDropUpload",{widgetEventPrefix:"dragdropupload",_urlCheck:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,_EVENTS:{DROP:"ondrop",UPLOADFAILED:"onuploadfailed"},_create:function(){this.options=$.extend({},$.ui.dragDropUpload.defaults,this.options),this._bindEvents()},_bindEvents:function(){var base=this;this.element.bind("dragover."+this.widgetName,function(e){e.preventDefault()}),this.element.bind("drop."+this.widgetName,function(e){e.preventDefault();var visibleDialog=$(".ui-dialog:visible"),droppedOnLibrary=!1;if(visibleDialog.length){var libDialog=visibleDialog.find("#"+base.options.imagelibraryDialog);libDialog.length&&(droppedOnLibrary=!0,base._triggerEvent(base._EVENTS.DROP,$(e.target),droppedOnLibrary))}else base._triggerEvent(base._EVENTS.DROP,$(e.target),droppedOnLibrary);base.upload(e)})},_triggerEvent:function(event,target,droppedOnLibrary){var ui={target:target,droppedOnLibrary:droppedOnLibrary};return this._trigger(event,event,ui)},upload:function(e,insert){var controls=this._uploadFiles(e.originalEvent,insert),drop=this.options.callbacks.drop;drop&&drop(e,controls)},_uploadFiles:function(ev,insert){if(ev.dataTransfer&&ev.dataTransfer.files){var files=ev.dataTransfer.files,base=this,controls=[];return controls.push(base._upload(files,ev,insert)),controls}},_upload:function(files,ev){var base=this,options=this.options,beforeUpload=({addToDoc:options.addToDoc},options.callbacks.beforeUpload);if(beforeUpload){var canUpload=beforeUpload(files,ev);if(!canUpload)return base._triggerEvent(base._EVENTS.UPLOADFAILED,$(ev.target)),ev.preventDefault(),void ev.stopPropagation()}var data=$.extend({},options.data);this._replacePrams(files,data,ev);var success=options.callbacks.success;return success&&(options.callbacks.success=function(resp){success(resp,data.add_lib)}),$.ajaxUpload(options.url,data,options.callbacks,"text")},_replacePrams:function(files,data,ev){var baseObj=this;$.each(data,function(param,value){var _value=void 0;if("$DATAURI"==value||"$URL"==value||"$FILE"==value){if("$FILE"==value&&files.length)_value=files;else if("$DATAURI"==value||"$URL"==value){var htmlData=$(ev.dataTransfer.getData("text/html"));_value=$(htmlData[1]).attr("src"),"$URL"!=value||baseObj._urlCheck.test(_value)?"$DATAURI"==value&&baseObj._urlCheck.test(_value)&&(_value=void 0):_value=void 0}_value&&void 0!==_value?data[param]=_value:delete data[param]}else _value=value,"$FILESIZE"==value?_value=file.fileSize:"$FILENAME"==value&&(_value=file.name),data[param]=_value})},destroy:function(){this.element.unbind("."+this.widgetName),$.Widget.prototype.destroy.apply(this,arguments)}}),$.ui.dragDropUpload.defaults={}}(jQuery),function($){$.FCDragDropImage={_supportedFormats:"jpg,png,gif,jpeg,bmp",init:function(customUploadUrl,reqData){this.initDragDropUpload(customUploadUrl,reqData)},initDragDropUpload:function(customUploadUrl,reqData){var self=this,callbacks={beforeUpload:function(files){var canUpload=self.dropMethod(files);return canUpload},progress:function(resp,per){var imageLibrary=$("#imagelibrary");imageLibrary.length&&$(imageLibrary).is(":visible")&&imageLibrary.zimagehandler("updateUploadProgressbar",per)},addImage:function(imageInfo,add_lib){var imageList=imageInfo;imageInfo&&imageInfo.IMAGES&&(imageList=imageInfo.IMAGES),imageList instanceof Array||(imageList=[imageList]);var imageLibrary=$("#imagelibrary");imageLibrary.length&&$(imageLibrary).is(":visible")?imageLibrary.zimagehandler("insert",imageList,add_lib):$(document).trigger("imageinsert",{info:imageList,insertFrom:"local",isInsertFromWeb:!1,addedtolib:add_lib})},success:function(serverResponse,add_lib){var responseObj=serverResponse;"object"!=typeof responseObj&&(responseObj=$.parseJSON(serverResponse));var imageLibrary=$("#imagelibrary");if(imageLibrary.length&&$(imageLibrary).is(":visible")){var imageCategory=imageLibrary.zimagehandler("getSelectedImageCategory");if("local"!=imageCategory){var imageList=responseObj;responseObj&&responseObj.IMAGES&&(imageList=responseObj.IMAGES),imageList instanceof Array||(imageList=[imageList]);for(var i=0;i<imageList.length;i++)imageLibrary.zimagehandler("addImage",imageList[i])}else callbacks.addImage(responseObj,add_lib)}else callbacks.addImage(responseObj,add_lib)},fail:function(resp){var imageLibrary=$("#imagelibrary");self.imageErrorResp(resp);var imageCategory=imageLibrary.zimagehandler("getSelectedImageCategory");if("Library"==imageCategory){var loaders=$("#"+imageCategory+"Images").find(".ui-lib-image-loader-container"),container=$(loaders[loaders.length-1]).parent("li");container.remove()}}},data={imagefile:"$FILE",imageuri:"$DATAURI",importurl:"$URL",sourcetype:"document"};customUploadUrl?$.extend(!0,data,reqData):(data.add_lib="true",data[FComponents.option("csrfParamName")]=FCUtil.getCSRFToken()),$("body").dragDropUpload({url:customUploadUrl?customUploadUrl:FComponents.option("contextPath")+"fcuploadimage.do",data:data,callbacks:callbacks,imagelibraryDialog:"imagelibrary"}).on("dragdropuploadondrop.FCDragDropImage",function(ev,ui){$("body").dragDropUpload("option","addToDoc",ui.droppedOnLibrary?"false":"true")})},_checkFileExtn:function(fileName,extArr){"string"==typeof extArr&&(extArr=extArr.replace(/\s/g,"").split(",")),fileName=fileName.substr(fileName.lastIndexOf("\\")+1);var index=fileName.lastIndexOf("."),index=index>0?index:fileName.length,ext=fileName.substr(index+1).toLowerCase();return ext=ext?ext.toLowerCase():void 0,$.inArray(ext,extArr)<0?!1:!0},dropMethod:function(files){var imageLibrary=$("#imagelibrary");if(files.length){var _supportedFormats=$.FCDragDropImage._supportedFormats,checkExtn=!0,baseObj=this;if($.each(files,function(i,file){checkExtn&&(checkExtn=baseObj._checkFileExtn(file.name,_supportedFormats))}),!checkExtn)return alert(FCUtil.getI18NString("zimagelist","validfilemessage.label",void 0,void 0)),!1}if(!imageLibrary.length||!$(imageLibrary).is(":visible"))return!0;var canUpload=!1,imageCategory=imageLibrary.zimagehandler("getSelectedImageCategory");if("Library"==imageCategory||"local"==imageCategory){canUpload=!0,imageLibrary.zimagehandler("showProgressBar");var count=0,uploadCallback=function(){if(count++,count==files.length){var dragDropCallbacks=$("body").dragDropUpload("option","callbacks"),success=dragDropCallbacks.success,fileUploadSuccess=function(resp,values){var loaders=$("#"+imageCategory+"Images").find(".ui-lib-image-loader-container"),container=$(loaders[loaders.length-1]).parent("li");container.css({width:container.width(),height:container.height()}),loaders.remove(),success(resp,values,container)};dragDropCallbacks.success=fileUploadSuccess,$("body").dragDropUpload("option","callbacks",dragDropCallbacks)}},imageListEle=$("#"+imageCategory+"Images");imageListEle.length||$("#imagelibheader","#imagelibrary").show(),$.each(files,function(){var dummyContainer=$("<div>").addClass("ui-lib-image-loader-container"),loaderIcon=$("<span>").addClass("ui-lib-loader ui-lib-image-loader");loaderIcon.appendTo(dummyContainer);var container=$("#"+imageCategory+"Images").find("#addImageContainer");dummyContainer.insertAfter(container),uploadCallback()})}return canUpload},destroy:function(){$("body").dragDropUpload("destroy"),$("body").off("dragdropuploadondrop.FCDragDropImage")},imageErrorResp:function(resp){resp=resp.replace(/'/g,'"');var respText=JSON.parse(resp);respText&&respText.errorMsg&&alert(respText.errorMsg)}}}(jQuery);var FCVideoLibrary=function($){function closeDialog(){var videoDialog=$("#"+_dialogId);videoDialog.length&&(videoDialog.off(),_dialogIsOpened=!1,videoDialog.parent().length&&videoDialog.parent().remove(),videoDialog.remove())}var _dialogId="videoLibraryDialog",_dialogIsOpened=!1,windowOrigin=window.location.origin;(void 0===windowOrigin||""===windowOrigin)&&(windowOrigin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var contextPath=FComponents.option("contextPath");void 0!==contextPath&&"/"!==contextPath.substring(0,1)&&(windowOrigin+="/");var callbackUrl=windowOrigin+FComponents.option("contextPath")+"checkconf.do",videoLibraryConfig={selectedCategory:"PublicVideos",libDialog:void 0,changeVideo:!1,changeKeyword:void 0,changeEmbedCode:void 0,videoSource:void 0,options:{enableGadgets:!0,allowedSites:void 0},beforeInit:function(){this.libDialog=$("#videoLibrary");this.libDialog.parent().dialog("widget");this.libDialog.zvideohandler({allowedSites:this.options.allowedSites,insertAction:function(){},currentlysupportedembedwebsitesmessage:$.i18n("show.editor.currentlysupportedembedwebsitesmessage",new Array(this.options.supportedWebSites)),requestforwebsiteforembed:$.i18n("show.editor.requestforwebsiteforembed",new Array(this.options.webSitesTobeAdded))}),this._bindEvents()},_bindEvents:function(){var library=$("#videoLibrary");library.bind("keydown",function(ev){if(46==ev.keyCode||8==ev.keyCode){var element=ev.target.nodeName.toLowerCase();"input"!=element&&"textarea"!=element&&(ev.stopPropagation(),ev.preventDefault())}})},init:function(){this.libDialog.ztab("selectTabByType",this.selectedCategory,!0),this.libDialog.zvideohandler("setIsChangeVideo",this.changeVideo,this.changeKeyword,this.changeEmbedCode,this.videoSource)}};return{open:function(fcOptions){if(!_dialogIsOpened){fcOptions||(fcOptions={}),videoLibraryConfig.options=$.extend(!0,videoLibraryConfig.options,fcOptions),videoLibraryConfig.options.callbackUrl=callbackUrl,videoLibraryConfig.options.setSearchKeyWord=void 0!=fcOptions.defaultSearchKeyword?fcOptions.defaultSearchKeyword:videoLibraryConfig.options.setSearchKeyWord,videoLibraryConfig.options.imagestype=void 0!=fcOptions.insertFrom?fcOptions.insertFrom:videoLibraryConfig.options.imagestype,videoLibraryConfig.options.fcGadgetsUrl=void 0!=fcOptions.gadgetsURL?fcOptions.gadgetsURL:videoLibraryConfig.options.fcGadgetsUrl,videoLibraryConfig.options.enableGadgets=void 0!=fcOptions.enableGadgets?fcOptions.enableGadgets:videoLibraryConfig.options.enableGadgets;var dialogEle='<div id="videoLibrary" class="insertvideo" ctype="ztab" data="{componentOptions: {vertical: true}}"><ul class="menutabs" style="background-color:blue;">';videoLibraryConfig.options.enableGadgets&&(dialogEle=dialogEle+'<li id="publicvideostab" ttype="PublicVideos" data="{libraryOptions: {videoCategory: \'PublicVideos\',search: true}}"><a href="#PublicVideos">'+FCUtil.getI18NString("zvideolibrary","searchvideo.label")+"</a></li>");var dialogEle='<li id="embedurltab" ttype="EmbedURL" data="{libraryOptions: {videoCategory: \'EmbedURL\',search: true}}"><a href="#EmbedURL">'+FCUtil.getI18NString("zvideolibrary","embedcode.label")+'</a></li></ul><div id="PublicVideos" tabindex="0"></div><div id="EmbedURL"></div></div>',videoDialog=$('<div id="'+_dialogId+'"></div>').append(dialogEle).appendTo($("body"));videoDialog.zdialog({dialogClass:"zvideolibrary-dialog",position:"center",width:814,height:"auto",buttons:[{id:"submitbtn","class":"ui-zbutton-primary",text:FCUtil.getI18NString("zvideolibrary","insert.label"),click:function(){$("#videoLibrary").zvideohandler("insert")},btype:"loader"},{text:FCUtil.getI18NString("fcommon","close.label"),click:"CLOSE"}],associatedObj:videoLibraryConfig,title:FCUtil.getI18NString("zvideolibrary","title.label"),resizable:!1,modal:!0,autoOpen:!0}).on("dialogclose.videolibrary",function(){closeDialog()}),_dialogIsOpened=!0}},close:function(){var videoDialog=$("#"+_dialogId);videoDialog.length&&videoDialog.dialog("close")}}}(jQuery);!function($){var zvideohandler={iframeElement:void 0,selectedElement:void 0,prevSelectedElement:[],videoListContainer:void 0,insertHtml:void 0,_videosInfo:{},_currentVideoInfo:void 0,_loader:void 0,_selectedCategory:"PublicVideos",_videosType:"youtube",_keyword:void 0,_oldKeyword:void 0,_oldEmbedCode:void 0,_allowEmbed:!1,_request:!0,_changeVideo:!1,_totalVideosCount:20,_nextPageToken:"",monthArr:{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},options:{keys:{"searchvideo.label":"Search Video","embedcode.label":"Embed Code","novideofound.label":"No videos found.","uploaded.label":"Uploaded on {0}","note.label":"Note:","youtube.label":"YouTube","dailymotion.label":"DailyMotion","insert.label":"Insert","change.label":"Change","insertgadget.label":"Insert Gadget","changegadget.label":"Change Gadget","pasteembedcode.label":"Paste the Embed Code here.","changeembedcode.label":"Change the Embed Code here.","searchmessage.label":"Type your search here to find videos.","provideproperembedcode.label":"Please provide proper embed code to insert.","notsupportedembedurl.label":"-Embed URL from this service is not supported."},count:10},widgetEventPrefix:"video",_EVENTS:{ONINSERT:"insert"},_create:function(){this._initEvents()},_createHeader:function(){var headerDiv=$("<div>").attr("id","videoheader").addClass("ui-insvideo-header");return this._createSearchEle().appendTo(headerDiv),headerDiv},_createSearchEle:function(){{var searchDiv=$("<div>").addClass("ui-insvideo-search ui-corner-all  ui-state-default"),searchInput=$("<input>").addClass("ui-insvideo-search-input ui-corner-left").appendTo(searchDiv);$("<span>").addClass("ui-insvideo-search-icon ui-icon ui-components-icon ui-icon-search").appendTo(searchDiv)}searchInput.addClass("ui-icon-public-search-input").removeClass("ui-corner-left");var button=$("<button>").addClass("ui-insvideo-from").attr("id","searchtypebtn").attr("popup","videoSearchTypeMenu");return button.attr("data","{'icons': {'primary': 'ui-social-color-icon ui-social-youtube'}, 'text': false}").zbutton(),button.insertBefore(searchInput),this._createSearchTypeMenu(),this._videosType="youtube",searchDiv},_createSearchTypeMenu:function(){var base=this,items=[{id:"youtube",checked:"true",inputtype:"radio",name:"searchType",icon:"ui-social-color-icon ui-social-youtube",data:"{ op: 'youtube'}"},{id:"dailymotion",inputtype:"radio",name:"searchType",icon:"ui-social-color-icon ui-social-dailymotion",data:"{ op: 'dailymotion'}"}],searchMenu=$.ui.zmenu.createMenu("videoSearchTypeMenu",items,{type:"icon_only"}).attr("relativeto","parent").on("menuitemclicked",function(ev,ui){base._videosType=ui.menuitem.metadata().op;var button=$("#searchtypebtn"),iconClass=base._videosType;button.button("option","icons",{primary:"ui-social-color-icon ui-social-"+iconClass,secondary:button.button("option","icons").secondary}),base._start()});return searchMenu},_initEvents:function(){var base=this,videoLibrary=$("#PublicVideos"),header=base._createHeader();header.appendTo(videoLibrary);var videoContainer=$("<div>").attr("id","VideoContainer").addClass("ui-lib-video");base.iframeElement=$("<iframe>").addClass("ui-insvideo-iframeelement");var iframeContainer=$("<div>").attr("id","iframeContainer").addClass("ui-insvideo-iframe-container").append(base.iframeElement);videoContainer.appendTo(videoLibrary),base.videoListContainer=$("<div>").attr("id","videoListContainer").appendTo(videoContainer).addClass("ui-lib-videocontainer"),iframeContainer.appendTo(base.videoListContainer),base.videoList=$("<ul>").addClass("ui-insvideo-videolist-ul"),base.videoListContainer.append(base.videoList);var noVideoInfo=$("<span>").attr("id","noVideoInfo");base.videoListContainer.append(noVideoInfo);var searchEle=$("#videoheader"),searchInput=searchEle.find("input.ui-insvideo-search-input");searchInput.on("keydown",function(ev){if(ev.keyCode==$.ui.keyCode.ENTER){var text=searchInput.val().trim();base._keyword!=text&&text!=base._getString("searchmessage.label")&&text&&(base._keyword=text,searchInput.blur(),base._start())}}).on("focus",function(){searchInput.val().trim()==base._getString("searchmessage.label")?$(this).val(""):searchInput.css("color","black")}).on("mousedown",function(){searchInput.val().trim()===base._getString("searchmessage.label")&&$(this).val("")}).on("blur",function(){0===searchInput.val().trim().length?searchInput.val(base._getString("searchmessage.label")).css("color","#909090"):searchInput.css("color","black")}),searchEle.find("span.ui-insvideo-search-icon").on("mousedown",function(){var text=searchInput.val().trim();base._keyword!=text&&text!=base._getString("searchmessage.label")&&text&&(base._keyword=text,base._start())}),base.videoDialog=$("#videoLibrary");var libDialog=base.videoDialog.parent();libDialog.on("dialogbeforeclose",function(){base._beforeCloseDialog()}),base.insertHtml=$("<div>").attr("id","inserthtml").addClass("ui-insvideo-inserthtml");var embedStmt=$("<span>").attr("id","embedTitle").text(base._getString("pasteembedcode.label")).addClass("ui-insvideo-embedtitle"),textArea=$("<textarea>").attr("id","embedsnippet").addClass("ui-insvideo-textarea"),div=$("<div>").attr("id","textNote").append($("<p>").addClass("label ui-insvideo-note").text(base._getString("note.label"))).append($("<p>").addClass("label").html(base.options.currentlysupportedembedwebsitesmessage));div.append($("<p>").addClass("label").html(base.options.requestforwebsiteforembed));var iframeDiv=$("<div>").addClass("ui-embedurl-preview").append($('<span id="embedMsg">').addClass("ui-insvideo-embedmsg"));base.insertHtml.append(embedStmt).append(textArea).append(iframeDiv).append(div),$("#EmbedURL").append(base.insertHtml),base._submitBtn=libDialog.dialog("widget").find(".ui-dialog-buttonpane").find("#submitbtn"),base._loader=$("<div>").addClass("ui-lib-loader ui-insvideo-loader-pos").hide().appendTo(videoLibrary);var tcount=200,ele=base.videoListContainer;ele.on("scroll",function(){var iframeElement=base.iframeElement;if(iframeElement.width()&&base.selectedElement&&iframeElement.css("top",base.selectedElement.position().top+(base.selectedElement.outerHeight(!0)-base.selectedElement.height())/2),ele[0].scrollHeight-ele.scrollTop()<=1*ele.height()+200&&base._request){var index=base.videoList.children().length;tcount>index&&index<base._totalVideosCount&&base.getVideos(index)}});var removeIframe=!1;base._oldCodeToBeEmbedded="",textArea.on("keyup",function(){var newValue=textArea.val().trim();if(newValue.length>0){if(base._oldEmbedCode!=newValue){base._oldEmbedCode=newValue;try{var codeToBeEmbedded=!1,divChk=$("<div>"+newValue+"</div>"),allowedElems=divChk.children("img");if(allowedElems=allowedElems&&allowedElems.length?allowedElems:divChk.find("img"),1===allowedElems.length&&"img"===allowedElems[0].tagName.toLowerCase()){var imgSrc=allowedElems[0].src;codeToBeEmbedded={type:"image",src:imgSrc,embedCode:allowedElems}}else allowedElems=divChk.find("iframe, param, embed"),codeToBeEmbedded=base.isAllowedURL(allowedElems,base._oldEmbedCode);codeToBeEmbedded?(removeIframe=!1,codeToBeEmbedded.embedCode!=base._oldCodeToBeEmbedded&&base._embedPreview(codeToBeEmbedded)):removeIframe=!0}catch(err){base.insertHtml.find("#embedMsg").text(base._getString("provideproperembedcode.label")),removeIframe=!0}base._removePreview(removeIframe)}}else base._oldEmbedCode=void 0,removeIframe=!0,base._removePreview(removeIframe),base.insertHtml.find("#embedMsg").text("")}),$(base.videoDialog).on("tabselect."+this.widgetName,function(ev,ui){base._selectedOptions=ui.tab.metadata(),base._selectedCategory=base._selectedOptions.libraryOptions.videoCategory,base._beforeStart()})},_removePreview:function(removeIframe){var base=this;if(removeIframe){base._oldallowedSrc=void 0,base._oldCodeToBeEmbedded=void 0,base._embedType="",base._allowEmbed=!1,base._submitBtn.button("disable"),base.insertHtml.find("img").remove();var iframeChk=base.insertHtml.find("iframe");iframeChk.length?iframeChk.attr("src","").css({width:"0px",height:"0px"}):!1}else base._allowEmbed=!0,base.insertHtml.find("#embedMsg").text(""),base._submitBtn.enable()},setKeyword:function(keyword){this._keyword=keyword},setIsChangeVideo:function(changeVideo,keyword,changeEmbedCode,videoSource){var base=this;base._changeVideo=changeVideo;var titleStr="",btnStr="";if(changeVideo&&changeEmbedCode){base._keyword=keyword,titleStr=base._getString("changegadget.label"),btnStr=base._getString("change.label"),base.insertHtml.find("#embedTitle").text(base._getString("changeembedcode.label")),base.insertHtml.find("#embedsnippet").val(changeEmbedCode),base._onChangeDialog();var searchInput=$("#videoheader").find("input.ui-insvideo-search-input");searchInput.val(keyword),base._reset(),"PublicVideos"==base._selectedCategory&&$("#"+videoSource).click()}else base._currentVideoInfo?(base._submitBtn.enable(),base.videoListContainer.scrollTop(base.selectedElement.position().top)):base._submitBtn.button("disable"),titleStr=base._getString("insertgadget.label"),btnStr=base._getString("insert.label"),base.insertHtml.find("#embedTitle").text(base._getString("pasteembedcode.label"));base._submitBtn.button("option","label",btnStr),base.videoDialog.parent().dialog("option","title",titleStr)},_onChangeDialog:function(){var base=this,textArea=base.insertHtml.find("#embedsnippet");if(base._oldEmbedCode=textArea.val().trim(),base._oldallowedSrc="",base._oldCodeToBeEmbedded="",base._oldEmbedCode){var divChk=$("<div>"+base._oldEmbedCode+"</div>"),allowedElems=divChk.find("iframe, param, embed"),codeToBeEmbedded=base.isAllowedURL(allowedElems,base._oldEmbedCode);codeToBeEmbedded?(base._embedPreview(codeToBeEmbedded),base._allowEmbed=!0,base._submitBtn.enable()):(base._allowEmbed=!1,base._submitBtn.button("disable"))}},_getImageDim:function(url,callback,timeout){timeout=timeout||3e3;var timer,timedOut=!1;clearTimeout(timer);var img=new Image;img.onerror=img.onabort=function(){timedOut||(clearTimeout(timer),callback(url,"error"))},img.onload=function(){timedOut||(clearTimeout(timer),callback(url,"success",{width:this.width,height:this.height}))},img.src=url,timer=setTimeout(function(){timedOut=!0,callback(url,"timeout")},timeout)},_embedPreview:function(codeToBeEmbedded){var base=this,allowedSrc=codeToBeEmbedded.src;allowedSrc=allowedSrc.replace(/javascript:/g,"");var previewContainer=base.insertHtml.find(".ui-embedurl-preview"),previewElement=!1;"video"==codeToBeEmbedded.type?(previewElement=previewContainer.find("iframe"),previewElement.length?previewElement.attr("src",allowedSrc):(previewElement=$('<iframe src="'+allowedSrc+'" frameborder="0"></iframe>'),previewContainer.append(previewElement)),base._previewDim(previewElement,codeToBeEmbedded)):"image"==codeToBeEmbedded.type&&base._getImageDim(allowedSrc,function(imageSrc,state,dim){"success"==state?(base.insertHtml.find("img").remove(),previewElement=$(codeToBeEmbedded.embedCode),previewContainer.append(previewElement),base._imageDim=dim,base._previewDim(previewElement,codeToBeEmbedded,dim)):(base.insertHtml.find("#embedMsg").text(base._getString("provideproperembedcode.label")),base._previewDim(previewElement,codeToBeEmbedded,dim))})},_previewDim:function(previewElement,codeToBeEmbedded,dim){var base=this;if(previewElement){base._oldCodeToBeEmbedded=codeToBeEmbedded.embedCode;var embedCode=codeToBeEmbedded.embedCode;base._oldallowedSrc=codeToBeEmbedded.src,base._embedType=codeToBeEmbedded.type;var width=dim&&dim.width?dim.width:isNaN($(embedCode).attr("width"))?320:$(embedCode).attr("width"),height=dim&&dim.height?dim.height:isNaN($(embedCode).attr("height"))?240:$(embedCode).attr("height");width=width/height*240,width=width>450?450:width,previewElement.css({width:width,height:"240px"}),base._removePreview(!1)}else base._removePreview(!0)},_beforeStart:function(){var base=this,sendRequest=!1,searchEle=$("#videoheader"),searchInput=searchEle.find("input.ui-insvideo-search-input");searchInput.val(base._keyword),searchInput.trigger("blur"),"EmbedURL"==base._selectedCategory?base._allowEmbed?base._submitBtn.enable():base._submitBtn.button("disable"):"PublicVideos"==base._selectedCategory&&(base.videoList.find("li").length?(base.selectedElement?base._submitBtn.enable():base._submitBtn.button("disable"),base._oldKeyword&&base._oldKeyword==base._keyword||(sendRequest=!0)):sendRequest=!0),sendRequest&&base._start()},_reset:function(){var base=this;base.videoList.empty(),base.selectedElement=void 0,base.prevSelectedElement=[],base._currentVideoInfo=void 0,base.iframeElement.attr("src",""),base.iframeElement.removeClass("ui-insvideo-iframeimg-size"),base._totalVideosCount=20,base._nextPageToken=""},_start:function(){var base=this;base._keyword&&(base._reset(),base.getVideos()),base._currentVideoInfo?base._submitBtn.enable():base._submitBtn.button("disable")},getVideos:function(startIndex){var base=this;if(base._request&&base._keyword){base._request=!1,base._loader.show();var videoCategoryFn=$.ZVideoLibrary[base._selectedCategory][base._videosType];startIndex=startIndex?startIndex:0;var params={startIndex:startIndex,limit:base.options.count,keyword:base._keyword,nextPageToken:base._nextPageToken};videoCategoryFn.load(base,params,function(baseObj,resp){base._loader.hide();var list=void 0;try{list="string"==typeof resp?JSON.parse(resp):resp}catch(err){list=void 0}list?(base._totalVideosCount=list.TOTALCOUNT,base._nextPageToken=list.VIDEO_NEXTPAGETOKEN,baseObj._buildVideos(list),base._oldKeyword=base._keyword):0==base.videoList.children().length&&base.videoListContainer.find("#noVideoInfo").text(base._getString("novideofound.label")),base._request=!0})}},closeDialog:function(){this._beforeCloseDialog(),$.dialogutil.close("videodialog")},_beforeCloseDialog:function(){var base=this;base._changeVideo=!1,base._allowEmbed=!1,base._oldEmbedCode=void 0,base._oldallowedSrc=void 0,base._oldCodeToBeEmbedded=void 0,base._oldKeyword=base._keyword;var iframe=base.iframeElement,src=iframe.attr("src");src&&(src=src.replace(/&autoplay=1/gi,""),iframe.attr("src",src)),base._removeEmbedPreview()},_bindEvents:function(li){var base=this,DELAY=400,clicks=0,timer=void 0;li.on("click",function(ev){if(base._submitBtn.enable(),base.selectedElement=li,clicks++,1===clicks){var active=li.parent().find(".ui-insertvideoli-active");active.length?active.removeClass("ui-insertvideoli-active"):!1,li.addClass("ui-insertvideoli-active");var index=li.data("infoIndex");base._currentVideoInfo=$.extend(!0,{},base._videosInfo[base._videosType+index]),base._httpToHttps(),timer=setTimeout(function(){$(ev.target).hasClass("ui-zil-list-image")?base._imageToFrame():base._frameToImage(),clicks=0,base.prevSelectedElement=li},DELAY)}else{li.addClass("ui-insertvideoli-active");var index=li.data("infoIndex");clearTimeout(timer),base._insert(),clicks=0}})},insert:function(){this._insert()},_insert:function(){var base=this,videoInfo={selectedcategory:base._selectedCategory,videoinfo:base._currentVideoInfo,searchKey:base._keyword,searchSite:base._videosType},inserted=!1;base._triggerEvent(base._EVENTS.ONINSERT,videoInfo),base.options.insertAction&&(inserted=base.options.insertAction(videoInfo))},_triggerEvent:function(event,info){var data={info:info};return this._trigger(event,data)},_httpToHttps:function(){var base=this,VIDEO_URL=base._currentVideoInfo.VIDEO_URL;if(new RegExp("^(.*)youtube.com(?:|/.*)$").test(VIDEO_URL)){var index=VIDEO_URL.indexOf("youtube");base._currentVideoInfo.VIDEO_URL="https://www."+VIDEO_URL.slice(index)}else if(new RegExp("^(.*)dailymotion.com(?:|/.*)$").test(VIDEO_URL)){var index=VIDEO_URL.indexOf("dailymotion");base._currentVideoInfo.VIDEO_URL="https://www."+VIDEO_URL.slice(index)}},_formattingList:function(){var base=this,selectedElementId=base.selectedElement?base.selectedElement.attr("id"):void 0;if(base.prevSelectedElement.length&&base.prevSelectedElement.attr("id")!=selectedElementId){var prevSpanImg=base.prevSelectedElement.find(".ui-insvideo-img");prevSpanImg.length?prevSpanImg.removeClass("ui-insvideo-iframeimg-size").css("visibility",""):!1}},_frameToImage:function(){var base=this;if(base.iframeElement.attr("src",""),base.iframeElement.removeClass("ui-insvideo-iframeimg-size"),base._formattingList(),base.selectedElement){var spanImg=base.selectedElement.find(".ui-insvideo-img");spanImg.removeClass("ui-insvideo-iframeimg-size").css("visibility",""),base._positionSelectedEle()}},_positionSelectedEle:function(){var base=this,element=base.videoListContainer,h1=base.selectedElement.position().top+base.selectedElement.outerHeight(!0),h2=element.scrollTop()+element.height(),val=element.scrollTop();h1>=h2?val=h1-element.height():base.selectedElement.position().top<element.scrollTop()&&(val=base.selectedElement.position().top),element.scrollTop(val)},_imageToFrame:function(){var base=this;base.iframeElement.attr("src","");var spanImg=base.selectedElement.find(".ui-insvideo-img");spanImg.addClass("ui-insvideo-iframeimg-size").css("visibility","hidden"),base._formattingList();var srcStr="youtube"==base._videosType?base._currentVideoInfo.VIDEO_URL+"&autoplay=1&autohide=1":base._currentVideoInfo.VIDEO_URL+"&autoplay=1";base.iframeElement.attr("src",srcStr).addClass("ui-insvideo-iframeimg-size"),base._positionSelectedEle(),base.iframeElement.css("top",base.selectedElement.position().top+(base.selectedElement.outerHeight(!0)-base.selectedElement.height())/2)},_removeEmbedPreview:function(){{var base=this;base.insertHtml.find("#embedsnippet").val("")}base.insertHtml.find("#embedMsg").text(""),base.insertHtml.find("img").remove(),base.insertHtml.find("iframe").attr("src","").css({width:"0px",height:"0px"})},removeSelection:function(){this._frameToImage(),this.selectedElement?this.selectedElement.removeClass("ui-insertvideoli-active"):!1,this.selectedElement=void 0,this._currentVideoInfo=void 0},getSelectedVideo:function(){var info=void 0,base=this;return info="EmbedURL"==this._selectedCategory?{selectedcategory:base._selectedCategory,embedType:base._embedType,embedcode:base._oldCodeToBeEmbedded,sourceurl:base._oldallowedSrc,imageDim:base._imageDim}:{selectedcategory:base._selectedCategory,videoinfo:base._currentVideoInfo,searchKey:base._keyword,searchSite:base._videosType}},isAllowedURL:function(elems,embedSrc){var embedLink,base=this,allowedSites=base.options.allowedSites,isAllowed=!1,embedObj={};if(elems.length>0&&$.each(elems,function(i,elem){var elemSrc=$(elem).attr("src");elemSrc||"movie"!=elem.name&&"src"!=elem.name||(elemSrc=elem.value),elemSrc&&$.each(allowedSites,function(j,allowedSite){var isAllowedURL=allowedSite.test(elemSrc);return isAllowedURL?(isAllowed=embedSrc,embedLink=elemSrc,!1):(isAllowed=!1,void(embedLink=elemSrc))})}),isAllowed){if(new RegExp("^(.*)youtube.com(?:|/.*)$").test(embedLink)){var index=embedLink.indexOf("youtube");embedLink="https://www."+embedLink.slice(index);var div=$("<div>"+isAllowed+"</div>"),embedEle=$(div).find("iframe");if(embedEle.length){var test=$(embedEle).attr("src",embedLink);isAllowed=$(test)[0].outerHTML}var objectEle=$(div).find("object");objectEle.length&&(embedEle=$(objectEle).find("embed"),embedEle.length&&($(embedEle).attr("src",embedLink),isAllowed=$(div)[0].innerHTML))}}else{"http"!=embedSrc.substring(0,4)&&(embedSrc="https://"+embedSrc);var a=document.createElement("a");a.href=embedSrc;var serverURLHost=a.hostname;if("www.youtube.com"==serverURLHost||"youtube.com"==serverURLHost){var arr=embedSrc.match("[\\?&]v=([^&#]*)");arr.length&&arr[1]&&(embedLink="https://www.youtube.com/embed/"+arr[1],isAllowed='<iframe width="420" height="315" src="https://www.youtube.com/embed/'+arr[1]+'" frameborder="0" allowfullscreen></iframe>')}}var embedMsg=base.insertHtml.find("#embedMsg");if(embedLink){if(!isAllowed){var a=document.createElement("a");a.href=embedLink;var serverURLHost=a.hostname;embedMsg.text(base._getString("notsupportedembedurl.label",new Array(serverURLHost)))}}else embedMsg.text(base._getString("provideproperembedcode.label"));return isAllowed?(embedObj.embedCode=isAllowed,embedObj.src=embedLink,embedObj.type="video",embedObj):isAllowed},_buildVideos:function(list){var base=this,ul=base.videoList,index=ul.children().length;if(list.VIDEOS.length)for(base.videoListContainer.find("#noVideoInfo").text(""),i=0;i<list.VIDEOS.length;i++){var li=$("<li>").attr("id",base._videosType+(index+i)).data("infoIndex",index+i).addClass("ui-insertvideoli"),timeStr=Math.floor(list.VIDEOS[i].VIDEO_DURATION/60)+":",sec=list.VIDEOS[i].VIDEO_DURATION%60;timeStr+=1==sec.toString().length?"0"+sec:sec;var span=$("<span>").addClass("ui-insvideo-img").append($("<img>").attr({src:list.VIDEOS[i].VIDEO_BIGIMAGE,"class":"ui-zil-list-image ui-insvideo-imgpreview"})).append($("<span>").attr("class","ui-zil-list-image ui-video-playico")).append($("<span>").attr({id:"ui-insvideo-time","class":"ui-insvideo-time"}).text(timeStr)),titleStr=list.VIDEOS[i].VIDEO_NAME,spanTitle=$("<span>").attr("id","title").addClass("ui-insvideo-title").text(titleStr),descStr=list.VIDEOS[i].VIDEO_DESC.length>180?list.VIDEOS[i].VIDEO_DESC.substring(0,176)+"...":list.VIDEOS[i].VIDEO_DESC,spanDesc=$("<span>").attr("id","desc").addClass("ui-insvideo-dis").text(descStr),uploadStr="";if("youtube"==base._videosType){var strTemp=list.VIDEOS[i].VIDEO_UPLOADED.substring(0,10);strTemp=strTemp.split("-"),uploadStr=new Date(strTemp[0],strTemp[1],strTemp[2])}else uploadStr=new Date(1e3*list.VIDEOS[i].VIDEO_UPLOADED);var uploadData=[" "+this.monthArr[uploadStr.getMonth()]+" "+uploadStr.getDate()+", "+uploadStr.getFullYear()],spanUploadTime=$("<span>").addClass("ui-insvideo-dis ui-insvideo-uploadtime").text(base._getString("uploaded.label"),uploadData);li.append(span),li.append(spanTitle),li.append(spanDesc).append(spanUploadTime),li.append($("<span>").addClass("ui-lib-image-label").append($("<input>").attr("type","checkbox").attr("id",index+i))),base._bindEvents(li),base._videosInfo[base._videosType+(index+i)]=$.extend(!0,{},list.VIDEOS[i]),ul.append(li)}else index||base.videoListContainer.find("#noVideoInfo").text(base._getString("novideofound.label"))},_getString:function(key,paramArr){return $.i18n?$.i18n("zvideohandler",key,paramArr):paramArr.length?paramArr[0]+this.options.keys[key]:this.options.keys[key]}};$.widget("ui.zvideohandler",zvideohandler)}(jQuery),function($){$.ZVideoLibrary={ticket:void 0,contextPath:"",setContextPath:function(contextPath){this.contextPath=contextPath},PublicVideos:{youtube:{URL:FComponents.option("contextPath")+"zvideos.do?mode=youtube",load:function(base,paramObj,callback){var params={search:paramObj.keyword,nextPageToken:paramObj.nextPageToken};$.ZVideoLibrary.getVideos(base,FComponents.option("contextPath")+"zvideos.do?mode=youtube",params,callback)}},dailymotion:{URL:FComponents.option("contextPath")+"zvideos.do?mode=dailymotion",load:function(base,paramObj,callback){var limit=paramObj.limit,startIndex=Math.ceil(paramObj.startIndex/limit)+1,params={startindex:startIndex,maxresult:limit,search:paramObj.keyword};$.ZVideoLibrary.getVideos(base,FComponents.option("contextPath")+"zvideos.do?mode=dailymotion",params,callback)}}},getVideos:function(baseObj,URL,params,callback){this._request&&this._request.abort(),this._request=$.ajax({type:"GET",url:URL,data:params,success:function(serverResponse){(serverResponse||""!=serverResponse)&&callback(baseObj,serverResponse)},error:function(){callback(baseObj,void 0)}})}}}(jQuery);